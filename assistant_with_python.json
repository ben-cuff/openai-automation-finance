[
  {
    "question": "If I borrow $300,000 at an annual interest rate of 2.99% for 30 years, and I make monthly payments that fully pay off the loan by the end, how much will I have to pay each month?",
    "expected_answer": 1263.19,
    "ai_response": "To calculate your monthly mortgage payment for a fixed-rate loan, you can use the formula for a standard amortizing loan payment:\n\nMonthly Payment = P * [r(1 + r)^n] / [(1 + r)^n \u2013 1]\n\nWhere:\n- P = principal (amount you borrow) = $300,000\n- r = monthly interest rate = annual rate / 12 months = 0.0299 / 12\n- n = total number of payments = 30 years * 12 months/year = 360\n\nLet me walk through the calculation:\n\n- r = 0.0299 / 12 = 0.0024916667\n- n = 360\n- P = 300000\n\nPlug these values into the formula:\n\nMonthly Payment = 300000 * [0.0024916667 * (1 + 0.0024916667)^360] / [(1 + 0.0024916667)^360 \u2013 1]\n\nI'll calculate this step by step:\n\n1. (1 + r)^n = (1 + 0.0024916667)^360\n2. Calculate numerator: 0.0024916667 * result_from_1\n3. Calculate denominator: result_from_1 - 1\n4. Monthly Payment = 300000 * (result_from_2) / (result_from_3)\n\nI'll use Python to get the precise answer.\nP = 300000\nannual_rate = 0.0299\nr = annual_rate / 12\nn = 360\n\n# Calculating (1 + r)^n\nfactor = (1 + r) ** n\n# Numerator: r * (1 + r)^n\nnumerator = r * factor\n# Denominator: (1 + r)^n - 1\ndenominator = factor - 1\n\n# Monthly payment\nmonthly_payment = P * numerator / denominator\nround(monthly_payment, 2)\nYour monthly payment on a $300,000 loan at an annual interest rate of 2.99% for 30 years would be @@@1263.19@@@. \n\nThis amount covers both the interest and the principal, and by making these monthly payments, your loan will be fully paid off at the end of the 30 years.\n",
    "actual_answer": 1263.19
  },
  {
    "question": "If I get a loan for $300,000 at 2.99% interest for 30 years, with monthly payments that fully pay it off, how much will I still owe after 5 years?",
    "expected_answer": 266670.41,
    "ai_response": "To calculate how much you still owe after 5 years on a $300,000 loan at a 2.99% interest rate with 30-year (360 monthly payments) amortization, we follow these steps:\n\n1. Calculate the monthly payment (PMT) using the formula for a fixed-rate mortgage:\n   \\[\n   \\text{PMT} = P \\times \\frac{r(1+r)^n}{(1+r)^n-1}\n   \\]\n   Where:\n   - \\(P = 300,000\\) (principal)\n   - \\(r = \\frac{2.99}{100}/12\\) (monthly interest rate)\n   - \\(n = 360\\) (number of payments)\n\n2. Determine the remaining balance after 5 years (60 payments made, 300 payments remaining). The formula for the remaining balance is:\n   \\[\n   B = P \\times \\frac{(1+r)^n-(1+r)^p}{(1+r)^n-1}\n   \\]\n   Where:\n   - \\(p = 60\\) (number of payments made)\n\nLet's calculate it step by step:\n\n```python\nP = 300000\nannual_rate = 2.99 / 100\nr = annual_rate / 12\nn = 360\np = 60\n\n# Monthly payment\nPMT = P * (r * (1 + r)**n) / ((1 + r)**n - 1)\n\n# Remaining balance after 60 months\nRemaining_balance = P * ((1 + r)**n - (1 + r)**p) / ((1 + r)**n - 1)\nRemaining_balance\n```\n\nLet's compute that:\nP = 300000\nannual_rate = 2.99 / 100\nr = annual_rate / 12\nn = 360\np = 60\n\n# Monthly payment calculation\nPMT = P * (r * (1 + r)**n) / ((1 + r)**n - 1)\n\n# Remaining balance after 60 payments\nRemaining_balance = P * ((1 + r)**n - (1 + r)**p) / ((1 + r)**n - 1)\nround(Remaining_balance, 2)\nTo find out how much you will still owe after 5 years, we use the remaining balance formula for an amortizing loan. After calculating, you will still owe about $266,670.41 after 60 payments (5 years) on your $300,000 loan at 2.99% interest for 30 years.\n\nSo the amount still owed after 5 years is @@@266670.41@@@.\n",
    "actual_answer": 266670.41
  },
  {
    "question": "For a loan of $300,000 with 2.99% interest over 30 years, with monthly payments that pay off the loan completely, how much of the 30th payment goes toward interest?",
    "expected_answer": 708.91,
    "ai_response": "To answer this, let's break it down:\n\n1. This is a fully-amortizing fixed-rate mortgage: $300,000 at 2.99% annual interest for 30 years (360 months).\n2. The monthly payment can be calculated using the standard formula for a fixed-rate mortgage:\n   \\[\n   M = P\\frac{r(1+r)^n}{(1+r)^n-1}\n   \\]\n   where \n   - \\( M \\) = monthly payment\n   - \\( P \\) = loan principal = 300,000\n   - \\( r \\) = monthly interest rate = 0.0299/12\n   - \\( n \\) = total number of payments = 360\n3. The 30th year's final payment is the 360th payment.\n4. By the time of the 360th payment, the outstanding balance is nearly zero, so the interest portion is much smaller than the principal portion.\n\nLet's perform the calculations step by step:\n\n### 1. Calculate the monthly interest rate\n\nAnnual rate = 2.99%\nMonthly rate = 2.99 / 12 / 100 = 0.0024916667\n\n### 2. Calculate monthly payment (M)\n\n    P = 300000\n    r = 0.0024916667\n    n = 360\n\nLet's calculate M:\n\n```python\nP = 300000\nr = 0.0299/12\nn = 360\n\nM = P * r * (1 + r)**n / ((1 + r)**n - 1)\nM\n```\n\n### 3. Find the remaining balance after 359 payments (right before 360th payment)\n\nThe balance formula is:\n\\[\nB = P \\left( \\frac{(1+r)^n - (1+r)^p}{(1+r)^n - 1} \\right)\n\\]\n\nwhere \\( p \\) is the number of payments made (359 before the final payment).\n\n### 4. The interest portion of the 360th payment\n\n\\[\n\\text{Interest}_{360} = \\text{Remaining balance after 359 payments} \\times r\n\\]\n\nLet's do the math in Python:\n# Loan parameters\r\nP = 300000  # principal\r\nannual_rate = 2.99  # annual interest rate in percent\r\nr = annual_rate/100/12  # monthly interest rate\r\nn = 360  # total payments\r\n\r\n# Monthly payment formula\r\nM = P * r * (1 + r)**n / ((1 + r)**n - 1)\r\n\r\n# Remaining balance after 359 payments\r\np = 359  # payments made before 360th\r\nB = P * ((1 + r)**n - (1 + r)**p) / ((1 + r)**n - 1)\r\n\r\n# Interest portion of the 360th payment\r\ninterest_360th = B * r\r\nround(interest_360th, 2)  # in dollars, rounded to 2 decimals\nThe interest portion of the 360th (final) payment is only about $3.14, because by then the loan balance is almost paid off, so the interest for that period is very low. The rest of the final payment goes toward paying off the remaining principal.\n\nFinal formatted answer: @@@3.14@@@\n",
    "actual_answer": 3.14
  },
  {
    "question": "What's the incremental interest rate (cost of borrowing) on an additional $20,000 if I go from a $300,000 loan at 2.99% to a $320,000 loan at 3.51%, both for 30 years? Can you solve for the interest rate that would give the same payment difference on just the $20,000?",
    "expected_answer": 10.0,
    "ai_response": "Great question! To solve for the incremental interest rate (or effective cost of borrowing) on the extra $20,000, we need to:\n\n1. Calculate the monthly payments for both loans:\n   - First loan: $300,000 at 2.99% for 30 years\n   - Second loan: $320,000 at 3.51% for 30 years\n\n2. Find the difference in the monthly payments\u2014this is the extra amount you pay per month for borrowing an additional $20,000.\n\n3. Find the interest rate which, if applied to a $20,000 loan over 30 years, results in the same monthly payment as the difference above.\n\nLet's calculate step by step:\n\n### Step 1: Calculate the monthly payments\n\nThe formula for a fixed-rate mortgage monthly payment is:\n\n\\[\nM = P \\frac{r(1+r)^n}{(1+r)^n-1}\n\\]\n\nWhere:\n- \\( M \\) = monthly payment\n- \\( P \\) = loan amount\n- \\( r \\) = monthly interest rate (annual rate / 12)\n- \\( n \\) = total number of payments (years \\(\\times\\) 12)\n\n#### Calculate for both scenarios\n\nLet's use Python to make sure we get the math right:\n# Given data\r\nP1 = 300000  # first loan amount\r\nr1 = 2.99 / 100 / 12  # first loan monthly interest rate\r\nP2 = 320000  # second loan amount\r\nr2 = 3.51 / 100 / 12  # second loan monthly interest rate\r\nn = 30 * 12  # number of months (30 years)\r\n\r\n# Mortgage payment formula\r\ndef monthly_payment(P, r, n):\r\n    return P * (r * (1 + r) ** n) / ((1 + r) ** n - 1)\r\n\r\nM1 = monthly_payment(P1, r1, n)\r\nM2 = monthly_payment(P2, r2, n)\r\nmonthly_difference = M2 - M1\r\n\r\n# Now, find incremental interest rate for $20,000 to match monthly_difference\r\nfrom scipy.optimize import fsolve\r\n\r\ndef payment_diff_rate(r_guess):\r\n    r = r_guess / 100 / 12\r\n    return monthly_payment(20000, r, n) - monthly_difference\r\n\r\n# fsolve expects a function to be zero\r\nincremental_rate = fsolve(payment_diff_rate, 5)[0]  # start guessing at 5%\r\n\r\nM1, M2, monthly_difference, incremental_rate * 100\r\n\nHere's the breakdown:\n\n- Monthly payment for a $300,000 loan at 2.99%: about $1263.19\n- Monthly payment for a $320,000 loan at 3.51%: about $1438.73\n- The difference (extra monthly payment for the $20,000): about $175.54\n\nTo get the same monthly payment of $175.54 on just a $20,000 loan over 30 years, the interest rate would have to be about 10% (technically, 10.00%).\n\nSo, the incremental interest rate on the extra $20,000 is @@@10@@@. \n\nThis happens because the higher loan amount shifts your entire balance into a higher interest rate bracket, making the incremental cost of the extra borrowing much higher than the quoted rates.\n",
    "actual_answer": 10.0
  },
  {
    "question": "I am comparing two ways to borrow the same total amount over 30 years with monthly payments: Option A: Two separate loans: one for $300,000 at 2.99%, and another for $150,000 at 6.75%. Option B: One big loan for $450,000 at 4.22%. Which one ends up costing less in the long run (Option A minus Option B)",
    "expected_answer": 10893.04,
    "ai_response": "Let's break down the problem:\n\n- Both options repay $450,000 over 30 years (360 months).\n- Option A: Two loans\n  - $300,000 at 2.99% (30 years)\n  - $150,000 at 6.75% (30 years)\n- Option B: One loan\n  - $450,000 at 4.22% (30 years)\n\nWe'll calculate the total cost over 30 years for both options, then subtract the total cost of Option B from Option A (A - B).\n\n### Step 1: Calculate monthly payments and total paid\n\nThe formula for a fixed-rate loan's monthly payment:\n\\[\nM = P \\frac{r(1+r)^n}{(1+r)^n-1}\n\\]\nWhere:\n- \\(M\\) = monthly payment\n- \\(P\\) = principal\n- \\(r\\) = monthly interest rate (annual rate / 12)\n- \\(n\\) = total number of payments (months)\n\nLet me calculate the values:\n# Given data\nloan_A1 = 300000  # Amount for first loan in Option A\nrate_A1 = 2.99 / 100 / 12  # Monthly interest rate for first loan\nloan_A2 = 150000  # Amount for second loan in Option A\nrate_A2 = 6.75 / 100 / 12  # Monthly interest rate for second loan\n\nloan_B = 450000  # Amount for Option B\nrate_B = 4.22 / 100 / 12  # Monthly interest rate for Option B\n\nn = 30 * 12  # Total number of months\n\ndef monthly_payment(P, r, n):\n    return P * r * (1 + r) ** n / ((1 + r) ** n - 1)\n\n# Calculate monthly payments\nmonthly_A1 = monthly_payment(loan_A1, rate_A1, n)\nmonthly_A2 = monthly_payment(loan_A2, rate_A2, n)\nmonthly_B = monthly_payment(loan_B, rate_B, n)\n\n# Total cost over the life of the loans\ntotal_A = (monthly_A1 + monthly_A2) * n\ntotal_B = monthly_B * n\n\n# Difference (Option A - Option B)\ndifference = total_A - total_B\n\nmonthly_A1, monthly_A2, monthly_B, total_A, total_B, difference\nLet's break down the calculations:\n\n- For Option A:\n  - $300,000 at 2.99% has a monthly payment of about $1263.19\n  - $150,000 at 6.75% has a monthly payment of about $972.90\n  - Total monthly payment for Option A: $2236.09\n  - Total amount paid over 30 years for Option A: about $804,993.07\n\n- For Option B:\n  - $450,000 at 4.22% has a monthly payment of about $2205.83\n  - Total amount paid over 30 years for Option B: about $794,100.02\n\nSo, Option A ends up costing $10,893.04 more over the life of the loans compared to Option B.\n\nFinal answer: @@@10893.043521228014@@@\n\nThis means Option B is cheaper in the long run by about 10,893 (rounded).\n",
    "actual_answer": 10893.043521228014
  },
  {
    "question": "I took out a mortgage for $300,000, 5 years ago. It\u2019s a 30-year loan with a 3.51% interest rate. Today, I could get a new 30-year mortgage at 2.99% interest, but I\u2019d have to pay a penalty of 2% of what I still owe, plus another $3,000 in fees. (Fees and penalties are paid out of pocket.) If I weigh all future payments and costs as if they happened today, how much would I save over the term of the loan if I refinance (output loss as a negative number)?",
    "expected_answer": 7224.15,
    "ai_response": "Let's break down the calculation step by step:\n\n### 1. **Calculate remaining balance after 5 years on original loan**\n- Principal: 300000\n- Rate: 3.51% annually (monthly rate = 0.0351 / 12)\n- Term: 30 years (360 months)\n- Payments already made: 5 years (60 months)\n- Payments left: 25 years (300 months)\n\n#### Step 1a: Find the original monthly payment\n\nLet\u2019s calculate the monthly payment \\( M \\):\n\n\\[ M = P \\frac{r(1+r)^n}{(1+r)^n - 1} \\]\nwhere:\n- \\( P = 300000 \\)\n- \\( r = 0.0351 / 12 \\)\n- \\( n = 360 \\)\n\n#### Step 1b: Find remaining balance after 60 payments\n\nThe formula for remaining balance:\n\n\\[ B = P \\frac{(1+r)^n - (1+r)^p}{(1+r)^n - 1} \\]\nwhere:\n- \\( p = 60 \\) months (payments made)\n\n### 2. **If refinancing:**\n- New principal = remaining balance\n- New rate: 2.99% (monthly rate = 0.0299 / 12)\n- New term: 30 years (360 months)\n- Calculate the new monthly payment.\n- Add total out-of-pocket costs: 2% of remaining balance + $3,000.\n\n### 3. **Calculate the present value of the remaining payments for each scenario**\nAssume \"as if they happened today\u201d means comparing the present value (discounted at the current loan\u2019s rate, 3.51%) of:\n- Remaining payments on the current loan, vs.\n- Costs and payments on the new loan + fees and penalty\n\nLet\u2019s calculate these step by step.\n\n---\n\nLet\u2019s do the calculations in Python to avoid mistakes.\n\n```python\nimport numpy as np\n\n# Variables\nP = 300000               # Original principal\nr_old = 0.0351 / 12      # Old monthly rate\nn_total = 360            # Total payments\nn_made = 60              # Payments made\nn_left = n_total - n_made\nr_new = 0.0299 / 12      # New monthly rate\n\n# Step 1: Monthly payment on original loan\nM_old = P * (r_old * (1 + r_old) ** n_total) / ((1 + r_old) ** n_total - 1)\n\n# Step 2: Remaining balance after 60 payments\nB_left = P * ((1 + r_old) ** n_total - (1 + r_old) ** n_made) / ((1 + r_old) ** n_total - 1)\n\n# Step 3: Penalty\npenalty = 0.02 * B_left + 3000\n\n# Step 4: Remaining payment plan\n# Present value of remaining 300 payments on original loan (discount back at 3.51%)\nPV_old = np.npv(r_old, [-M_old]*n_left)\n\n# Step 5: Refinancing\n# New monthly payment\nM_new = B_left * (r_new * (1 + r_new) ** n_total) / ((1 + r_new) ** n_total - 1)\n# Present value of 360 new payments at old rate (since we want all values in today\u2019s terms, discount by old rate)\nPV_new = np.npv(r_old, [-M_new]*n_total)\n# Add penalty and fees (paid today, so not discounted)\nPV_new_total = PV_new - penalty\n\n# Step 6: Savings\nsavings = PV_old - PV_new_total\n\nM_old, B_left, penalty, M_new, PV_old, PV_new, PV_new_total, savings\n```\n\nLet's run these calculations.\nimport numpy as np\r\n\r\n# Variables\r\nP = 300000               # Original principal\r\nr_old = 0.0351 / 12      # Old monthly rate\r\nn_total = 360            # Total payments (30 years)\r\nn_made = 60              # Payments made (5 years)\r\nn_left = n_total - n_made\r\nr_new = 0.0299 / 12      # New monthly rate\r\n\r\n# Step 1: Monthly payment on original loan\r\nM_old = P * (r_old * (1 + r_old) ** n_total) / ((1 + r_old) ** n_total - 1)\r\n\r\n# Step 2: Remaining balance after 60 payments\r\nB_left = P * ((1 + r_old) ** n_total - (1 + r_old) ** n_made) / ((1 + r_old) ** n_total - 1)\r\n\r\n# Step 3: Penalty and fees\r\npenalty = 0.02 * B_left + 3000\r\n\r\n# Step 4: Present value of remaining payments on original loan\r\n# All discounted at the old rate\r\nPV_old = np.npv(r_old, [-M_old] * n_left)\r\n\r\n# Step 5: Refinancing\r\n# New monthly payment with new rate and starting fresh\r\nM_new = B_left * (r_new * (1 + r_new) ** n_total) / ((1 + r_new) ** n_total - 1)\r\nPV_new = np.npv(r_old, [-M_new] * n_total)\r\nPV_new_total = PV_new - penalty  # Subtract penalty (since it's a cash outflow now)\r\n\r\n# Step 6: Savings (Positive = save money, Negative = loss)\r\nsavings = PV_old - PV_new_total\r\n\r\nM_old, B_left, penalty, M_new, PV_old, PV_new, PV_new_total, savings\nIt looks like the `np.npv` function is no longer available in standard NumPy, so I need to use `numpy_financial` instead. Let me update the calculation using the correct package.\n\nWe will:\n\n- Use `numpy_financial.npv` for discounting the payments.\n- Make sure to use the negative sign for monthly payments (as they are outflows).\n\nI'll redo the calculation with the correct library.\nimport numpy_financial as npf\r\n\r\n# Present value of remaining payments on original loan (discounted at old rate)\r\nPV_old = npf.npv(r_old, [-M_old] * n_left)\r\n\r\n# Present value of new payments (discounted at the old rate for apples-to-apples comparison)\r\nPV_new = npf.npv(r_old, [-M_new] * n_total)\r\nPV_new_total = PV_new - penalty  # subtract total out-of-pocket penalty and fees\r\n\r\n# Savings: Positive if you save, negative if you lose money\r\nsavings = PV_old - PV_new_total\r\n\r\nM_old, B_left, penalty, M_new, PV_old, PV_new, PV_new_total, savings\nIt seems there was an issue because the earlier session was interrupted. I will rerun all calculations in a single block to ensure all variables are properly defined and carry through the process. Let's do that now.\nimport numpy_financial as npf\r\n\r\n# Re-run all variables and calculations in one place\r\nP = 300000               # Original principal\r\nr_old = 0.0351 / 12      # Old monthly rate\r\nn_total = 360            # Total payments (30 years)\r\nn_made = 60              # Payments made (5 years)\r\nn_left = n_total - n_made\r\nr_new = 0.0299 / 12      # New monthly rate\r\n\r\n# Step 1: Monthly payment on original loan\r\nM_old = P * (r_old * (1 + r_old) ** n_total) / ((1 + r_old) ** n_total - 1)\r\n\r\n# Step 2: Remaining balance after 60 payments\r\nB_left = P * ((1 + r_old) ** n_total - (1 + r_old) ** n_made) / ((1 + r_old) ** n_total - 1)\r\n\r\n# Step 3: Penalty and fees\r\npenalty = 0.02 * B_left + 3000\r\n\r\n# Step 4: Present value of remaining payments on original loan\r\nPV_old = npf.npv(r_old, [-M_old] * n_left)\r\n\r\n# Step 5: Refinancing\r\nM_new = B_left * (r_new * (1 + r_new) ** n_total) / ((1 + r_new) ** n_total - 1)\r\nPV_new = npf.npv(r_old, [-M_new] * n_total)\r\nPV_new_total = PV_new - penalty\r\n\r\n# Step 6: Savings\r\nsavings = PV_old - PV_new_total\r\n\r\nM_old, B_left, penalty, M_new, PV_old, PV_new, PV_new_total, savings\nHere is how I calculated the answer:\n\n- Your original monthly payment is about $1348.81.\n- After 5 years, you still owe about $269137.43.\n- The penalty for refinancing would be about $8382.75\u2014including the $3000 in extra fees.\n- If you refinance, your new payment would drop to $1133.24 a month, and you\u2019d reset to a new 30-year term.\n- I discounted all the remaining payments on your old and the new loan back to today\u2019s dollars, using your current loan\u2019s interest rate.\n\nAfter factoring in the costs and the present value (today\u2019s dollars) of all future payments, you would actually lose money in this scenario. The total loss is:\n\n@@@-8750.494888271962@@@\n",
    "actual_answer": -8750.494888271962
  },
  {
    "question": "If I borrow $250,000 at an annual interest rate of 3.25% for 20 years, and I make monthly payments that fully pay off the loan by the end, how much will I have to pay each month?",
    "expected_answer": 1417.99,
    "ai_response": "To calculate the monthly mortgage payment for a fixed-rate loan, we use the formula for an amortizing loan:\n\n\\[\nM = \\frac{P \\cdot r \\cdot (1 + r)^n}{(1 + r)^n - 1}\n\\]\n\nWhere:\n- \\( M \\) = monthly payment\n- \\( P \\) = loan principal ($250,000)\n- \\( r \\) = monthly interest rate (annual rate divided by 12, so 0.0325/12)\n- \\( n \\) = total number of monthly payments (20 years \u00d7 12 = 240)\n\nLet me do the calculation:\n\n- \\( P = 250,000 \\)\n- \\( r = \\frac{0.0325}{12} \\approx 0.002708 \\)\n- \\( n = 20 \\times 12 = 240 \\)\n\nLet's calculate step by step using Python for accuracy.\n# Given values\r\nP = 250000  # Principal\r\nannual_rate = 0.0325\r\nr = annual_rate / 12  # Monthly interest rate\r\nn = 20 * 12  # Number of monthly payments\r\n\r\n# Monthly payment calculation using the amortizing loan formula\r\nM = P * r * (1 + r) ** n / ((1 + r) ** n - 1)\r\nround(M, 2)  # rounding to 2 decimal places (as is typical for payments)\nThe monthly payment you would have to make in order to fully pay off a $250,000 loan at a 3.25% annual interest rate over 20 years is @@@1417.99@@@. \n\nHere's how I got this:  \n- The principal ($250,000)\n- A 3.25% annual interest, so 0.0325 \u00f7 12 \u2248 0.002708 per month\n- 240 total payments (20 years \u00d7 12 months)\n\nPlugging those into the standard loan payment formula, I calculated your monthly payment to be $1,417.99.\n",
    "actual_answer": 1417.99
  },
  {
    "question": "If I get a loan for $250,000 at 3.25% interest for 20 years, with monthly payments that fully pay it off, how much will I still owe after 3 years?",
    "expected_answer": 222023.53,
    "ai_response": "Let's break down the problem:\n- Amount borrowed (principal): $250,000\n- Interest rate: 3.25% per year\n- Term: 20 years\n- Payments: monthly, fully amortizing (pays off the loan in full by the end of 20 years)\n- We want to know the remaining balance after 3 years (36 payments).\n\n**Step 1: Calculate the monthly payment**\n\nThe formula for the monthly payment on an amortizing loan is:\n\\[ P = \\frac{rPV}{1 - (1 + r)^{-n}} \\]\nWhere:\n- \\(P\\) is the payment\n- \\(PV\\) is the present value (loan amount)\n- \\(r\\) is the monthly interest rate (annual rate/12)\n- \\(n\\) is the total number of payments\n\n**Step 2: Find the remaining balance after 36 payments**\nWe use the amortization formula for remaining balance after \\(k\\) payments:\n\\[ B_k = PV \\times \\left(\\frac{(1+r)^n - (1+r)^k}{(1+r)^n - 1}\\right) \\]\nWhere \\(k\\) is the number of payments made (36).\n\nLet's do the calculations in Python for accuracy.\n# Loan variables\r\nPV = 250000\r\nannual_rate = 0.0325\r\nmonthly_rate = annual_rate / 12\r\nyears = 20\r\nn = years * 12\r\nk = 3 * 12  # 3 years = 36 payments\r\n\r\n# Monthly payment calculation\r\nmonthly_payment = (monthly_rate * PV) / (1 - (1 + monthly_rate) ** -n)\r\n\r\n# Remaining balance after 36 payments\r\nremaining_balance = PV * ((1 + monthly_rate) ** n - (1 + monthly_rate) ** k) / ((1 + monthly_rate) ** n - 1)\r\nround(remaining_balance, 2)\nThe remaining balance on the loan after 3 years (36 payments) would be @@@222023.53@@@.\n\nHere's how this was calculated:\n- The loan is paid in 240 monthly payments.\n- The monthly interest rate is 0.0325/12.\n- The formula for the remaining balance considers the payments that have been made and how much interest is still to be paid on the remaining principal.\n- After plugging in the numbers, the balance is about $222,023.53.\n",
    "actual_answer": 222023.53
  },
  {
    "question": "For a loan of $250,000 with 3.25% interest over 20 years, with monthly payments that pay off the loan completely, how much of the 24th payment goes toward interest?",
    "expected_answer": 629.53,
    "ai_response": "Let's break it down step by step:\n\n- Principal = 250,000\n- Annual interest rate = 3.25%\n- Loan term = 20 years (so 240 payments)\n- We want the interest portion of the 24th payment.\n\n1. Monthly interest rate = 3.25% / 12 = 0.270833...%\n2. Calculate the regular monthly payment using the formula:\n   \\[\n   M = P \\frac{r(1+r)^n}{(1+r)^n - 1}\n   \\]\n   where:\n   - \\(P = 250,000\\)\n   - \\(r = 0.0325 / 12\\)\n   - \\(n = 240\\)\n\n3. To find the interest portion of the 24th payment, first find the remaining principal after 23 payments, then:\n   \\[\n   \\text{Interest for payment 24} = \\text{Remaining principal} \\times r\n   \\]\n   \nLet's do the calculations step by step in Python:\n# Given values\r\nP = 250000\r\nannual_rate = 0.0325\r\nmonthly_rate = annual_rate / 12\r\nn_payments = 240\r\nn_made = 23  # 23 payments have been made, 24th is next\r\n\r\n# Monthly payment calculation\r\nM = P * (monthly_rate * (1 + monthly_rate)**n_payments) / ((1 + monthly_rate)**n_payments - 1)\r\n\r\n# Remaining principal after 23 payments\r\nremaining_principal = P * ((1 + monthly_rate)**n_payments - (1 + monthly_rate)**n_made) / ((1 + monthly_rate)**n_payments - 1)\r\n\r\n# Interest portion of the 24th payment\r\ninterest_24 = remaining_principal * monthly_rate\r\n\r\n# Round for currency values\r\nround(interest_24, 2)\nThe amount of the 24th payment that goes toward interest is @@@629.53@@@.\n\nHere's how I got the answer:\n- First, I calculated the monthly payment you make on the mortgage, using the loan formula for a fixed-rate mortgage.\n- Then, I determined how much principal remains after you have made 23 payments.\n- The interest portion of the 24th payment is the remaining principal times the monthly interest rate.\n\nSo, for the 24th payment, $629.53 goes toward interest.\n",
    "actual_answer": 629.53
  },
  {
    "question": "What's the incremental interest rate (cost of borrowing) on an additional $20,000 if I go from a $250,000 loan at 3.25% to a $270,000 loan at 3.75%, both for 20 years? Can you solve for the interest rate that would give the same payment difference on just the $20,000?",
    "expected_answer": 9.22,
    "ai_response": "Great question! Here\u2019s how we solve it step by step:\n\n1. **Find the monthly payment for each loan amount:**\n    - $250,000 at 3.25% for 20 years\n    - $270,000 at 3.75% for 20 years\n\n2. **Calculate the payment difference:** \n    - Subtract the smaller payment from the larger one.\n\n3. **Find the interest rate on $20,000 (for 20 years) that would produce the same payment difference:**\n    - Treat this like solving for the interest rate in a loan with a principal of $20,000, term of 20 years, and monthly payment equal to the difference from step 2.\n\nLet\u2019s do the math using the annuity formula for monthly mortgage payments:\n\n\\[\nP = \\frac{r \\cdot PV}{1 - (1 + r)^{-n}}\n\\]\nWhere:\n- \\( P \\) = monthly payment\n- \\( PV \\) = loan amount (present value)\n- \\( r \\) = monthly interest rate (annual rate / 12)\n- \\( n \\) = number of months\n\n### Step 1: Find Monthly Payments\n\n**Loan 1: $250,000 at 3.25%**\n\n- Annual rate = 3.25% \u2192 monthly rate = 0.0325 / 12\n- Term = 20 years = 240 months\n\nCalculation:\n\\[\nr_1 = 0.0325 / 12\n\\]\n\\[\nP_1 = \\frac{r_1 \\times 250000}{1 - (1 + r_1)^{-240}}\n\\]\n\n**Loan 2: $270,000 at 3.75%**\n- Annual rate = 3.75% \u2192 monthly rate = 0.0375 / 12\n\n\\[\nr_2 = 0.0375 / 12\n\\]\n\\[\nP_2 = \\frac{r_2 \\times 270000}{1 - (1 + r_2)^{-240}}\n\\]\n\n### Step 2: Payment Difference\n\n\\[\n\\Delta P = P_2 - P_1\n\\]\n\n### Step 3: Solve for Interest Rate Producing Payment \\(\\Delta P\\) on $20,000\n\nWe need to solve for \\( r \\) in:\n\n\\[\n\\Delta P = \\frac{r \\times 20000}{1 - (1 + r)^{-240}}\n\\]\n\nLet\u2019s calculate these using Python for accuracy.\nimport numpy as np\r\nfrom scipy.optimize import fsolve\r\n\r\n# Loan 1 variables\r\npv1 = 250000\r\nrate1_annual = 0.0325\r\nn = 240  # 20 years * 12 months\r\nr1 = rate1_annual / 12\r\n\r\n# Loan 2 variables\r\npv2 = 270000\r\nrate2_annual = 0.0375\r\nr2 = rate2_annual / 12\r\n\r\n# Monthly mortgage payment formula\r\ndef monthly_payment(pv, r, n):\r\n    return (r * pv) / (1 - (1 + r) ** -n)\r\n\r\n# Calculate payments\r\nP1 = monthly_payment(pv1, r1, n)\r\nP2 = monthly_payment(pv2, r2, n)\r\n\r\n# Payment difference\r\ndelta_P = P2 - P1\r\n\r\n# Now, solve for the interest rate on just the extra $20,000\r\npv_extra = 20000\r\n\r\n# We want to find r such that:\r\n# delta_P = (r * pv_extra) / (1 - (1 + r) ** -n)\r\n\r\ndef func(r):\r\n    return (r * pv_extra) / (1 - (1 + r) ** -n) - delta_P\r\n\r\n# Initial guess for rate: use midpoint of the two given rates\r\nrate_guess = (rate1_annual + rate2_annual) / 2 / 12\r\n\r\n# Solve for r (monthly), then convert to annual\r\nr_extra_monthly = fsolve(func, rate_guess)[0]\r\nr_extra_annual = r_extra_monthly * 12\r\n\r\n# Return the equivalent interest rate (annual)\r\nr_extra_annual * 100  # as a percent\r\n\nHere\u2019s how I got the answer:\n\nFirst, I calculated the monthly payments for both loans:\n- $250,000 at 3.25% for 20 years\n- $270,000 at 3.75% for 20 years\n\nThe difference in monthly payment, when you borrow the extra $20,000 at the higher rate, was calculated. I then solved for the **interest rate on just $20,000** that would result in the same monthly payment difference over the same 20 years.\n\nThe result is that the incremental cost of borrowing the extra $20,000 is equivalent to a simple interest rate of @@@9.221881985900195@@@. This rate is much higher than either of the original mortgage rates, showing why it's important to pay attention to incremental borrowing costs!\n",
    "actual_answer": 9.221881985900195
  },
  {
    "question": "I am comparing two ways to borrow the same total amount over 20 years with monthly payments: Option A: Two separate loans: one for $250,000 at 3.25%, and another for $120,000 at 5.50%. Option B: One big loan for $350,000 at 3.95%. Which one ends up costing less in the long run (Option A minus Option B)",
    "expected_answer": 31615.91,
    "ai_response": "Let's break this problem into parts:\n\n**Step 1: Calculate the total payment (principal + interest) over 20 years for each loan.**\n- Each loan has monthly payments for 20 years (240 months).\n- We will use the standard mortgage formula:  \n  \\( \\text{Payment} = P \\times \\frac{r(1+r)^n}{(1+r)^n-1} \\)  \n  Where:  \n  \\( P \\) = principal,  \n  \\( r \\) = monthly interest rate (annual rate / 12),  \n  \\( n \\) = number of months.\n\n**Option A:**\n- Loan 1: $250,000 at 3.25%\n- Loan 2: $120,000 at 5.50%\n\n**Option B:**\n- Loan: $350,000 at 3.95%\n\nLet's calculate the monthly payments for each, then the total amount paid (sum of monthly payments across both loans for A, and the single loan for B), then subtract Option B from Option A for the difference.\n\nLet's do those calculations step by step.\n# Given values\nn_months = 20 * 12\n\n# Loan 1 (Option A)\nP1 = 250000\nannual_r1 = 0.0325\nr1 = annual_r1 / 12\n\n# Loan 2 (Option A)\nP2 = 120000\nannual_r2 = 0.055\nr2 = annual_r2 / 12\n\n# Option B\nP_B = 350000\nannual_rB = 0.0395\nrB = annual_rB / 12\n\ndef monthly_payment(P, r, n):\n    \"\"\"Calculate monthly payment for a loan.\"\"\"\n    return P * (r * (1 + r) ** n) / ((1 + r) ** n - 1)\n\n# Calculate monthly payments\nmp1 = monthly_payment(P1, r1, n_months)\nmp2 = monthly_payment(P2, r2, n_months)\nmpB = monthly_payment(P_B, rB, n_months)\n\n# Total paid over the course of the loan\ntotal_paid_A = (mp1 + mp2) * n_months\ntotal_paid_B = mpB * n_months\n\n# Difference (Option A minus Option B)\ndifference = total_paid_A - total_paid_B\n\nround(difference)\nLet's explain how I calculated it:\n\n- For each loan, I calculated the monthly payment using the standard mortgage formula.\n- I then multiplied the monthly payment by the number of months (240 months for 20 years) to find the total amount paid (principal + interest) for each loan.\n- I added the totals for Option A's two separate loans, and I calculated the total for Option B's single larger loan.\n- Finally, I subtracted Option B's total payment from Option A's to get the difference.\n\nOption A (two loans) costs about $31,616 more than Option B (one combined loan at 3.95%) over the life of the loans.\n\nSo, the answer is @@@31616@@@.\n",
    "actual_answer": 31616.0
  },
  {
    "question": "I took out a mortgage for $250,000, 3 years ago. It\u2019s a 20-year loan with a 3.75% interest rate. Today, I could get a new 25-year mortgage at 3.25% interest, but I\u2019d have to pay a penalty of 2% of what I still owe, plus another $2,500 in fees. (Fees and penalties are rolled into the new loan.) If I weigh all future payments and costs as if they happened today, how much would I save over the term of the loan if I refinance (output loss as a negative number)?",
    "expected_answer": 2895.76,
    "ai_response": "Let's break this problem into parts:\n\n### Step 1: Original Loan Calculation\n\n- **Original Principal:** $250,000\n- **Original Term:** 20 years (240 months)\n- **Interest Rate:** 3.75%\n- **Payments made:** 3 years (36 months)\n- **Remaining term:** 17 years (204 months)\n\n#### Calculate original monthly payment:\n\n\\[\nM = P \\frac{r(1+r)^n}{(1+r)^n-1}\n\\]\nwhere:\n- \\(P\\) = principal ($250,000)\n- \\(r\\) = monthly interest rate (3.75%/12 = 0.003125)\n- \\(n\\) = total number of payments (240)\n\nLet's calculate the original monthly payment and the remaining balance after 36 payments.\n\n#### Step 2: Calculate Remaining Balance After 3 Years\n\nWe find what's still owed after 36 months (to get the new principal for refinance & the penalty):\n\n\\[\nB = P \\frac{(1+r)^n - (1+r)^p}{(1+r)^n - 1}\n\\]\nwhere:\n- \\(B\\) = balance after \\(p\\) payments (p=36)\n- \\(P\\), \\(r\\), \\(n\\) as above\n\n#### Step 3: Refinance Option\n\n- **New term:** 25 years (300 months)\n- **New Rate:** 3.25%\n- **New Principal:** What's owed + penalties/fees\n    - Penalty: 2% of balance\n    - Fees: $2,500\n\nNext, calculate the new monthly payment and total cost over the 25 years.\n\n#### Step 4: Compare Costs\n\n- Find the present value (today's value) of all remaining payments for both scenarios (original and refinance).\n- Subtract to get savings (if positive) or loss (if negative).\n\nLet's do the calculations step by step.\n\n```python\n# Constants\nP = 250000\norig_rate = 0.0375\norig_monthly_rate = orig_rate / 12\norig_n = 240\npayments_made = 36\nremaining_n = orig_n - payments_made\n\n# Step 1: Original monthly payment\nM = P * (orig_monthly_rate * (1 + orig_monthly_rate) ** orig_n) / ((1 + orig_monthly_rate) ** orig_n - 1)\n\n# Step 2: Remaining balance after 36 months\nbalance = P * ((1 + orig_monthly_rate)**orig_n - (1 + orig_monthly_rate)**payments_made) \\\n    / ((1 + orig_monthly_rate)**orig_n - 1)\n\n# Step 3: Refinance details\nrefi_rate = 0.0325\nrefi_monthly_rate = refi_rate / 12\nrefi_n = 300\n\npenalty = 0.02 * balance\nfees = 2500\nnew_principal = balance + penalty + fees\n\n# New monthly payment\nM2 = new_principal * (refi_monthly_rate * (1 + refi_monthly_rate)**refi_n) / ((1 + refi_monthly_rate)**refi_n - 1)\n\n# Step 4: Present Value of Remaining Payments\n# Discount future cash flows at original rate for apples-to-apples comparison\n\ndef pv_of_payments(payment, rate, n):\n    return payment * (1 - (1 + rate) ** -n) / rate\n\n# Discount monthly rate is the original rate (opportunity cost)\npv_orig = pv_of_payments(M, orig_monthly_rate, remaining_n)\npv_refi = pv_of_payments(M2, orig_monthly_rate, refi_n)\n\n# Total present value cost difference (savings/loss)\ndifference = pv_orig - pv_refi\ndifference\n```\n\nLet's compute the numbers.\n# Constants\r\nP = 250000\r\norig_rate = 0.0375\r\norig_monthly_rate = orig_rate / 12\r\norig_n = 240\r\npayments_made = 36\r\nremaining_n = orig_n - payments_made\r\n\r\n# Step 1: Original monthly payment\r\nM = P * (orig_monthly_rate * (1 + orig_monthly_rate) ** orig_n) / ((1 + orig_monthly_rate) ** orig_n - 1)\r\n\r\n# Step 2: Remaining balance after 36 months\r\nbalance = P * ((1 + orig_monthly_rate)**orig_n - (1 + orig_monthly_rate)**payments_made) \\\r\n    / ((1 + orig_monthly_rate)**orig_n - 1)\r\n\r\n# Step 3: Refinance details\r\nrefi_rate = 0.0325\r\nrefi_monthly_rate = refi_rate / 12\r\nrefi_n = 300\r\n\r\npenalty = 0.02 * balance\r\nfees = 2500\r\nnew_principal = balance + penalty + fees\r\n\r\n# New monthly payment\r\nM2 = new_principal * (refi_monthly_rate * (1 + refi_monthly_rate)**refi_n) / ((1 + refi_monthly_rate)**refi_n - 1)\r\n\r\n# Step 4: Present Value of Remaining Payments\r\ndef pv_of_payments(payment, rate, n):\r\n    return payment * (1 - (1 + rate) ** -n) / rate\r\n\r\n# Using original monthly rate for discounting both scenarios\r\npv_orig = pv_of_payments(M, orig_monthly_rate, remaining_n)\r\npv_refi = pv_of_payments(M2, orig_monthly_rate, refi_n)\r\n\r\ndifference = pv_orig - pv_refi\r\nround(difference)  # rounding to nearest dollar for output\r\n\nHere's how I approached this:\n\n1. I calculated your original loan's monthly payment and the balance after 3 years.\n2. The penalty for refinancing is 2% of what you still owe plus $2,500 in fees, which would be rolled into your new 25-year mortgage at a lower rate.\n3. I computed the new monthly payment and then compared the present value of all future payments (discounted at your original rate) for both scenarios.\n4. The end result is how much you would save\u2014counting all costs, fees, and penalty\u2014by refinancing now.\n\nThe calculated savings (present value, today\u2019s dollars) over the life of the loan if you refinance is @@@5045@@@.\n",
    "actual_answer": 5045.0
  },
  {
    "question": "If I borrow $400,000 at an annual interest rate of 3.85% for 25 years, and I make monthly payments that fully pay off the loan by the end, how much will I have to pay each month?",
    "expected_answer": 2078.36,
    "ai_response": "To solve this, we need to calculate the monthly payment for a fixed-rate mortgage.\n\nThe formula for the monthly payment \\( M \\) of a loan is:\n\n\\[ M = P \\frac{r(1+r)^n}{(1+r)^n-1} \\]\n\nwhere:\n- \\( P \\) = principal (loan amount) = 400,000\n- \\( r \\) = monthly interest rate = annual rate / 12 = 0.0385 / 12\n- \\( n \\) = total number of payments = 25 years \u00d7 12 months/year = 300\n\nLet's plug in these values and calculate the monthly payment.\n# Given values\nP = 400000  # Principal\nannual_rate = 0.0385  # Annual interest rate\nr = annual_rate / 12  # Monthly interest rate\nn = 25 * 12  # Total payments (months for 25 years)\n\n# Monthly payment formula\nM = P * (r * (1 + r) ** n) / ((1 + r) ** n - 1)\nmonthly_payment = round(M, 2)\nmonthly_payment\nThe monthly payment you would need to make to fully pay off a $400,000 loan at a 3.85% annual interest rate over 25 years is @@@2078.36@@@.\n\nHere is how this was calculated:\n- The principal is 400000.\n- The monthly interest rate is 0.0385/12.\n- The number of payments is 25*12 = 300.\n- Plugging into the formula for a fixed-rate mortgage gives the result above.\n",
    "actual_answer": 2078.36
  },
  {
    "question": "If I get a loan for $400,000 at 3.85% interest for 25 years, with monthly payments that fully pay it off, how much will I still owe after 7 years?",
    "expected_answer": 323492.92,
    "ai_response": "Let's break this problem down step-by-step:\n\n1. **Loan Amount (Principal):** $400,000  \n2. **Annual Interest Rate:** 3.85%  \n3. **Loan Term:** 25 years (300 months)  \n4. **Payments:** Monthly  \n5. **Time Elapsed:** 7 years (84 months)  \n6. **Question:** How much is still owed (remaining principal) after 7 years?\n\nFirst, we'll need to calculate the monthly payment using the standard loan payment formula:\n\n\\[\nM = P \\frac{r(1 + r)^n}{(1 + r)^n - 1}\n\\]\n\nWhere:\n- \\(M\\) = Monthly payment\n- \\(P\\) = Loan principal ($400,000)\n- \\(r\\) = Monthly interest rate (annual rate / 12)\n- \\(n\\) = Total number of payments (months)\n\nNow let's plug in the values:\n- \\(P = 400,000\\)\n- \\(r = 0.0385/12\\)\n- \\(n = 300\\)\n\nAfter finding the monthly payment, we can then use the remaining balance formula for an amortizing loan:\n\n\\[\nB = P \\frac{(1 + r)^n - (1 + r)^p}{(1 + r)^n - 1}\n\\]\n\nWhere \\(p\\) is the number of payments made (here, 84 months).\n\nI\u2019ll perform the calculations now.\n# Loan details\r\nP = 400000  # Principal\r\nannual_rate = 0.0385\r\nr = annual_rate / 12  # Monthly interest rate\r\nn = 25 * 12  # Total payments (months)\r\np = 7 * 12   # Payments made (months)\r\n\r\n# Monthly payment formula\r\nM = P * (r * (1 + r)**n) / ((1 + r)**n - 1)\r\n\r\n# Remaining balance formula\r\nB = P * ((1 + r)**n - (1 + r)**p) / ((1 + r)**n - 1)\r\n\r\nB_rounded = round(B, 2)\r\nB_rounded\nAfter making monthly payments for 7 years on a $400,000 loan at 3.85% interest for 25 years, the remaining loan balance would be @@@323492.92@@@. \n\nHere's the explanation:\n- The monthly payment is calculated using the amortizing loan formula.\n- After 7 years (84 payments), we use the remaining balance formula to determine how much of the principal is still owed.\n\nSo, you would still owe about $323,492.92 after 7 years.\n",
    "actual_answer": 323492.92
  },
  {
    "question": "For a loan of $400,000 with 3.85% interest over 25 years, with monthly payments that pay off the loan completely, how much of the 60th payment goes toward interest?",
    "expected_answer": 1117.95,
    "ai_response": "Let\u2019s break down the problem:\n\n- Loan amount (principal) = $400,000\n- Interest rate = 3.85% annual (so monthly rate = 3.85% / 12)\n- Loan term = 25 years (so total number of payments = 25 * 12 = 300)\n- We\u2019re asked: How much of the 60th payment (i.e., after 5 years) goes toward interest?\n\n### Step 1: Find Monthly Interest Rate\n\nAnnual rate = 3.85%  \nMonthly interest rate = 3.85 / 12 / 100 = 0.003208333... per month\n\n### Step 2: Calculate the Monthly Payment (M)\n\nUse the formula:  \n\\(M = P \\frac{r(1 + r)^n}{(1 + r)^n - 1}\\)\n- \\(P\\) = 400,000  \n- \\(r\\) = monthly rate  \n- \\(n\\) = 300\n\nLet's calculate the monthly payment using Python for accuracy:\nP = 400000\nannual_rate = 3.85 / 100\nmonthly_rate = annual_rate / 12\nn = 25 * 12\n\n# Monthly payment formula\nM = P * (monthly_rate * (1 + monthly_rate) ** n) / ((1 + monthly_rate) ** n - 1)\nM\nThe monthly payment is about $2,078.36.\n\n### Step 3: Calculate the Remaining Loan Balance After 59 Payments\n\nTo see how much interest is in the 60th payment, we need to know what the remaining balance is after 59 payments. The interest paid in the 60th payment is the remaining balance after 59 payments multiplied by the monthly interest rate.\n\nThe remaining balance after \\( k \\) payments is:\n\\( B_k = P(1 + r)^k - M \\frac{(1 + r)^k - 1}{r} \\)\n\nLet\u2019s calculate the balance after 59 payments:\nk = 59\n\nremaining_balance = P * (1 + monthly_rate) ** k - M * (((1 + monthly_rate) ** k - 1) / monthly_rate)\nremaining_balance\nThe remaining balance after 59 payments is approximately $348,450.78.\n\n### Step 4: Calculate Interest Portion of the 60th Payment\n\nThe interest for the 60th payment is:\n\nInterest = remaining balance after 59th payment \u00d7 monthly interest rate\n\nLet\u2019s calculate that:\ninterest_60th = remaining_balance * monthly_rate\ninterest_60th\nThe amount of the 60th payment that goes toward interest is about $1,117.95.\n\nSo, the final answer is @@@1117.95@@@. \n\n- We calculated the monthly payment first.\n- Then determined the remaining balance after 59 payments.\n- Finally, applied the monthly interest rate to that balance to find the interest part of the 60th payment.\n",
    "actual_answer": 1117.95
  },
  {
    "question": "What's the incremental interest rate (cost of borrowing) on an additional $20,000 if I go from a $400,000 loan at 3.85% to a $420,000 loan at 4.10%, both for 25 years? Can you solve for the interest rate that would give the same payment difference on just the $20,000?",
    "expected_answer": 8.56,
    "ai_response": "Let's break down your question step by step:\n\n### 1. Find Monthly Payment for Both Loans\n\n#### Formula (Monthly Payment for Fixed Rate Loan):\n\n\\[\nM = P \\times \\frac{r(1+r)^n}{(1+r)^n-1}\n\\]\nWhere:\n- \\( M \\) = monthly payment\n- \\( P \\) = loan amount (principal)\n- \\( r \\) = monthly interest rate (annual rate divided by 12)\n- \\( n \\) = total number of payments (months)\n\n#### Inputs:\n- Old loan: $400,000 at 3.85% for 25 years (300 months)\n- New loan: $420,000 at 4.10% for 25 years (300 months)\n- Additional amount borrowed: $20,000\n\n### 2. Calculate each monthly payment\n\nLet's do the calculations:\n\n#### Old loan:\n- \\( P = 400000 \\)\n- \\( r = \\frac{3.85}{100}/12 \\)\n- \\( n = 300 \\)\n\n#### New loan:\n- \\( P = 420000 \\)\n- \\( r = \\frac{4.10}{100}/12 \\)\n- \\( n = 300 \\)\n\n### 3. Find the increase in monthly payment.\n\n### 4. Figure out the effective interest rate for a $20,000 loan over 25 years that results in the same monthly payment difference.\n\nLet's calculate step by step.\nimport numpy as np\n\n# Given data\nP1 = 400000  # original loan\nr1 = 3.85 / 100 / 12  # monthly rate for old loan\nn = 25 * 12  # 25 years in months\n\nP2 = 420000  # new loan\nr2 = 4.10 / 100 / 12  # monthly rate for new loan\n\n# Monthly payment calculation formula\ndef monthly_payment(P, r, n):\n    return P * (r * (1 + r) ** n) / ((1 + r) ** n - 1)\n\n# Calculate monthly payments\nM1 = monthly_payment(P1, r1, n)\nM2 = monthly_payment(P2, r2, n)\n\n# Difference in monthly payments\ndiff = M2 - M1\n\n# Now, solve for the interest rate where a $20,000 loan has the same payment as diff\n# Use: diff = 20000 * (r * (1 + r) ** n) / ((1 + r) ** n - 1)\n# We'll solve this equation for r using a numerical root-finding method\n\nfrom scipy.optimize import fsolve\n\ndef payment_equation(r):\n    # As r will be a small number, it's in monthly decimal form\n    return 20000 * (r * (1 + r) ** n) / ((1 + r) ** n - 1) - diff\n\n# Initial guess: around 0.004 (about 4.5% per year divided by 12)\ninitial_guess = 0.004\nr_incremental_monthly = fsolve(payment_equation, initial_guess)[0]\n\n# Annualize\nr_incremental_annual = r_incremental_monthly * 12 * 100\n\n{\n    \"old_payment\": M1,\n    \"new_payment\": M2,\n    \"payment_difference\": diff,\n    \"incremental_interest_rate\": r_incremental_annual  # as percent\n}\nHere are the steps and calculations:\n\n- The old monthly payment for a $400,000 loan at 3.85% for 25 years is about 2078.36.\n- The new monthly payment for a $420,000 loan at 4.10% for 25 years is about 2240.17.\n- The monthly payment difference is about 161.81.\n\nTo find out what annual interest rate on a $20,000 loan over 25 years would give a monthly payment of 161.81, I solved for the rate. The answer is about 8.56% (annualized).\n\nSo, the incremental cost of borrowing that extra $20,000\u2014using the difference in total payment\u2014boils down to an effective interest rate of @@@8.56@@@.\n",
    "actual_answer": 8.56
  },
  {
    "question": "I am comparing two ways to borrow the same total amount over 25 years with monthly payments: Option A: Two separate loans: one for $400,000 at 3.85%, and another for $180,000 at 7.25%. Option B: One big loan for $500,000 at 4.50%. Which one ends up costing less in the long run (Option A minus Option B)",
    "expected_answer": 180074.78,
    "ai_response": "Let's break it down step by step:\n\n### Step 1: Calculate the monthly payments for each loan\n\nWe use the formula for a fixed-rate mortgage payment:  \n\\[ P = \\frac{L \\cdot r \\cdot (1+r)^n}{(1+r)^n - 1} \\]\n\n- \\( L \\) = loan amount\n- \\( r \\) = monthly interest rate (annual rate divided by 12)\n- \\( n \\) = total number of payments (25 years \u00d7 12 months)\n\n### Calculations\n\n#### Option A\n\n**Loan 1:**  \n- Amount = 400,000  \n- Rate = 3.85% annual = 0.0385/12 monthly  \n- Payments = 25 * 12 = 300\n\n**Loan 2:**  \n- Amount = 180,000  \n- Rate = 7.25% annual = 0.0725/12 monthly  \n- Payments = 300\n\n#### Option B\n\n- Amount = 500,000  \n- Rate = 4.5% annual = 0.045/12 monthly  \n- Payments = 300\n\nNow calculate total payments over the life of each loan.\n\n```python\n# Inputs\nyears = 25\nmonths = years * 12\n\n# Option A\nL1 = 400000\nr1 = 0.0385 / 12\nL2 = 180000\nr2 = 0.0725 / 12\n\n# Option B\nL3 = 500000\nr3 = 0.045 / 12\n\n# Mortgage payment formula\ndef monthly_payment(loan, rate, num_payments):\n    return loan * rate * (1 + rate) ** num_payments / ((1 + rate) ** num_payments - 1)\n\n# Calculate payments\np1 = monthly_payment(L1, r1, months)\np2 = monthly_payment(L2, r2, months)\np3 = monthly_payment(L3, r3, months)\n\n# Total paid over life\ntotal_A = (p1 + p2) * months\ntotal_B = p3 * months\n\n# Difference (Option A - Option B)\ndifference = total_A - total_B\nround(difference)\n```\nLet me calculate that for you.\n# Inputs\nyears = 25\nmonths = years * 12\n\n# Option A\nL1 = 400000\nr1 = 0.0385 / 12\nL2 = 180000\nr2 = 0.0725 / 12\n\n# Option B\nL3 = 500000\nr3 = 0.045 / 12\n\n# Mortgage payment formula\ndef monthly_payment(loan, rate, num_payments):\n    return loan * rate * (1 + rate) ** num_payments / ((1 + rate) ** num_payments - 1)\n\n# Calculate payments\np1 = monthly_payment(L1, r1, months)\np2 = monthly_payment(L2, r2, months)\np3 = monthly_payment(L3, r3, months)\n\n# Total paid over life\ntotal_A = (p1 + p2) * months\ntotal_B = p3 * months\n\n# Difference (Option A - Option B)\ndifference = total_A - total_B\nround(difference)\nWhen we calculate the monthly and total payments for both approaches, Option A (taking two separate loans) will cost you @@@180075@@@ more over the life of the loans compared to Option B (taking a single loan at 4.5%). This is because the higher interest rate on the $180,000 loan in Option A outweighs the benefit of the slightly lower rate on the $400,000 loan, compared to the single 4.5% loan on the full amount in Option B.\n",
    "actual_answer": 180075.0
  },
  {
    "question": "I took out a mortgage for $400,000, 7 years ago. It\u2019s a 25-year loan with a 4.10% interest rate. Today, I could get a new 30-year mortgage at 3.85% interest, but I\u2019d have to pay a penalty of 2% of what I still owe, plus another $3,500 in fees. (Fees and penalties are paid out of pocket.) If I weigh all future payments and costs as if they happened today, how much would I save over the term of the loan if I refinance (output loss as a negative number)?",
    "expected_answer": -2659.73,
    "ai_response": "Let's break down the analysis:\n\n### Step 1: Current Mortgage Summary\n\n- Original balance: $400,000  \n- Term: 25 years (300 months)  \n- Interest rate: 4.10%  \n- Already paid: 7 years (84 months)  \n- Remaining term: 18 years (216 months)  \n\n#### 1. Monthly Payment (Current Mortgage)\nThe mortgage payment formula is:\n\\[\nM = P\\frac{r(1+r)^n}{(1+r)^n-1}\n\\]\nWhere:\n- \\(P = 400000\\)\n- \\(r = 0.041/12\\) (monthly rate)\n- \\(n = 300\\)  \n\n#### 2. Remaining balance after 84 payments (current mortgage)\nThe formula for remaining balance after \\(k\\) payments:\n\\[\nB = P \\frac{(1+r)^n - (1+r)^k}{(1+r)^n-1}\n\\]\nWhere \\(k = 84\\).\n\n---\n\n### Step 2: Refinancing Offer\n\n- New rate: 3.85% (0.0385/12 monthly)\n- New term: 30 years (360 months)\n- New principal: remaining balance (from current mortgage)\n- Out-of-pocket fees: $3,500 + 2% of outstanding balance\n\n---\n\n### Step 3: Calculate Total Cost (Present Value) For Each Option\n\n- Discount rate: Since not specified, use **new mortgage rate** (3.85%) to discount all future cash flows.\n- Compare:  \n  - Present value of the remaining payments (current mortgage)  \n  - Present value of new payments (refi) + penalty + fees\n\n---\n\nLet's do the calculations step by step below:\n\n```python\nimport numpy as np\n\n# --- Input Variables\norig_principal = 400000\norig_rate = 0.041\norig_term_months = 300\n\nmonths_paid = 84\nmonths_left_orig = orig_term_months - months_paid\n\nrefi_rate = 0.0385\nrefi_term_months = 360\n\npenalty_percent = 0.02\nfees = 3500\n\ndiscount_rate = refi_rate / 12  # Use refi rate as discount rate per month\n\n# --- Step 1: Original Loan Calculations\nr = orig_rate / 12\nn = orig_term_months\n\n# Monthly payment\nmonthly_pay = orig_principal * (r * (1 + r) ** n) / ((1 + r) ** n - 1)\n\n# Remaining balance after 84 months\nk = months_paid\nremaining_bal = orig_principal * ((1 + r)**n - (1 + r)**k) / ((1 + r)**n - 1)\n\n# --- Step 2: New Mortgage\n# New monthly payment\nnew_r = refi_rate / 12\nnew_n = refi_term_months\nnew_monthly_pay = remaining_bal * (new_r * (1 + new_r) ** new_n) / ((1 + new_r) ** new_n - 1)\n\n# Penalty for breaking old mortgage\npenalty = penalty_percent * remaining_bal\ntotal_fees = penalty + fees\n\n# --- Step 3: Present Value Calculations\n# Present value of remaining payments on old mortgage\npv_old = np.pv(discount_rate, months_left_orig, -monthly_pay, 0)\n\n# Present value of new payments on new mortgage + fees\npv_new = np.pv(discount_rate, new_n, -new_monthly_pay, 0)\npv_total_new = pv_new + total_fees\n\n# --- Step 4: Net Savings (negative if you lose money)\nnet_savings = pv_old - pv_total_new\n\nround(net_savings)\n```\n\nLet's compute this!\nimport numpy as np\n\n# Input Variables\norig_principal = 400000\norig_rate = 0.041\norig_term_months = 300\n\nmonths_paid = 84\nmonths_left_orig = orig_term_months - months_paid\n\nrefi_rate = 0.0385\nrefi_term_months = 360\n\npenalty_percent = 0.02\nfees = 3500\n\ndiscount_rate = refi_rate / 12  # Use refi rate as discount rate per month\n\n# Step 1: Original Loan Calculations\nr = orig_rate / 12\nn = orig_term_months\n\n# Monthly payment\nmonthly_pay = orig_principal * (r * (1 + r) ** n) / ((1 + r) ** n - 1)\n\n# Remaining balance after 84 months\nk = months_paid\nremaining_bal = orig_principal * ((1 + r)**n - (1 + r)**k) / ((1 + r)**n - 1)\n\n# Step 2: New Mortgage\n# New monthly payment\nnew_r = refi_rate / 12\nnew_n = refi_term_months\nnew_monthly_pay = remaining_bal * (new_r * (1 + new_r) ** new_n) / ((1 + new_r) ** new_n - 1)\n\n# Penalty for breaking old mortgage\npenalty = penalty_percent * remaining_bal\ntotal_fees = penalty + fees\n\n# Step 3: Present Value Calculations\n# Present value of remaining payments on old mortgage\npv_old = np.pv(discount_rate, months_left_orig, -monthly_pay, 0)\n\n# Present value of new payments on new mortgage + fees\npv_new = np.pv(discount_rate, new_n, -new_monthly_pay, 0)\npv_total_new = pv_new + total_fees\n\n# Step 4: Net Savings (negative if you lose money)\nnet_savings = pv_old - pv_total_new\n\nround(net_savings)\nimport numpy_financial as npf\r\n\r\n# Step 3: Present Value Calculations (use numpy_financial)\r\n# Present value of remaining payments on old mortgage\r\npv_old = npf.pv(discount_rate, months_left_orig, -monthly_pay, 0)\r\n\r\n# Present value of new payments on new mortgage + fees\r\npv_new = npf.pv(discount_rate, new_n, -new_monthly_pay, 0)\r\npv_total_new = pv_new + total_fees\r\n\r\n# Step 4: Net Savings (negative if you lose money)\r\nnet_savings = pv_old - pv_total_new\r\n\r\nround(net_savings)\nLet's break down what we found:\n\n1. The present value of all future payments remaining on your current mortgage.\n2. The present value of all payments on a new refinance, including the penalty and fees you'd pay upfront.\n3. The difference between them shows how much you'd save (or lose) when weighing everything in today's dollars.\n\nAfter doing the calculations, you would actually lose money by refinancing under these terms, mostly because of the penalty and restart of a longer loan. Specifically, you would lose @@@-3474@@@.\n",
    "actual_answer": -3474.0
  },
  {
    "question": "If I borrow $300,000 at an annual interest rate of 2.99% for 30 years, and I make monthly payments that fully pay off the loan by the end, how much will I have to pay each month?",
    "expected_answer": 1263.19,
    "ai_response": "Let's break down the calculation:\n\nYou have:\n- Principal (loan amount): $300,000\n- Annual interest rate: 2.99%\n- Loan term: 30 years\n\nThe formula for the monthly mortgage payment (for a fixed-rate loan) is:\n\n\\[\nM = P \\frac{r(1+r)^n}{(1+r)^n-1}\n\\]\n\nwhere:\n- \\( M \\) = monthly payment\n- \\( P \\) = loan principal\n- \\( r \\) = monthly interest rate (annual rate divided by 12)\n- \\( n \\) = number of monthly payments (years x 12)\n\nPlugging in:\n- \\( P = 300,000 \\)\n- \\( r = 0.0299 / 12 \\)\n- \\( n = 30 \\times 12 = 360 \\)\n\nLet's calculate step by step using Python.\n# Assign values\nP = 300000\nannual_rate = 2.99 / 100\nr = annual_rate / 12\nn = 30 * 12\n\n# Mortgage payment formula\nM = P * (r * (1 + r) ** n) / ((1 + r) ** n - 1)\nround(M, 2)\nSo, your monthly payment would be @@@1263.19@@@. \n\nTo explain, I used the standard fixed-rate mortgage payment formula, plugging in:\n- Principal \\( P \\): 300000\n- Monthly interest rate \\( r \\): 0.0299 / 12 \u2248 0.0024917\n- Number of monthly payments \\( n \\): 360 (30 years x 12 months)\n\nThis gave a monthly payment of approximately 1263.19 to fully repay the loan in 30 years.\n",
    "actual_answer": 1263.19
  },
  {
    "question": "If I get a loan for $300,000 at 2.99% interest for 30 years, with monthly payments that fully pay it off, how much will I still owe after 5 years?",
    "expected_answer": 266670.41,
    "ai_response": "Let's break down the calculation:\n\nYou took out a $300,000 loan at 2.99% annual interest for 30 years. \nYou make fixed monthly payments so that the mortgage is fully paid off at the end of 30 years.\n\nThe steps are:\n1. Calculate the monthly payment.\n2. Calculate the remaining balance after 60 payments (5 years x 12 months).\n\n### Step 1: Calculate Monthly Payment\n\nThe monthly payment for a fully amortizing loan is calculated as:\n\nP = principal ($300,000)  \nr = monthly interest rate = 2.99%/12 months  \nn = total number of payments = 30 years x 12 = 360 months\n\nMonthly rate = 0.0299 / 12\n\nMonthly payment formula:\nPMT = P * ( r * (1+r)^n ) / ( (1+r)^n - 1 )\n\nLet's calculate this using Python for accuracy.\n# loan parameters\r\nP = 300000  # principal\r\nannual_rate = 2.99 / 100\r\nr = annual_rate / 12  # monthly rate\r\nn = 30 * 12  # total number of monthly payments\r\nmonthly_payments_made = 5 * 12  # 5 years\r\n\r\n# Monthly payment calculation\r\nPMT = P * (r * (1 + r)**n) / ((1 + r)**n - 1)\r\n\r\n# Remaining balance after 5 years (after k payments)\r\nk = monthly_payments_made\r\nremaining_balance = P * ((1 + r)**n - (1 + r)**k) / ((1 + r)**n - 1)\r\n\r\nround(remaining_balance, 2)  # round for answer display purposes\r\n\nAfter 5 years of making monthly payments on a $300,000 loan at 2.99% interest for 30 years, you will still owe @@@266670.41@@@.\n\nHow I got this:  \n1. Calculated the monthly payment using the loan terms.  \n2. Used the amortization formula to find the remaining balance after 60 payments.  \n3. The remaining balance is about $266,670.41.\n",
    "actual_answer": 266670.41
  },
  {
    "question": "For a loan of $300,000 with 2.99% interest over 30 years, with monthly payments that pay off the loan completely, how much of the 30th payment goes toward interest?",
    "expected_answer": 708.91,
    "ai_response": "To answer this question, let's break it down step by step:\n\n1. **Monthly Payment Calculation**:  \n   For a fixed-rate mortgage, the monthly payment is calculated as:\n   \\[\n   M = P \\frac{r(1+r)^n}{(1+r)^n - 1}\n   \\]\n   Where:\n   - \\(P\\) = principal (loan amount) = 300000\n   - \\(r\\) = monthly interest rate = 2.99% per year / 12 months = 0.0299/12\n   - \\(n\\) = number of payments = 30 years \u00d7 12 months = 360\n\n2. **Find the remaining balance after 359 payments** (since the 360th payment, or the 30th year's 12th payment, will have a remaining balance close to zero after the payment).\n\n3. **Calculate the interest part of the last (360th) payment**:  \n   The interest portion is simply the interest rate times the remaining balance before the payment:\n   \\[\n   \\text{Interest}_{360} = \\text{Remaining principal after 359 payments} \\times r\n   \\]\n\nLet me compute this using Python:\n# Constants\nP = 300000  # Principal\nannual_interest_rate = 0.0299\nmonthly_interest_rate = annual_interest_rate / 12\nn_payments = 30 * 12  # 360\n\n# Monthly payment formula\nM = P * (monthly_interest_rate * (1 + monthly_interest_rate)**n_payments) / ((1 + monthly_interest_rate)**n_payments - 1)\n\n# Remaining balance after 359 payments (before making the 360th payment)\n# Formula: B = P * ((1 + r)^n - (1 + r)^p) / ((1 + r)^n - 1)\np = n_payments - 1  # Payments made so far (359)\nbalance_remaining = P * ((1 + monthly_interest_rate)**n_payments - (1 + monthly_interest_rate)**p) / ((1 + monthly_interest_rate)**n_payments - 1)\n\n# Interest portion of the 360th payment\ninterest_360th = balance_remaining * monthly_interest_rate\n\ninterest_360th\nThe amount of the 30th year's 12th (last) payment that goes toward interest is about @@@3.14@@@. \n\nHere\u2019s how I got this:\n- Calculated the monthly payment based on your loan details.\n- Found the outstanding balance before the last payment.\n- Calculated the interest portion as the outstanding balance times the monthly rate.\nSo, only about $3.14 of your last monthly payment is for interest. The rest pays the remaining principal.\n",
    "actual_answer": 3.14
  },
  {
    "question": "What's the incremental interest rate (cost of borrowing) on an additional $20,000 if I go from a $300,000 loan at 2.99% to a $320,000 loan at 3.51%, both for 30 years? Can you solve for the interest rate that would give the same payment difference on just the $20,000?",
    "expected_answer": 10.0,
    "ai_response": "Let's break down the problem step by step:\n\n**Step 1: Calculate the monthly payment for $300,000 at 2.99% for 30 years.**  \n**Step 2: Calculate the monthly payment for $320,000 at 3.51% for 30 years.**  \n**Step 3: The difference in payments is what you'll pay monthly for the extra $20,000.**  \n**Step 4: Find the interest rate (over 30 years) that makes a $20,000 loan have the same monthly payment as the difference calculated in Step 3. This is the incremental cost of borrowing.**\n\nThe formula for the monthly mortgage payment is:  \n\\[ \nP = \\frac{L \\cdot r \\cdot (1 + r)^n}{(1 + r)^n - 1} \n\\]\nWhere:  \n- \\(P\\) = monthly payment  \n- \\(L\\) = loan amount  \n- \\(r\\) = monthly interest rate (annual rate / 12)  \n- \\(n\\) = total number of monthly payments (years \u00d7 12)  \n\nLet's calculate step-by-step.\n\n### Step 1: $300,000 at 2.99% for 30 years\n\n- L = $300,000\n- Annual rate = 2.99% \u2192 Monthly rate = 0.0299 / 12\n- n = 360 (30 years)\n\n### Step 2: $320,000 at 3.51% for 30 years\n\n- L = $320,000\n- Annual rate = 3.51% \u2192 Monthly rate = 0.0351 / 12\n- n = 360\n\n### Step 3: Find the payment difference\n\n### Step 4: Find the interest rate for a $20,000 loan with this payment\n\nLet me calculate this now.\nimport numpy as np\n\n# Given values\nyears = 30\nn = years * 12\n\n# First loan: $300,000 at 2.99%\nL1 = 300000\nr1 = 0.0299 / 12\n\n# Second loan: $320,000 at 3.51%\nL2 = 320000\nr2 = 0.0351 / 12\n\n# Additional loan: $20,000\nL3 = 20000\n\n# Mortgage payment calculation function\ndef mortgage_payment(L, r, n):\n    return L * r * (1 + r)**n / ((1 + r)**n - 1)\n\n# Calculate the monthly payments\npayment1 = mortgage_payment(L1, r1, n)\npayment2 = mortgage_payment(L2, r2, n)\n\n# Payment difference\npayment_diff = payment2 - payment1\n\n# Now find the incremental interest rate on $20,000 that would result in the same payment as payment_diff\n# We can use numpy's financial function for rate or solve numerically\n\n# Function to solve for rate given payment, loan amount, and term\ndef solve_rate(payment, L, n):\n    # Since payment is positive, result is a monthly rate (as a decimal)\n    # numpy's npf.rate takes nper, pmt, pv, fv\n    # We'll use fv=0 (end of mortgage), pmt negative (since outgoing cashflow)\n    return np.rate(n, -payment, L, 0)\n\nrate_monthly = solve_rate(payment_diff, L3, n)\nrate_annual = rate_monthly * 12\n\n# Final answer as requested by user\nrate_annual * 100  # present answer as a percentage\n\nIt looks like the function I was using was removed from the version of numpy installed in the environment. I'll solve for the interest rate using a different numerical approach instead. I'll use a simple iterative method to solve for the annual interest rate that gives the same monthly payment on $20,000 over 30 years as the difference in payment you would have by increasing your loan from $300,000 at 2.99% to $320,000 at 3.51%.\nfrom scipy.optimize import brentq\n\n# Given the payment_diff, L3, and n, we want to solve for r such that:\n# payment_diff = mortgage_payment(L3, r, n)\n# We'll solve for the monthly rate r\n\ndef f(r):\n    if r <= 0:\n        return payment_diff - (L3 / n)  # just for r = 0, principal only\n    return mortgage_payment(L3, r, n) - payment_diff\n\n# Bracket the rate reasonably for typical mortgage rates\nr_monthly_solution = brentq(f, 0.000001, 0.02)\nr_annual_solution = r_monthly_solution * 12 * 100  # as percent\n\nr_annual_solution\nHere\u2019s how I solved the problem:\n\n1. I calculated the monthly payments for both the $300,000 loan at 2.99% and the $320,000 loan at 3.51%.\n2. I found the difference in monthly payments between those two loans.\n3. I then solved for the annual interest rate that would make a $20,000 loan over 30 years have that exact same monthly payment as the difference.\n\nThis gives you the **incremental cost of borrowing** on the additional $20,000. The answer is:\n\n@@@10.001410769456383@@@\n",
    "actual_answer": 10.001410769456383
  },
  {
    "question": "I am comparing two ways to borrow the same total amount over 30 years with monthly payments: Option A: Two separate loans: one for $300,000 at 2.99%, and another for $150,000 at 6.75%. Option B: One big loan for $450,000 at 4.22%. Which one ends up costing less in the long run (Option A minus Option B)",
    "expected_answer": 10893.04,
    "ai_response": "Let's break it down step by step.\n\n### Step 1: Calculate the monthly payments for each loan\n\n#### Loan 1 (Option A): \n- Principal = $300,000\n- Interest rate = 2.99% annual (monthly rate = 2.99/12/100)\n- Term = 30 years = 360 months\n\n#### Loan 2 (Option A): \n- Principal = $150,000\n- Interest rate = 6.75% annual (monthly rate = 6.75/12/100)\n- Term = 30 years = 360 months\n\n#### Option B:\n- Principal = $450,000\n- Interest rate = 4.22% annual (monthly rate = 4.22/12/100)\n- Term = 30 years = 360 months\n\nWe'll use the standard mortgage formula for calculating the monthly payment:\n\\[ P = \\frac{r \\times PV}{1 - (1 + r)^{-n}} \\]\nWhere:\n- \\( P \\) = monthly payment\n- \\( r \\) = monthly interest rate\n- \\( PV \\) = loan amount (principal)\n- \\( n \\) = total number of monthly payments\n\nThen, total payment over 30 years = monthly payment \u00d7 360.\n\n### Step 2: Calculate and Compare\n\nLet's compute it using code:\n# Define a function for mortgage payment calculation\r\ndef monthly_payment(principal, annual_rate, years):\r\n    r = annual_rate / 12 / 100  # monthly rate\r\n    n = years * 12  # number of payments\r\n    payment = principal * r / (1 - (1 + r) ** -n)\r\n    return payment\r\n\r\n# Option A: Two separate loans\r\nloan1_principal = 300000\r\nloan1_rate = 2.99\r\nloan2_principal = 150000\r\nloan2_rate = 6.75\r\nyears = 30\r\n\r\n# Option B: One big loan\r\nloanB_principal = 450000\r\nloanB_rate = 4.22\r\n\r\n# Calculate monthly payments\r\npayment1 = monthly_payment(loan1_principal, loan1_rate, years)\r\npayment2 = monthly_payment(loan2_principal, loan2_rate, years)\r\npaymentB = monthly_payment(loanB_principal, loanB_rate, years)\r\n\r\n# Total payments over 30 years\r\ntotalA = (payment1 + payment2) * years * 12\r\ntotalB = paymentB * years * 12\r\n\r\n# Difference (Option A minus Option B)\r\ndifference = totalA - totalB\r\ndifference\nLet's walk through what I did:\n\n1. I calculated the monthly payments for:\n   - Loan 1: $300,000 at 2.99%\n   - Loan 2: $150,000 at 6.75%\n   - Option B: $450,000 at 4.22%\n\n2. I calculated the total cost over 30 years for each option by multiplying the monthly payment by 360 months.\n\n3. I subtracted the total cost of Option B from the total cost of Option A.\n\nThe result shows that Option A will cost about 10893 more over the course of 30 years compared to Option B.\n\nSo, the answer is @@@10893@@@.\n",
    "actual_answer": 10893.0
  },
  {
    "question": "I took out a mortgage for $300,000, 5 years ago. It\u2019s a 30-year loan with a 3.51% interest rate. Today, I could get a new 30-year mortgage at 2.99% interest, but I\u2019d have to pay a penalty of 2% of what I still owe, plus another $3,000 in fees. (Fees and penalties are paid out of pocket.) If I weigh all future payments and costs as if they happened today, how much would I save over the term of the loan if I refinance (output loss as a negative number)?",
    "expected_answer": 7224.15,
    "ai_response": "Let's break down the problem:\n\n### 1. **Original Loan Details**\n- Amount: $300,000\n- Term: 30 years (360 months)\n- Interest rate: 3.51%\n- Time elapsed: 5 years (60 months)\n- Remaining term: 25 years (300 months)\n\n### 2. **Current Situation**\n- Refinance available at 2.99% for 30 years (360 months)\n- Penalty: 2% of current balance\n- Fees: $3,000 (paid out of pocket)\n- All future payments/costs are considered in today's value (so we need to discount future payments to present value).\n\n### 3. **Steps**\n1. **Calculate current balance (after 5 years) on original loan.**\n2. **Calculate penalty (2% of this balance) and add the $3,000 fee.**\n3. **Calculate remaining payments on the old loan (PV of 300 payments at original rate).**\n4. **Calculate payments on new loan (PV of 360 payments at the new rate, based on the current balance).**\n5. **Subtract the total of old payments from new payments (including fees/penalty) to get net savings (or loss).**\n\nLet's do the calculations:\n\n---\n\n#### Step 1: Calculate original monthly payment\n\n\\[\nP = \\$300,000\n\\]\n\\[\nr = \\frac{3.51\\%}{12} = 0.002925\n\\]\n\\[\nn = 360\n\\]\n\nMonthly payment (\\(M\\)) formula:\n\\[\nM = P \\times \\frac{r(1 + r)^n}{ (1 + r)^n - 1 }\n\\]\n\nLet's calculate the original monthly payment.\n# Given values\r\nP = 300000  # original loan\r\nr = 3.51 / 100 / 12  # monthly interest rate\r\nn = 360  # total months for original loan\r\n\r\n# Calculate original monthly payment\r\nM = P * (r * (1 + r) ** n) / ((1 + r) ** n - 1)\r\nM\nThe original monthly payment on the 3.51% mortgage is about $1,348.81.\n\n---\n\n### Step 2: Calculate current balance after 5 years (60 payments made).\n\nWe use the remaining balance formula after \\(k\\) payments:\n\\[\nB = P \\left( \\frac{ (1+r)^n - (1+r)^k }{ (1+r)^n - 1 } \\right)\n\\]\nwhere \\(k = 60\\) (payments made so far).\n\nLet's compute the loan balance.\nk = 60  # Number of payments made so far\r\n\r\n# Remaining balance\r\nB = P * ((1 + r)**n - (1 + r)**k) / ((1 + r)**n - 1)\r\nB\nAfter 5 years, the remaining balance on your original loan is about $269,137.43.\n\n---\n\n### Step 3: Calculate penalty and total refinance fees\n\n- **Penalty:** 2% of remaining balance\n- **Fees:** $3,000 (fixed)\n\n\\[\n\\text{Penalty} = 0.02 \\times 269137.43 = ?\n\\]\n\nTotal out-of-pocket cost = penalty + fees.\n\nLet's compute that.\npenalty = 0.02 * B\r\nfees = 3000\r\ntotal_cost = penalty + fees\r\ntotal_cost\nThe penalty plus fees total about $8,382.75, which you would pay out of pocket if you refinance.\n\n---\n\n### Step 4: Calculate present value of remaining old payments\n\n- **Number of payments left:** 300 (25 years)\n- **Monthly payment:** $1,348.81\n- **Discount rate:** For apples-to-apples, use the new rate (2.99%) to discount future cash flows.\n\nMonthly discount rate:\n\\[\nr_{new} = \\frac{2.99\\%}{12} = 0.0024916667\n\\]\n\nPV of old payments:\n\\[\nPV_{old} = PMT \\times \\frac{1 - (1 + r_{new})^{-n_{left}} }{r_{new}}\n\\]\nwith:\n- \\( PMT = 1348.81 \\)\n- \\( r_{new} = 0.0024916667 \\)\n- \\( n_{left} = 300 \\)\n\nLet's calculate that.\nPMT_old = M\r\nr_new = 2.99 / 100 / 12\r\nn_left = 300\r\n\r\nPV_old_payments = PMT_old * (1 - (1 + r_new) ** -n_left) / r_new\r\nPV_old_payments\nThe present value of the remaining payments on your old loan (discounted at the new rate) is about $284,744.32.\n\n---\n\n### Step 5: Calculate present value of new payments\n\n- **New loan amount:** $269,137.43 (current balance)\n- **New payment term:** 360 months\n- **New rate:** 2.99%\n\nCalculate the new monthly payment and then compute present value of all those payments (which, since rate = discount rate, should be near to the loan amount).\n\nLet's calculate the new monthly payment first, then the present value.\n# New monthly payment\r\nP_new = B\r\nn_new = 360\r\n\r\nM_new = P_new * (r_new * (1 + r_new) ** n_new) / ((1 + r_new) ** n_new - 1)\r\n\r\n# PV of new payments: Since payment and discount rate match, should closely match P_new\r\nPV_new_payments = M_new * (1 - (1 + r_new) ** -n_new) / r_new\r\nM_new, PV_new_payments\nThe new monthly payment would be about $1,133.24, and the present value of all future new payments (discounted at the new rate) is essentially the current balance, $269,137.43.\n\n---\n\n### Step 6: Calculate Net Savings (or Loss)\n\n- Total outflows if **refinancing**: Present value of new payments + penalty/fees\n- Total outflows if **not refinancing**: PV of remaining old payments\n\nSo:\n\n\\[\n\\text{Net Savings} = \\text{PV of old payments} - (\\text{PV of new payments} + \\text{penalty/fees})\n\\]\n\nLet's calculate that.\nnet_savings = PV_old_payments - (PV_new_payments + total_cost)\r\nnet_savings\nIf you refinance, you would save about $7,224.15 over the full term of the loan when counting all costs, fees, and discounted future payments at the new rate.\n\nThe calculation steps:\n- Discount all payments, fees, and penalties using the new loan rate.\n- Count the difference between staying vs. refinancing (with costs).\n\nFinal answer: @@@7224.15@@@\n",
    "actual_answer": 7224.15
  },
  {
    "question": "If I borrow $250,000 at an annual interest rate of 3.25% for 20 years, and I make monthly payments that fully pay off the loan by the end, how much will I have to pay each month?",
    "expected_answer": 1417.99,
    "ai_response": "To calculate the monthly payment for a fixed-rate mortgage, we use the formula for an amortizing loan:\n\n\\[\nM = P \\frac{r(1 + r)^n}{(1 + r)^n - 1}\n\\]\n\nwhere:\n- \\(M\\) = monthly payment\n- \\(P\\) = loan principal = 250,000\n- \\(r\\) = monthly interest rate = annual rate / 12 = 0.0325 / 12\n- \\(n\\) = total number of monthly payments = years \\(\\times\\) 12 = 20 \\(\\times\\) 12\n\nLet\u2019s calculate each step.\n\n1. Monthly interest rate: \\(0.0325 / 12 = 0.00270833\\)\n2. Number of payments: \\(20 \\times 12 = 240\\)\n3. Plug the values into the formula:\n\nLet me calculate the final answer.\n# Given values\r\nP = 250000\r\nannual_rate = 0.0325\r\nyears = 20\r\nn = years * 12\r\n\r\n# Monthly interest rate\r\nr = annual_rate / 12\r\n\r\n# Monthly payment formula\r\nM = P * (r * (1 + r)**n) / ((1 + r)**n - 1)\r\nround(M, 2)\nThe monthly payment you will have to make to fully pay off a $250,000 loan at 3.25% interest over 20 years is @@@1417.99@@@. I used the standard amortizing loan formula and plugged in your values to get this result.\n",
    "actual_answer": 1417.99
  },
  {
    "question": "If I get a loan for $250,000 at 3.25% interest for 20 years, with monthly payments that fully pay it off, how much will I still owe after 3 years?",
    "expected_answer": 222023.53,
    "ai_response": "Let's break down the mortgage question:\n\nYou have:\n- Loan amount (principal): $250,000\n- Interest rate (annual): 3.25%\n- Term: 20 years\n- Payment type: Fully amortizing (so loan is paid off at the end)\n- Payments: Monthly\n- Time elapsed: 3 years (which is 36 months)\n\nWe want to know: **How much principal remains after 3 years of regular monthly payments?**\n\n### Steps:\n1. **Calculate the monthly interest rate**:\n   Annual Rate: 3.25%  \n   Monthly Rate = 3.25% / 12 months = 0.270833...% = 0.00270833 (decimal)\n\n2. **Number of total payments**:  \n   20 years \u00d7 12 months/year = 240 payments\n\n3. **Monthly payment (using amortizing formula):**\n   The formula is:\n   \\[\n   P = \\frac{L \\cdot r \\cdot (1 + r)^n}{(1 + r)^n - 1}\n   \\]\n   Where:  \n   \\(P\\) = monthly payment  \n   \\(L\\) = loan amount ($250,000)  \n   \\(r\\) = monthly interest rate  \n   \\(n\\) = total number of payments\n\n4. **Find balance after 36 payments:**  \n   The formula for loan balance after k payments is:\n   \\[\n   B = P \\times \\frac{1 - (1 + r)^{-(n - k)}}{r}\n   \\]\n   Where \\(k\\) is number of payments made (in this case 36).\n\nLet's calculate step by step using Python to ensure accuracy.\n# Given values\r\nprincipal = 250000\r\nannual_rate = 3.25 / 100\r\nmonthly_rate = annual_rate / 12\r\nterm_years = 20\r\ntotal_payments = term_years * 12\r\npayments_made = 3 * 12  # 3 years\r\n\r\n# Monthly payment calculation\r\nmonthly_payment = principal * (monthly_rate * (1 + monthly_rate) ** total_payments) / ((1 + monthly_rate) ** total_payments - 1)\r\n\r\n# Remaining balance after 36 payments\r\nremaining_balance = monthly_payment * (1 - (1 + monthly_rate) ** -(total_payments - payments_made)) / monthly_rate\r\n\r\nround(remaining_balance, 2)\nAfter 3 years of making payments on this loan, you would still owe @@@222023.53@@@. \n\nHere\u2019s how it was calculated:\n- The mortgage payment was calculated to fully pay off the $250,000 loan over 20 years at 3.25% interest, resulting in fixed monthly payments.\n- After making 36 monthly payments, we used the remaining balance formula to determine how much principal remains.\n- The final answer, rounded to the nearest cent, is about $222,023.53.\n",
    "actual_answer": 222023.53
  },
  {
    "question": "For a loan of $250,000 with 3.25% interest over 20 years, with monthly payments that pay off the loan completely, how much of the 24th payment goes toward interest?",
    "expected_answer": 629.53,
    "ai_response": "To determine how much of the 24th payment goes toward interest, let's break down the calculation:\n\n### Steps:\n\n1. **Find the monthly interest rate**:\n   - Annual interest rate = 3.25%\n   - Monthly interest rate = 3.25% / 12 = 0.0027083 (rounded)\n\n2. **Find the monthly payment** using the amortization formula:\n   - Loan amount (P) = 250,000\n   - Number of payments (n) = 20 years \u00d7 12 months = 240\n   - Interest rate per month (r) = 0.0027083\n\n   The monthly payment (M) is:\n\n   \\[\n   M = P \\times \\frac{r(1+r)^n}{(1+r)^n-1}\n   \\]\n\n3. **Find the remaining principal after 23 payments.**\n\n4. **Calculate the interest portion of the 24th payment**:\n   - Interest paid in month 24 = (remaining principal after 23 payments) \u00d7 monthly interest rate\n\nI'll now do the math in steps to keep the process clear.\n\nLet's calculate:\n# Loan details\nP = 250000  # principal\nannual_rate = 0.0325\nmonthly_rate = annual_rate / 12\nn_payments = 20 * 12  # 240 total payments\n\n# Step 1: Calculate monthly payment using amortization formula\nM = P * (monthly_rate * (1 + monthly_rate) ** n_payments) / ((1 + monthly_rate) ** n_payments - 1)\n\n# Step 2: Calculate the remaining balance after 23 payments\nremaining_balance = P\nfor i in range(23):\n    interest = remaining_balance * monthly_rate\n    principal_paid = M - interest\n    remaining_balance -= principal_paid\n\n# Step 3: Interest portion of the 24th payment\ninterest_24 = remaining_balance * monthly_rate\n\n# Results\nM, remaining_balance, interest_24\nLet's walk through the calculations:\n\n- The monthly payment on the loan is about \\$1,417.99.\n- After making 23 payments, the remaining principal is about \\$232,441.73.\n- For the 24th payment, the interest portion is the remaining principal times the monthly interest rate: \\(232,441.73 \\times 0.0027083 \\approx 629.53\\).\n\nSo, the amount of the 24th payment that goes toward interest is @@@629.53@@@.\n",
    "actual_answer": 629.53
  },
  {
    "question": "What's the incremental interest rate (cost of borrowing) on an additional $20,000 if I go from a $250,000 loan at 3.25% to a $270,000 loan at 3.75%, both for 20 years? Can you solve for the interest rate that would give the same payment difference on just the $20,000?",
    "expected_answer": 9.22,
    "ai_response": "Let\u2019s break down the problem:\n\n1. **First Loan (Old):**\n   - Amount: $250,000\n   - Interest Rate: 3.25%\n   - Term: 20 years\n\n2. **Second Loan (New):**\n   - Amount: $270,000\n   - Interest Rate: 3.75%\n   - Term: 20 years\n\n**Goal:**  \nWe want to know: What interest rate on $20,000 (over 20 years) would produce a monthly payment equal to the difference in payments between these two loans?\n\nLet's proceed step-by-step:\n\n### Step 1: Calculate the monthly payment for both loans\n\nThe formula for the monthly payment of a loan is:  \n\\[ P = \\frac{A \\times r \\times (1 + r)^n}{(1 + r)^n - 1} \\]\nWhere:\n- \\(A\\) = loan amount\n- \\(r\\) = monthly interest rate\n- \\(n\\) = total number of months\n\n**First Loan:**\n- Principal = $250,000\n- Annual rate = 3.25% \u2192 monthly rate = 0.0325/12\n- Months = 20 \u00d7 12 = 240\n\n**Second Loan:**\n- Principal = $270,000\n- Annual rate = 3.75% \u2192 monthly rate = 0.0375/12\n- Months = 240\n\nLet\u2019s do this in Python to ensure accuracy.\n# Loan details\r\nprincipal1 = 250000\r\nrate1 = 0.0325 / 12\r\nprincipal2 = 270000\r\nrate2 = 0.0375 / 12\r\nn_months = 20 * 12\r\ndelta_principal = 20000\r\n\r\n# Monthly payment formula\r\ndef monthly_payment(P, r, n):\r\n    return (P * r * (1 + r) ** n) / ((1 + r) ** n - 1)\r\n\r\npayment1 = monthly_payment(principal1, rate1, n_months)\r\npayment2 = monthly_payment(principal2, rate2, n_months)\r\n\r\n# The payment difference\r\npayment_diff = payment2 - payment1\r\n\r\n# Now, solve for rate r, where the payment on $20,000 for 240mo = payment_diff\r\n# We'll use a numeric solver\r\nimport scipy.optimize as opt\r\n\r\ndef payment_diff_fn(r_annual):\r\n    r = r_annual / 12\r\n    return monthly_payment(delta_principal, r, n_months) - payment_diff\r\n\r\n# Initial guess for rate: 0.05 (5% annual)\r\nr_annual_solution = opt.newton(payment_diff_fn, 0.05)\r\n\r\n# Convert annual rate to percent\r\nr_annual_percent = r_annual_solution * 100\r\nr_annual_percent\nTo produce the same payment difference on $20,000 over 20 years, the incremental interest rate would be approximately @@@9.221882@@@.\n\n**Explanation**:  \n- The extra $20,000 you borrow (by going from $250,000 at 3.25% to $270,000 at 3.75%) effectively \"costs\" you about 9.22% annual interest, because not only does the rate increase, but it applies to the whole amount.\n- This reflects the true cost of borrowing more at the higher rate, not just the sticker rate of 3.75%.\n",
    "actual_answer": 9.221882
  },
  {
    "question": "I am comparing two ways to borrow the same total amount over 20 years with monthly payments: Option A: Two separate loans: one for $250,000 at 3.25%, and another for $120,000 at 5.50%. Option B: One big loan for $350,000 at 3.95%. Which one ends up costing less in the long run (Option A minus Option B)",
    "expected_answer": 31615.91,
    "ai_response": "Great, let's break this down step by step.\n\nTo compare which option costs less, we need to calculate the total payments (principal + interest) for both options over the 20-year period.\n\n**Step 1: Calculate the monthly payment for each loan.**\n- Use the standard loan payment formula:  \n  \\( M = P \\frac{r(1+r)^n}{(1+r)^n - 1} \\)  \n  Where:\n  - M = monthly payment\n  - P = loan amount\n  - r = monthly interest rate (annual rate / 12)\n  - n = total number of payments (years \u00d7 12)\n\n#### Option A:\n- Loan 1: $250,000 at 3.25% for 20 years\n- Loan 2: $120,000 at 5.50% for 20 years\n\n#### Option B:\n- Loan 3: $350,000 at 3.95% for 20 years\n\nLet's do the calculations:\n\n```python\n# Loan parameters\nyears = 20\nn = years * 12\n\n# Option A\nP1 = 250000  # Loan 1 amount\nr1 = 3.25 / 100 / 12  # Loan 1 monthly rate\nP2 = 120000  # Loan 2 amount\nr2 = 5.50 / 100 / 12  # Loan 2 monthly rate\n\n# Option B\nP_big = 350000  # Big loan amount\nr_big = 3.95 / 100 / 12  # Big loan monthly rate\n\ndef monthly_payment(P, r, n):\n    return P * r * (1 + r)**n / ((1 + r)**n - 1)\n\n# Monthly payments\nM1 = monthly_payment(P1, r1, n)\nM2 = monthly_payment(P2, r2, n)\nM_big = monthly_payment(P_big, r_big, n)\n\n# Total payments\ntotal_A = (M1 + M2) * n\ntotal_B = M_big * n\n\n# Difference: Option A minus Option B\ndifference = total_A - total_B\ndifference\n```\n\nLet's do the math.\n# Define variables\r\nyears = 20\r\nn = years * 12  # total number of payments\r\n\r\n# Option A loan details\r\nP1 = 250000\r\nr1 = 3.25 / 100 / 12\r\nP2 = 120000\r\nr2 = 5.50 / 100 / 12\r\n\r\n# Option B loan details\r\nP_big = 350000\r\nr_big = 3.95 / 100 / 12\r\n\r\ndef monthly_payment(P, r, n):\r\n    return P * r * (1 + r)**n / ((1 + r)**n - 1)\r\n\r\n# Calculate monthly payments\r\nM1 = monthly_payment(P1, r1, n)\r\nM2 = monthly_payment(P2, r2, n)\r\nM_big = monthly_payment(P_big, r_big, n)\r\n\r\n# Calculate total payments\r\ntotal_A = (M1 + M2) * n\r\ntotal_B = M_big * n\r\n\r\n# Calculate the difference Option A minus Option B\r\ndifference = total_A - total_B\r\nround(difference)  # rounding to nearest dollar for clarity\r\n\nThe difference between the total costs of Option A and Option B (Option A minus Option B) is @@@31616@@@.\n\n**Explanation:**\n- The total combining both loans at different rates (Option A) ends up costing $31,616 more over 20 years compared to simply taking one larger loan at the blended 3.95% rate (Option B).\n- This happens because the $120,000 at 5.50% incurs significantly more interest, even though the other loan is at a lower rate, raising the overall cost.\n\nSo, Option B is less expensive by $31,616 over the full term.\n",
    "actual_answer": 31616.0
  },
  {
    "question": "I took out a mortgage for $250,000, 3 years ago. It\u2019s a 20-year loan with a 3.75% interest rate. Today, I could get a new 25-year mortgage at 3.25% interest, but I\u2019d have to pay a penalty of 2% of what I still owe, plus another $2,500 in fees. (Fees and penalties are rolled into the new loan.) If I weigh all future payments and costs as if they happened today, how much would I save over the term of the loan if I refinance (output loss as a negative number)?",
    "expected_answer": 2895.76,
    "ai_response": "Let's break down and solve your refinancing scenario step by step:\n\n**Step 1: Find your current loan's outstanding balance after 3 years**\n\n- Original loan amount: $250,000  \n- Term: 20 years = 240 months  \n- Interest rate: 3.75% annually = 0.3125% monthly  \n- Payments made: 3 years \u00d7 12 = 36 months  \n\nLet's use the monthly mortgage formula:\n\\[ M = P \\frac{r(1 + r)^n}{(1 + r)^n - 1} \\]\nWhere:  \n- \\( M \\) = monthly payment  \n- \\( P \\) = principal = 250,000  \n- \\( r \\) = monthly rate = 0.0375 / 12  \n- \\( n \\) = number of payments = 240  \n\nWe can first calculate the monthly payment, then the remaining balance.\n\n**Step 2: Calculate remaining balance after 36 payments**\n\nThe remaining balance after \\( k \\) payments:\n\\[ B = P \\frac{(1 + r)^n - (1 + r)^k}{(1 + r)^n - 1} \\]\n\n**Step 3: Calculate penalties and fees for refinancing**\n\nPenalty = 2% of remaining balance  \nOther fees = $2,500  \nTotal new loan = remaining balance + penalty + fees\n\n**Step 4: Compare the present value of all payments for both scenarios**\n\nWe discount all future payments to today using the new loan rate of 3.25%.\n\n**Step 5: Output the difference (savings positive, loss negative)**\n\nLet's proceed with these calculations in Python.\n\n```python\n# Step 1: Monthly payment calculation for original loan\nP = 250000\nannual_rate = 0.0375\nmonthly_rate = annual_rate / 12\nn_payments = 240  # Original loan term in months\n\nmonthly_payment = P * (monthly_rate * (1 + monthly_rate) ** n_payments) / ((1 + monthly_rate) ** n_payments - 1)\n\n# Step 2: Remaining balance after 36 payments\nk = 36  # Payments made\nremaining_balance = P * ((1 + monthly_rate) ** n_payments - (1 + monthly_rate) ** k) / ((1 + monthly_rate) ** n_payments - 1)\n\n# Step 3: Penalty and fees\npenalty = 0.02 * remaining_balance\nfees = 2500\ntotal_new_loan = remaining_balance + penalty + fees\n\n# Step 4: New loan monthly payment over 25 years\nnew_loan_term = 25 * 12\nnew_annual_rate = 0.0325\nnew_monthly_rate = new_annual_rate / 12\nnew_monthly_payment = total_new_loan * (new_monthly_rate * (1 + new_monthly_rate) ** new_loan_term) / ((1 + new_monthly_rate) ** new_loan_term - 1)\n\n# Present value calculations (discount at 3.25%)\ndef present_value(payment, periods, rate):\n    pv = 0\n    for t in range(1, periods + 1):\n        pv += payment / ((1 + rate) ** t)\n    return pv\n\n# Remaining payments on old loan: 204 months at old monthly payment\npv_old = present_value(monthly_payment, n_payments - k, new_monthly_rate)\n# New loan: 300 payments at new payment\npv_new = present_value(new_monthly_payment, new_loan_term, new_monthly_rate)\n\n# The new loan already includes penalty and fees rolled in, so nothing else to add\n\n# Savings = PV of old - PV of new\nsavings = pv_old - pv_new\nsavings\n```\n\nLet's calculate:\n# Given variables\r\nP = 250000\r\nannual_rate = 0.0375\r\nmonthly_rate = annual_rate / 12\r\nn_payments = 240\r\nk = 36  # payments made\r\n\r\n# Monthly payment\r\nmonthly_payment = P * (monthly_rate * (1 + monthly_rate) ** n_payments) / ((1 + monthly_rate) ** n_payments - 1)\r\n\r\n# Remaining balance after 36 payments\r\nremaining_balance = P * ((1 + monthly_rate) ** n_payments - (1 + monthly_rate) ** k) / ((1 + monthly_rate) ** n_payments - 1)\r\n\r\n# Penalty and fees\r\npenalty = 0.02 * remaining_balance\r\nfees = 2500\r\ntotal_new_loan = remaining_balance + penalty + fees\r\n\r\n# New loan values\r\nnew_loan_term = 25 * 12\r\nnew_annual_rate = 0.0325\r\nnew_monthly_rate = new_annual_rate / 12\r\nnew_monthly_payment = total_new_loan * (new_monthly_rate * (1 + new_monthly_rate) ** new_loan_term) / ((1 + new_monthly_rate) ** new_loan_term - 1)\r\n\r\n# Present value function\r\ndef present_value(payment, periods, rate):\r\n    return sum([payment / ((1 + rate) ** t) for t in range(1, periods + 1)])\r\n\r\n# PV of remaining old loan payments, discounted at new rate\r\npv_old = present_value(monthly_payment, n_payments - k, new_monthly_rate)\r\n\r\n# PV of new loan payments\r\npv_new = present_value(new_monthly_payment, new_loan_term, new_monthly_rate)\r\n\r\n# Net \"savings\": PV_old - PV_new\r\nsavings = pv_old - pv_new\r\nsavings\nHere\u2019s how I got your answer:\n\n1. **Your original loan:** $250,000 at 3.75% for 20 years. After 3 years, your balance is about $221,900.\n2. **To refinance:** You\u2019ll pay a 2% penalty ($4,438) plus $2,500 in other fees, bringing the total new loan amount to about $228,838.\n3. **Your new loan:** 25 years at 3.25%. The payment is lower but over a longer period.\n4. **Comparing:** I summed up all your future payments for both loans as if you paid them today (using a fair way to value future money).\n\nSo, refinancing would save you about @@@1779.09@@@ over the full term (in present-day dollars), so it's a small win for your wallet!\n",
    "actual_answer": 1779.09
  },
  {
    "question": "If I borrow $400,000 at an annual interest rate of 3.85% for 25 years, and I make monthly payments that fully pay off the loan by the end, how much will I have to pay each month?",
    "expected_answer": 2078.36,
    "ai_response": "To calculate the monthly payment for a fixed-rate mortgage, you use the formula:\n\n\\[\nM = P \\frac{r(1+r)^n}{(1+r)^n-1}\n\\]\n\nWhere:\n- \\(M\\) is the monthly payment\n- \\(P\\) is the principal ($400,000)\n- \\(r\\) is the monthly interest rate (3.85% annual / 12 months = 0.0385/12)\n- \\(n\\) is the total number of payments (25 years * 12 months = 300)\n\nLet\u2019s do the calculations step by step:\n\n- Principal (\\(P\\)): 400,000\n- Annual interest rate: 3.85%, so monthly rate (\\(r\\)) = 0.0385 / 12 = 0.003208333\n- Number of payments (\\(n\\)): 25 * 12 = 300\n\nPlugging these in:\n\n\\[\nM = 400000 \\frac{0.003208333 (1+0.003208333)^{300}}{(1+0.003208333)^{300} - 1}\n\\]\n\nLet\u2019s calculate this in Python to ensure accuracy.\nP = 400000\nannual_rate = 3.85 / 100\nr = annual_rate / 12\nn = 25 * 12\n\nM = P * (r * (1 + r)**n) / ((1 + r)**n - 1)\nround(M, 2)\nThe monthly payment you would need to make is @@@2078.36@@@. \n\nHere's how it works:\n- You borrow 400,000 at a 3.85% annual interest rate.\n- The loan is for 25 years, which means 300 monthly payments.\n- The monthly interest rate is 0.00320833.\n- Plugging these into the standard mortgage formula gives you a required monthly payment of $2,078.36 to fully pay off the loan in 25 years.\n",
    "actual_answer": 2078.36
  },
  {
    "question": "If I get a loan for $400,000 at 3.85% interest for 25 years, with monthly payments that fully pay it off, how much will I still owe after 7 years?",
    "expected_answer": 323492.92,
    "ai_response": "To solve this, let's break down the problem:\n\n1. You have a loan of 400,000, with a 3.85% annual interest rate, for a term of 25 years.\n2. You make monthly payments that would pay off the loan completely after 25 years.\n3. You want to know the remaining balance after 7 years.\n\nHere are the steps:\n\n**Step 1: Calculate the monthly payment.**\n\nThe formula for the monthly payment (PMT) for a fixed-rate mortgage is:\n\n\\[ PMT = P \\times \\dfrac{r \\times (1+r)^n}{(1+r)^n - 1} \\]\n\nwhere:\n- \\( P \\) is the principal (400,000)\n- \\( r \\) is the monthly interest rate (annual rate divided by 12)\n- \\( n \\) is the total number of payments (25 years \u00d7 12 months = 300 payments)\n\n**Step 2: Find the remaining balance after 7 years (84 payments).**\n\nThe formula for the remaining balance after \\( k \\) payments is:\n\n\\[ B = P \\times \\dfrac{(1+r)^n - (1+r)^k}{(1+r)^n - 1} \\]\n\nwhere \\( k \\) is the number of payments made (7 years \u00d7 12 months = 84 payments).\n\nLet me calculate this step by step:\n\n- \\( P = 400000 \\)\n- \\( \\text{annual interest rate} = 3.85\\% = 0.0385 \\)\n- \\( r = 0.0385/12 \\)\n- \\( n = 300 \\) \n- \\( k = 84 \\)\n\nLet's compute this.\n# Given values\nP = 400000\nannual_rate = 0.0385\nr = annual_rate / 12\nn = 25 * 12\nk = 7 * 12\n\n# Monthly payment calculation\nPMT = P * (r * (1 + r) ** n) / ((1 + r) ** n - 1)\n\n# Remaining balance after k payments\nB = P * ((1 + r) ** n - (1 + r) ** k) / ((1 + r) ** n - 1)\nB\nAfter 7 years of making monthly payments on your $400,000, 25-year mortgage at 3.85% interest, you will still owe about @@@323492.92@@@. \n\nHere's how this is calculated:\n- You have 300 monthly payments total.\n- You made 84 payments after 7 years.\n- Using the remaining balance formula, the balance is just over 323,492.92.\n\nIf you need the monthly payment value, let me know!\n",
    "actual_answer": 323492.92
  },
  {
    "question": "For a loan of $400,000 with 3.85% interest over 25 years, with monthly payments that pay off the loan completely, how much of the 60th payment goes toward interest?",
    "expected_answer": 1117.95,
    "ai_response": "Let's break down how to find out how much of the 60th payment (that is, after 5 years) goes toward interest for a $400,000 loan with a 3.85% annual interest rate over 25 years, with monthly payments.\n\n### Step 1: Find the monthly interest rate\nAnnual rate = 3.85%  \nMonthly interest rate = 3.85% / 12 = 0.320833% = 0.00320833 (in decimal)\n\n### Step 2: Calculate the monthly payment using the amortization formula:\n\nThe monthly payment formula for a fixed-rate mortgage is:\n\\(M = P \\frac{r(1+r)^n}{(1+r)^n - 1}\\)\n\nWhere:  \n- \\(P\\) = loan amount = 400,000  \n- \\(r\\) = monthly interest rate = 0.00320833  \n- \\(n\\) = total number of payments = 25 years \u00d7 12 = 300  \n\nLet's do the calculation using Python to eliminate manual errors.\n# Loan information\nP = 400000\nannual_rate = 3.85 / 100\nmonthly_rate = annual_rate / 12\nn = 25 * 12  # total payments\n\n# Monthly payment calculation\nM = P * (monthly_rate * (1 + monthly_rate) ** n) / ((1 + monthly_rate) ** n - 1)\n\n# Now, we need the loan balance just before the 60th payment.\n# The formula for the remaining balance after k payments is:\n# B_k = P * ((1+r)^n - (1+r)^k) / ((1+r)^n - 1)\nk = 59  # 59 payments have been made; we're looking for 60th\n\nremaining_balance = P * ((1 + monthly_rate) ** n - (1 + monthly_rate) ** k) / ((1 + monthly_rate) ** n - 1)\n\n# Interest part of the 60th payment:\ninterest_60 = remaining_balance * monthly_rate\n\n# Output for parsing\nint(interest_60)  # for final parsed result, round down to the nearest dollar\n\nThe interest portion of the 60th payment (which is the payment made at the beginning of the 6th year) is calculated based on the remaining principal balance after 59 payments. This is done by multiplying the remaining principal by the monthly interest rate. \n\nAfter performing the calculation, the amount of the 60th payment that goes toward interest is @@@1117@@@.\n",
    "actual_answer": 1117.0
  },
  {
    "question": "What's the incremental interest rate (cost of borrowing) on an additional $20,000 if I go from a $400,000 loan at 3.85% to a $420,000 loan at 4.10%, both for 25 years? Can you solve for the interest rate that would give the same payment difference on just the $20,000?",
    "expected_answer": 8.56,
    "ai_response": "Absolutely, let\u2019s break it down!\n\nWe\u2019re looking for the **incremental interest rate** on the extra $20,000\u2014that is, the rate that would make a $20,000 loan produce the same difference in payment as what actually happens when your loan goes from $400,000 at 3.85% to $420,000 at 4.10%.\n\nLet\u2019s start by calculating the monthly payments for:\n1. $400,000 at 3.85% for 25 years\n2. $420,000 at 4.10% for 25 years\n\nWe'll then find the difference in monthly payments and see what interest rate on a $20,000 loan (for 25 years) would give the same monthly payment.\n\n**Monthly payment formula:**\n\\[\nM = P \\times \\frac{r(1+r)^n}{(1+r)^n-1}\n\\]\nWhere:\n- \\(P\\) = Principal\n- \\(r\\) = monthly interest rate (annual rate / 12)\n- \\(n\\) = total number of monthly payments (years \u00d7 12)\n\n### 1. Payment for $400,000 at 3.85%\n- Principal = 400000\n- Annual Rate = 0.0385 \u2192 Monthly rate = 0.0385 / 12\n- n = 25 \u00d7 12 = 300\n\n### 2. Payment for $420,000 at 4.10%\n- Principal = 420000\n- Annual Rate = 0.0410 \u2192 Monthly rate = 0.0410 / 12\n- n = 300\n\n### 3. Payment difference\n\n### 4. What interest rate (let\u2019s call it r_incr) on a $20,000 loan for 25 years gives the same monthly payment?\n\nI'll solve this step by step, using Python for accuracy.\nfrom scipy.optimize import fsolve\n\n# Inputs\nP1 = 400000\nr1_annual = 0.0385\nP2 = 420000\nr2_annual = 0.0410\nyears = 25\nn = years * 12\n\ndef monthly_payment(P, annual_rate, n):\n    r = annual_rate / 12\n    return P * (r * (1 + r) ** n) / ((1 + r) ** n - 1)\n\n# 1. Monthly payment for $400,000 at 3.85%\nM1 = monthly_payment(P1, r1_annual, n)\n\n# 2. Monthly payment for $420,000 at 4.10%\nM2 = monthly_payment(P2, r2_annual, n)\n\n# 3. Difference in payment\ndelta_M = M2 - M1\n\n# 4. Incremental interest rate for $20,000 loan\nP_incr = 20000\n\ndef equation(r_annual):\n    M_incr = monthly_payment(P_incr, r_annual, n)\n    return M_incr - delta_M\n\n# Solve for r_incr\nr_incr_annual_guess = 0.05  # Initial guess\nr_incr_annual_solution = fsolve(equation, r_incr_annual_guess)[0]\n\n# Annual rate as a percentage (rounded to 5 decimal places)\nr_incr_percent = round(r_incr_annual_solution * 100, 5)\nr_incr_percent\nLet's review what we've done:\n\n1. Calculated the monthly payment for a $400,000 loan at 3.85% over 25 years.\n2. Calculated the monthly payment for a $420,000 loan at 4.10% over 25 years.\n3. Found the difference in payment.\n4. Figured out what interest rate on a $20,000 loan (over 25 years) would give you the same monthly payment difference.\n\nThe **incremental interest rate** (cost of borrowing) on the extra $20,000 is @@@8.55679@@@. In other words, if you were to isolate that extra $20,000 as a separate loan, its effective rate would be about 8.56% per year to produce the same change in monthly payment. \n\nThis result highlights how, when higher balances push your rate up, the marginal cost of borrowing extra money can be much higher than it seems!\n",
    "actual_answer": 8.55679
  },
  {
    "question": "I am comparing two ways to borrow the same total amount over 25 years with monthly payments: Option A: Two separate loans: one for $400,000 at 3.85%, and another for $180,000 at 7.25%. Option B: One big loan for $500,000 at 4.50%. Which one ends up costing less in the long run (Option A minus Option B)",
    "expected_answer": 180074.78,
    "ai_response": "Let's break down the problem:\n\n- Both options have a 25-year term (300 months).\n- Monthly payments need to be calculated for each loan.\n- Total payments over the lifetime of each loan can be compared.\n- The answer will be Option A total payments minus Option B total payments.\n\nThe standard fixed-rate loan payment formula is:  \n**P = principal, r = monthly interest rate, n = total number of payments**\nMonthly Payment = \\( P \\times \\frac{r(1+r)^n}{(1+r)^n-1} \\)\n\nLet's calculate:  \n\n### Option A:\n**Loan 1:** $400,000 at 3.85%  \n**Loan 2:** $180,000 at 7.25%\n\n### Option B:\n**Loan:** $580,000 at 4.50%\n\nI'll do the calculations in Python for full accuracy.\n\n```python\ndef monthly_payment(principal, annual_rate, years):\n    r = annual_rate / 100 / 12\n    n = years * 12\n    payment = principal * (r * (1 + r)**n) / ((1 + r)**n - 1)\n    return payment\n\nyears = 25\n\n# Option A\npayment1_A = monthly_payment(400000, 3.85, years)\npayment2_A = monthly_payment(180000, 7.25, years)\ntotal_A = (payment1_A + payment2_A) * years * 12\n\n# Option B\npayment_B = monthly_payment(580000, 4.50, years)\ntotal_B = payment_B * years * 12\n\ndifference = total_A - total_B\ndifference\n```\n\nLet's calculate:\ndef monthly_payment(principal, annual_rate, years):\r\n    r = annual_rate / 100 / 12\r\n    n = years * 12\r\n    payment = principal * (r * (1 + r)**n) / ((1 + r)**n - 1)\r\n    return payment\r\n\r\nyears = 25\r\n\r\n# Option A\r\npayment1_A = monthly_payment(400000, 3.85, years)\r\npayment2_A = monthly_payment(180000, 7.25, years)\r\ntotal_A = (payment1_A + payment2_A) * years * 12\r\n\r\n# Option B - note the total loan amount is $580,000, not $500,000 as stated in the scenario. I'll use $580,000 to match the total borrowed in both cases.\r\npayment_B = monthly_payment(580000, 4.50, years)  \r\ntotal_B = payment_B * years * 12\r\n\r\ndifference = total_A - total_B\r\nround(difference)   # rounded to the nearest dollar for answer formatting\r\n\nLet's walk through what I've calculated:\n\n- For Option A: I calculated the monthly payments for a $400,000 loan at 3.85% and for a $180,000 loan at 7.25%, both over 25 years, then summed those payments together, and multiplied by the total number of payments (300) to get the total outlay over the life of the loans.\n- For Option B: I assumed a single $580,000 loan at 4.5% for 25 years (since $400,000 + $180,000 = $580,000), calculated the monthly payment with this rate, and then got the total payments over 25 years.\n\nThe final calculation is Total Paid in Option A minus Total Paid in Option B. If the answer is positive, you pay more with Option A; if it's negative, you save with Option A.\n\nThe answer is: @@@46675@@@\n\nSo, Option A ends up costing $46,675 more over the lifetime of the loans compared to Option B.\n",
    "actual_answer": 46675.0
  },
  {
    "question": "I took out a mortgage for $400,000, 7 years ago. It\u2019s a 25-year loan with a 4.10% interest rate. Today, I could get a new 30-year mortgage at 3.85% interest, but I\u2019d have to pay a penalty of 2% of what I still owe, plus another $3,500 in fees. (Fees and penalties are paid out of pocket.) If I weigh all future payments and costs as if they happened today, how much would I save over the term of the loan if I refinance (output loss as a negative number)?",
    "expected_answer": -2659.73,
    "ai_response": "Let's break down the problem step by step:\n\n### 1. Outstanding Balance Calculation\n- **Original loan amount:** $400,000\n- **Original term:** 25 years (300 months)\n- **Interest rate:** 4.10%\n- **Years passed:** 7 years = 84 months\n\nFirst, let's find the monthly payment:\n\n\\[\n\\text{Monthly payment} = P \\times \\frac{r(1 + r)^n}{(1 + r)^n - 1}\n\\]\nWhere:\n- \\( P \\) = original loan principal ($400,000)\n- \\( r \\) = monthly interest rate (4.10% / 12 = 0.00341667)\n- \\( n \\) = loan term in months (300)\n\n#### Step 1: Monthly payment\n\\[\n\\text{Monthly payment} = 400,000 \\times \\frac{0.00341667(1 + 0.00341667)^{300}}{(1 + 0.00341667)^{300} - 1}\n\\]\n\n#### Step 2: Remaining balance after 84 payments\nThe formula for the remaining balance is:\n\\[\n\\text{Balance} = P \\times \\frac{((1 + r)^n - (1 + r)^p)}{(1 + r)^n - 1}\n\\]\nWhere \\( p \\) is the number of payments made (84).\n\n#### Step 3: New loan\n- **New term:** 30 years = 360 months\n- **Interest rate:** 3.85%\n- **Amount financed:** Remaining balance of original loan\n\n#### Step 4: Penalty and fees\n- **Penalty:** 2% of outstanding balance\n- **Fees:** $3,500\n\n#### Step 5: Net Present Value (NPV) comparison\nWe'll sum all payments (discounted to today) to compare staying with the old loan vs. refinancing and include the penalty/fees.\n\nLet's do all the calculations step by step in Python:\n# Constants\nP = 400000            # Original loan principal\norig_term_months = 300 # 25 years\norig_rate = 0.0410     # 4.10%\nmonths_passed = 84     # 7 years\n\nrefi_term_months = 360 # 30 years (new loan)\nrefi_rate = 0.0385     # 3.85%\n\nmonthly_orig_rate = orig_rate / 12\nmonthly_refi_rate = refi_rate / 12\n\n# Monthly payment on the original loan\nmonthly_payment = P * (monthly_orig_rate * (1 + monthly_orig_rate) ** orig_term_months) / ((1 + monthly_orig_rate) ** orig_term_months - 1)\n\n# Remaining balance after `months_passed` payments\nremaining_balance = P * ((1 + monthly_orig_rate) ** orig_term_months - (1 + monthly_orig_rate) ** months_passed) / ((1 + monthly_orig_rate) ** orig_term_months - 1)\n\n# Penalty and fees\npenalty = 0.02 * remaining_balance\nfees = 3500\n\n# New loan payment (refinance amount and monthly payment)\nnew_loan_amount = remaining_balance\nnew_monthly_payment = new_loan_amount * (monthly_refi_rate * (1 + monthly_refi_rate) ** refi_term_months) / ((1 + monthly_refi_rate) ** refi_term_months - 1)\n\n# For NPV, we need to discount all future payments to present value.\n# We will use the original rate for NPVs (commonly used for such \"what-if\" analysis).\n\ndiscount_rate = monthly_orig_rate\n\n# Remaining payments on old loan\nold_remaining_months = orig_term_months - months_passed\npv_old = 0\nfor m in range(1, old_remaining_months+1):\n    pv_old += monthly_payment / ((1 + discount_rate) ** m)\n\n# Refine: Penalty/Fee is paid now (undiscounted)\npv_new = penalty + fees\nfor m in range(1, refi_term_months+1):\n    pv_new += new_monthly_payment / ((1 + discount_rate) ** m)\n\n# Savings = Old cost - New cost\nsavings = pv_old - pv_new\nround(savings)\nLet's break down the process:\n\n1. First, I calculated how much you still owe (remaining balance) on your original $400,000 loan, 7 years into a 25-year term at 4.10%. \n2. Then, I looked at refinancing the remaining balance into a new 30-year, 3.85% loan, with a penalty (2% of your current balance) and $3,500 in fees.\n3. I compared the total present value of all future loan payments for both staying and refinancing, using the original interest rate as the discount rate (standard financial approach).\n\nAfter calculating all payments (discounted to today) and including the penalty and fees, you would end up **losing** money if you refinance. The amount you would lose\u2014when all numbers are brought to today's value\u2014is: @@@-316@@@\n\nSo, refinancing in this scenario is not financially advantageous.\n",
    "actual_answer": -316.0
  },
  {
    "question": "If I borrow $300,000 at an annual interest rate of 2.99% for 30 years, and I make monthly payments that fully pay off the loan by the end, how much will I have to pay each month?",
    "expected_answer": 1263.19,
    "ai_response": "To find the monthly payment for a fixed-rate mortgage, we use the formula for a fully amortizing loan:\n\n\\[\nM = \\frac{P r (1+r)^n}{(1+r)^n - 1}\n\\]\n\nWhere:\n\n- \\( M \\) = monthly payment\n- \\( P \\) = loan principal ($300,000)\n- \\( r \\) = monthly interest rate (annual rate / 12)\n- \\( n \\) = total number of monthly payments (years * 12)\n\nLet's break it down:\n\n1. Loan amount \\( P \\) = 300,000\n2. Annual interest rate = 2.99%, so monthly rate \\( r = 0.0299 / 12 \\)\n3. Years = 30, so \\( n = 30 \\times 12 = 360 \\)\n\nLet\u2019s calculate:\n\n\\[\nr = 0.0299 / 12 \\approx 0.00249167\n\\]\n\\[\nn = 360\n\\]\n\nPlug these values into the equation:\n\n\\[\nM = \\frac{300000 \\times 0.00249167 \\times (1 + 0.00249167)^{360}}{(1 + 0.00249167)^{360} - 1}\n\\]\n\nI will calculate this step by step in code to ensure accuracy.\n# Mortgage calculation\nP = 300000      # Principal\nannual_rate = 2.99 / 100\nr = annual_rate / 12    # Monthly interest rate\nn = 30 * 12             # Number of payments\n\n# Monthly payment formula\nM = P * r * (1 + r) ** n / ((1 + r) ** n - 1)\nround(M, 2)\nTo pay off a $300,000 loan at a 2.99% annual interest rate over 30 years with fixed monthly payments, you will need to pay @@@1263.19@@@ each month.\n\nHere's how the calculation works:\n- Principal: 300,000\n- Monthly interest rate: 0.0299 / 12 = 0.00249167\n- Number of months: 30 * 12 = 360\nPlugged these values into the amortizing mortgage formula and solved for the monthly payment.\n",
    "actual_answer": 1263.19
  },
  {
    "question": "If I get a loan for $300,000 at 2.99% interest for 30 years, with monthly payments that fully pay it off, how much will I still owe after 5 years?",
    "expected_answer": 266670.41,
    "ai_response": "Let's break down the problem:\n\n- Loan amount: $300,000\n- Annual interest rate: 2.99%\n- Loan term: 30 years\n- Payments: Monthly, fully amortizing (meaning after 30 years, balance is $0)\n- Question: What is the remaining principal after 5 years?\n\nSteps:\n\n1. Calculate the monthly payment using the mortgage formula:\n   \\[\n   M = P \\times \\frac{r(1 + r)^n}{(1 + r)^n - 1}\n   \\]\n   Where:\n   - \\(M\\) is the monthly payment,\n   - \\(P\\) is the loan amount,\n   - \\(r\\) is the monthly interest rate,\n   - \\(n\\) is the total number of payments.\n\n2. Calculate the remaining principal after 5 years (which is after 60 payments).\n\nLet's do the math in steps.\n\n### Step 1: Monthly payment calculation\n\n- Annual interest rate = 2.99%, so monthly interest rate \\( r = \\frac{2.99}{12} / 100 = 0.00249167 \\)\n- Total payments = 30 years \u00d7 12 = 360\n\nPlug into the formula:\n\n\\[\nM = 300000 \\times \\frac{0.00249167(1 + 0.00249167)^{360}}{(1 + 0.00249167)^{360} - 1}\n\\]\n\n### Step 2: Remaining balance formula\n\nThe remaining principal after \\( k \\) payments can be calculated as:\n\\[\nP_k = P (1 + r)^k - M \\left( \\frac{(1 + r)^k - 1}{r} \\right)\n\\]\nwhere \\( k = 60 \\).\n\nLet's run the calculation using Python for accuracy.\n# Mortgage parameters\nP = 300000  # Principal / loan amount\nannual_rate = 2.99 / 100  # Convert to percentage\nr = annual_rate / 12  # Monthly interest rate\nn = 360  # Total payments (30 years)\nk = 60   # Number of payments made after 5 years\n\n# Monthly payment calculation\nM = P * (r * (1 + r)**n) / ((1 + r)**n - 1)\n\n# Remaining principal after k payments\nremaining_principal = P * (1 + r)**k - M * (((1 + r)**k - 1) / r)\nround(remaining_principal, 2)  # Round to 2 decimals for cents\n\nTo solve this, I first calculated the monthly payment using the standard mortgage payment formula for a loan of $300,000, an annual interest rate of 2.99%, and a 30-year (360 months) term. The monthly payment ensures the loan is fully paid off at the end of the term.\n\nThen, I found the remaining principal after 5 years (which is 60 monthly payments) using the remaining balance formula for an amortizing loan. This calculates how much of the original principal is still left after you\u2019ve made 60 payments.\n\nThe result is that after 5 years, you would still owe @@@266670.41@@@ on your mortgage.\n",
    "actual_answer": 266670.41
  },
  {
    "question": "For a loan of $300,000 with 2.99% interest over 30 years, with monthly payments that pay off the loan completely, how much of the 30th payment goes toward interest?",
    "expected_answer": 708.91,
    "ai_response": "To answer this question, let's break it down step by step:\n\n1. **Monthly Interest Rate Calculation:**  \nThe annual interest rate is 2.99%, so the monthly interest rate is 2.99% / 12.\n\n2. **Monthly Payment Calculation:**  \nFor a fixed-rate mortgage, the monthly payment (P) is calculated by the formula:\n\\[ \nP = \\frac{r \\cdot L}{1 - (1 + r)^{-n}}\n\\]\nWhere:  \n- \\(r\\) = monthly interest rate  \n- \\(L\\) = loan amount ($300,000)  \n- \\(n\\) = total number of payments (360 for 30 years)\n\n3. **Balance after 29 Payments:**  \nThe balance after 29 payments can be found using the remaining loan formula.\n\n4. **Interest on 30th Payment:**  \nThe interest portion of a payment is always the monthly interest rate times the remaining balance just before the payment.\n\nLet's walk through the calculations:\n\n### Step 1: Monthly Interest Rate\n\n\\[\n\\text{Monthly Interest Rate} = \\frac{2.99}{100 \\times 12} = 0.00249167\n\\]\n\n### Step 2: Monthly Payment\n\n\\[\nP = \\frac{0.00249167 \\times 300000}{1 - (1+0.00249167)^{-360}}\n\\]\n\nLet me do the calculation in Python to ensure accuracy.\n# Given values\r\nL = 300000\r\nannual_rate = 2.99 / 100  # Convert % to decimal\r\nmonthly_rate = annual_rate / 12\r\nn = 30 * 12  # 30 years, 12 months per year\r\n\r\n# Calculate monthly payment\r\nP = (monthly_rate * L) / (1 - (1 + monthly_rate) ** -n)\r\n\r\n# Calculate remaining balance after 29 years (348 payments)\r\ndef remaining_balance(P, L, monthly_rate, payments_made, n):\r\n    return L * ((1 + monthly_rate) ** payments_made) - (P * (((1 + monthly_rate) ** payments_made - 1) / monthly_rate))\r\n\r\n# Find balance before the 360th payment (i.e., after 359 payments)\r\npayments_made = 359\r\nbalance_before_360 = remaining_balance(P, L, monthly_rate, payments_made, n)\r\n\r\n# Interest portion of the 360th (30th year, 12th month) payment\r\ninterest_360 = balance_before_360 * monthly_rate\r\ninterest_360_rounded = round(interest_360, 2)\r\ninterest_360_rounded\nThe portion of the 30th (360th) mortgage payment that goes toward interest is only @@@3.14@@@. \n\nHere's how this works: By your final payment of a 30-year fixed-rate mortgage, almost the entire payment goes to principal, with only a very small amount going to interest\u2014just the interest on what little balance remains right before that last payment. In this case, only $3.14 goes to interest in the final (30th year, 12th month) payment.\n",
    "actual_answer": 3.14
  },
  {
    "question": "What's the incremental interest rate (cost of borrowing) on an additional $20,000 if I go from a $300,000 loan at 2.99% to a $320,000 loan at 3.51%, both for 30 years? Can you solve for the interest rate that would give the same payment difference on just the $20,000?",
    "expected_answer": 10.0,
    "ai_response": "Absolutely! The way to look at this is:\n\n1. Calculate the monthly payment for a $300,000 loan at 2.99% for 30 years.\n2. Calculate the monthly payment for a $320,000 loan at 3.51% for 30 years.\n3. The difference in these payments is the extra amount you pay monthly for borrowing an extra $20,000.\n4. Now, figure out the interest rate on a $20,000 loan (over 30 years) that would result in a monthly payment equal to this difference.\n\nLet's do the math:\n\n### Step 1: $300,000 loan at 2.99%\n\nThe formula for monthly mortgage payment is:\n\n\\[\nM = \\frac{P \\times r \\times (1+r)^n}{(1+r)^n-1}\n\\]\n- P = principal\n- r = monthly interest rate\n- n = number of payments\n\nFor $300,000 at 2.99%:\n- P = 300,000\n- r = 2.99% / 12 / 100 = 0.0024917\n- n = 360\n\n### Step 2: $320,000 loan at 3.51%\n\n- P = 320,000\n- r = 3.51% / 12 / 100 = 0.002925\n- n = 360\n\n### Step 3: Find the monthly payment difference\n\n### Step 4: Find the interest rate (i) for $20,000 with that payment over 360 months\n\nI'll do this calculation using Python for accuracy.\nfrom scipy.optimize import fsolve\r\n\r\n# Monthly payment formula\r\ndef monthly_payment(P, annual_rate, n):\r\n    r = annual_rate / 12 / 100\r\n    return (P * r * (1 + r)**n) / ((1 + r)**n - 1)\r\n\r\n# Data\r\nloan1_principal = 300000\r\nloan1_rate = 2.99\r\nloan2_principal = 320000\r\nloan2_rate = 3.51\r\nn = 360\r\n\r\n# Monthly payments\r\nmp_loan1 = monthly_payment(loan1_principal, loan1_rate, n)\r\nmp_loan2 = monthly_payment(loan2_principal, loan2_rate, n)\r\nmp_difference = mp_loan2 - mp_loan1\r\n\r\n# Now, solve for the interest rate that matches this monthly payment on $20,000\r\ndef find_interest_rate(rate_guess):\r\n    # rate_guess is the annual rate in percent\r\n    return monthly_payment(20000, rate_guess, n) - mp_difference\r\n\r\n# Use a reasonable starting guess for the interest rate\r\nincremental_rate = fsolve(find_interest_rate, 6)[0]\r\nincremental_rate_rounded = round(incremental_rate, 4)\r\n\r\nmp_loan1, mp_loan2, mp_difference, incremental_rate_rounded\r\n\nHere's how it works out:\n\n- The monthly payment for a $300,000 loan at 2.99% is about $1263.19.\n- The monthly payment for a $320,000 loan at 3.51% is about $1438.73.\n- The monthly difference, which is what you pay for the additional $20,000, is about $175.54 per month.\n\nTo find what interest rate on $20,000 (over 30 years) would yield that same $175.54 monthly payment, we solve for the rate. The answer is approximately 10.0014%.\n\nSo the effective incremental cost of borrowing that additional $20,000 is @@@10.0014@@@.\n",
    "actual_answer": 10.0014
  },
  {
    "question": "I am comparing two ways to borrow the same total amount over 30 years with monthly payments: Option A: Two separate loans: one for $300,000 at 2.99%, and another for $150,000 at 6.75%. Option B: One big loan for $450,000 at 4.22%. Which one ends up costing less in the long run (Option A minus Option B)",
    "expected_answer": 10893.04,
    "ai_response": "Let's break down the problem:\n\n- Both options span 30 years (360 months).\n- Each option borrows a total of $450,000, just structured differently.\n\n### Step 1: Find the monthly payments for each loan/option\n\n#### Mortgage Formula\nThe monthly payment formula for a fixed-rate mortgage:\n\n\\[\nM = \\frac{P r (1 + r)^n}{(1 + r)^n - 1}\n\\]\n\nWhere:\n- \\( M \\) = monthly payment\n- \\( P \\) = principal\n- \\( r \\) = monthly interest rate (annual rate / 12)\n- \\( n \\) = number of payments (months)\n\n#### Option A\n\n**Loan 1**: $300,000 at 2.99%\n- \\( P_1 = 300000 \\)\n- \\( r_1 = \\frac{2.99}{100} / 12 \\)\n- \\( n = 360 \\)\n\n**Loan 2**: $150,000 at 6.75%\n- \\( P_2 = 150000 \\)\n- \\( r_2 = \\frac{6.75}{100} / 12 \\)\n\n#### Option B\n\nOne loan: $450,000 at 4.22%\n- \\( P_B = 450000 \\)\n- \\( r_B = \\frac{4.22}{100} / 12 \\)\n\n### Step 2: Calculate the total cost (total payments over 30 years)\n\nI'll use Python to do this calculation step by step.\n# Mortgage payment formula\ndef monthly_payment(P, annual_rate, n_months):\n    r = annual_rate / 100 / 12\n    M = P * r * (1 + r) ** n_months / ((1 + r) ** n_months - 1)\n    return M\n\nn_months = 30 * 12\n\n# Option A\nloan1_payment = monthly_payment(300000, 2.99, n_months)\nloan2_payment = monthly_payment(150000, 6.75, n_months)\noptionA_payment_total = (loan1_payment + loan2_payment) * n_months\n\n# Option B\noptionB_payment = monthly_payment(450000, 4.22, n_months)\noptionB_payment_total = optionB_payment * n_months\n\n# Difference (A minus B)\ndifference = optionA_payment_total - optionB_payment_total\n\n(\n    round(optionA_payment_total),\n    round(optionB_payment_total),\n    round(difference)\n)\nLet's break it down:\n\n- Over 30 years, Option A (two separate loans) will cost approximately $804,993 in total payments.\n- Option B (one big loan) will cost about $794,100 in total payments.\n\nSo, Option A costs more. The difference (Option A minus Option B) is a loss of $10,893 over the life of the loan.\n\nFinal answer: @@@10893@@@\n",
    "actual_answer": 10893.0
  },
  {
    "question": "I took out a mortgage for $300,000, 5 years ago. It\u2019s a 30-year loan with a 3.51% interest rate. Today, I could get a new 30-year mortgage at 2.99% interest, but I\u2019d have to pay a penalty of 2% of what I still owe, plus another $3,000 in fees. (Fees and penalties are paid out of pocket.) If I weigh all future payments and costs as if they happened today, how much would I save over the term of the loan if I refinance (output loss as a negative number)?",
    "expected_answer": 7224.15,
    "ai_response": "Let's break down the problem step by step:\n\n### Step 1: Original loan parameters\n- Loan amount: $300,000\n- 30-year term (360 months)\n- 3.51% interest rate\n- 5 years (60 payments) have been made\n\n### Step 2: Calculate the balance remaining after 5 years\n\nWe calculate the original monthly payment and then the remaining balance after 5 years.\n\n#### Monthly payment formula:\n\\[\nP = \\frac{L \\cdot r \\cdot (1+r)^n}{(1+r)^n - 1}\n\\]\nWhere:\n- \\(L\\) = loan amount ($300,000)\n- \\(r\\) = monthly interest rate (3.51%/12)\n- \\(n\\) = number of periods (360)\n\n#### Step 3: New loan parameters\n- New interest rate: 2.99%\n- New term: 30 years (360 months)\n- Refinance fees: $3,000\n- Penalty: 2% of remaining balance\n\n#### Step 4: Dollar value of refinance penalty and total fees\n\n#### Step 5: Refinance scenario: calculate new monthly payment, total payments over new loan term\n\n#### Step 6: Compare totals\u2014including cash paid out-of-pocket\n\n#### Step 7: Calculate Net Present Value of all future payments (assuming discount rate = new interest rate, 2.99%)\n\nLet's perform the calculations in Python, step by step.\n# Given values\r\noriginal_loan = 300000\r\noriginal_interest_rate = 0.0351 # annual\r\nnew_interest_rate = 0.0299 # annual\r\nyears_total = 30\r\nyears_paid = 5\r\nn_total_payments = years_total * 12\r\nn_payments_made = years_paid * 12\r\nremaining_payments = n_total_payments - n_payments_made\r\n\r\n# monthly rates\r\nmonthly_ir_original = original_interest_rate / 12\r\nmonthly_ir_new = new_interest_rate / 12\r\n\r\n# Original monthly payment calculation\r\ndef calc_monthly_payment(L, r, n):\r\n    return L * (r * (1 + r) ** n) / ((1 + r) ** n - 1)\r\n\r\noriginal_monthly_payment = calc_monthly_payment(original_loan, monthly_ir_original, n_total_payments)\r\n\r\n# Remaining balance after 5 years of payments\r\ndef calc_remaining_balance(P, r, n, m):\r\n    # P = monthly payment, r = monthly rate, n = total payments, m = payments made\r\n    # Formula from amortization equation\r\n    remaining = P * ((1 - (1 + r) ** -(n - m)) / r)\r\n    return remaining\r\n\r\nremaining_balance = calc_remaining_balance(original_monthly_payment, monthly_ir_original, n_total_payments, n_payments_made)\r\n\r\n# Refinancing Penalty and Fees\r\npenalty = 0.02 * remaining_balance\r\nfees = 3000\r\ntotal_fees = penalty + fees\r\n\r\n# New monthly payment (full 30 years at new rate, with current balance)\r\nnew_monthly_payment = calc_monthly_payment(remaining_balance, monthly_ir_new, n_total_payments)\r\n\r\n# NPV of future payments (assuming discount rate is new loan rate)\r\ndef npv_of_payments(payment, n, r):\r\n    npv = payment * (1 - (1 + r) ** -n) / r\r\n    return npv\r\n\r\n# Calculate NPV of ORIGINAL future payments for remaining 25 years\r\nnpv_original = npv_of_payments(original_monthly_payment, remaining_payments, monthly_ir_new)\r\n\r\n# Calculate NPV of REFINANCED future payments (new loan for 30 years)\r\nnpv_refinanced = npv_of_payments(new_monthly_payment, n_total_payments, monthly_ir_new)\r\n\r\n# Out of pocket fees (paid today, value doesn't get discounted)\r\ntotal_cost_refinance = npv_refinanced + total_fees\r\n\r\n# Total \"cost\" if stick with current loan = NPV of remaining payments\r\n# Total \"cost\" if refinance = NPV of new payments + penalty/fees\r\nsavings = npv_original - total_cost_refinance\r\n\r\n# For output clarity, round to nearest dollar\r\noriginal_monthly_payment, remaining_balance, penalty, fees, new_monthly_payment, npv_original, total_cost_refinance, savings = (\r\n    round(original_monthly_payment), round(remaining_balance), round(penalty), round(fees), round(new_monthly_payment),\r\n    round(npv_original), round(total_cost_refinance), round(savings)\r\n)\r\n\r\n(original_monthly_payment, remaining_balance, penalty, fees, new_monthly_payment, npv_original, total_cost_refinance, savings)\r\n\nLet's break down the results:\n\n- Your original monthly payment was $1,349.\n- After 5 years, your remaining mortgage balance is $269,137.\n- To refinance, you'd pay a penalty of $5,383 (2% of balance) and another $3,000 in fees, for a total of $8,383.\n- If you refinance, your new monthly payment would drop to $1,133.\n- The net present value (NPV) of all your future payments if you keep your current loan is $284,744 (meaning if you paid them all today at the new interest rate, that's what they'd add up to).\n- The NPV of all your refinancing costs (including all new payments and fees paid now) is $277,520.\n\nSo, by refinancing (including the cost of penalty and fees), you save about $7,224 when valuing every payment as if made today.\n\nFinal answer: @@@7224@@@\n",
    "actual_answer": 7224.0
  },
  {
    "question": "If I borrow $250,000 at an annual interest rate of 3.25% for 20 years, and I make monthly payments that fully pay off the loan by the end, how much will I have to pay each month?",
    "expected_answer": 1417.99,
    "ai_response": "To find out how much you will have to pay each month for a mortgage of $250,000 at an annual interest rate of 3.25% for 20 years, we use the standard fixed-rate mortgage formula:\n\n\\[\nM = P \\frac{r(1+r)^n}{(1+r)^n - 1}\n\\]\n\nWhere:\n- \\( M \\) = monthly payment\n- \\( P \\) = loan amount ($250,000)\n- \\( r \\) = monthly interest rate (annual rate divided by 12)\n- \\( n \\) = number of monthly payments (20 years * 12 months = 240)\n\nLet's calculate step by step:\n\n1. Annual interest rate = 3.25% \u2192 Monthly interest rate = 0.0325 / 12 \u2248 0.00270833\n2. Number of payments = 20 * 12 = 240\n\nPlug the values in:\n\n\\[\nM = 250000 \\times \\frac{0.00270833 \\times (1 + 0.00270833)^{240}}{(1 + 0.00270833)^{240} - 1}\n\\]\n\nLet's calculate the value step by step using Python.\nP = 250000\nannual_rate = 0.0325\nr = annual_rate / 12\nn = 20 * 12\n\nM = P * (r * (1 + r) ** n) / ((1 + r) ** n - 1)\nM\nTo pay off a $250,000 loan at a 3.25% annual interest rate over 20 years, your monthly payment will be @@@1417.99@@@.\n\nHere's how I got it:\n- The loan term is 240 months (20 years x 12).\n- The monthly interest rate is 0.0325 / 12 = 0.00270833.\n- Plugging these into the standard mortgage formula gives approximately 1417.99 per month.\n",
    "actual_answer": 1417.99
  },
  {
    "question": "If I get a loan for $250,000 at 3.25% interest for 20 years, with monthly payments that fully pay it off, how much will I still owe after 3 years?",
    "expected_answer": 222023.53,
    "ai_response": "Let's break down your question:\n\n- **Loan amount (principal):** $250,000\n- **Annual interest rate:** 3.25%\n- **Loan term:** 20 years (240 months)\n- **Payments:** Monthly, fully amortizing\n\nYou want to know how much you will still owe after 3 years (which is after 36 monthly payments).\n\n### Steps:\n\n1. **Calculate monthly payment** using the amortization formula.\n2. **Find remaining balance after 36 payments** using the amortization formula for the remaining loan.\n\nLet me show you the calculations:\n\n**1. Monthly interest rate:**\n- 3.25% annually \u2192 0.0325/12 per month\n\n**2. Number of payments:**\n- Total: 20 years \u00d7 12 = 240 months\n\n**3. Monthly payment formula:**\n\n\\[\nM = P \\frac{r(1 + r)^n}{(1 + r)^n - 1}\n\\]\n\nWhere:  \nM = monthly payment  \nP = principal = 250000  \nr = monthly rate = 0.0325 / 12  \nn = number of payments = 240\n\n**4. After 36 payments, what's the remaining balance?**\n\nThe remaining balance after \\( k \\) payments is:\n\n\\[\nB = P \\frac{(1 + r)^n - (1 + r)^k}{(1 + r)^n - 1}\n\\]\n\nWhere \\( k = 36 \\).\n\nI\u2019ll calculate this now:\n\n```python\n# Variables\nP = 250000\nannual_rate = 0.0325\nmonthly_rate = annual_rate / 12\nn = 240\nk = 36\n\n# Calculate remaining balance\nremaining_balance = P * ((1 + monthly_rate)**n - (1 + monthly_rate)**k) / ((1 + monthly_rate)**n - 1)\nremaining_balance_rounded = round(remaining_balance, 2)\nremaining_balance_rounded\n```\n\n# Performing the calculations\r\nP = 250000\r\nannual_rate = 0.0325\r\nmonthly_rate = annual_rate / 12\r\nn = 240\r\nk = 36\r\n\r\n# Calculate remaining balance after 3 years (36 payments)\r\nremaining_balance = P * ((1 + monthly_rate)**n - (1 + monthly_rate)**k) / ((1 + monthly_rate)**n - 1)\r\nremaining_balance_rounded = round(remaining_balance, 2)\r\nremaining_balance_rounded\nAfter 3 years of monthly payments, you will still owe about $222,023.53 on your original $250,000 loan. This is because, in the early years of a mortgage, most of your payments go toward interest rather than the principal balance.\n\nSo, your remaining balance after 3 years will be: @@@222023.53@@@\n",
    "actual_answer": 222023.53
  },
  {
    "question": "For a loan of $250,000 with 3.25% interest over 20 years, with monthly payments that pay off the loan completely, how much of the 24th payment goes toward interest?",
    "expected_answer": 629.53,
    "ai_response": "Let's break down the process:\n\n1. **Loan amount:** $250,000  \n2. **Interest rate:** 3.25% annual (which is 0.0325 / 12 = 0.0027083 monthly)  \n3. **Term:** 20 years (which is 240 months)\n\n**Step 1: Find the monthly payment**\n\nThe monthly mortgage payment formula is:\n\\[\nP = \\frac{Lr(1+r)^n}{(1+r)^n-1}\n\\]\nWhere:\n- \\(L\\) is the loan amount ($250,000)\n- \\(r\\) is the monthly interest rate (0.0027083)\n- \\(n\\) is the number of payments (240)\n\n**Step 2: Find remaining balance just before the 24th payment**\n\nThe remaining balance after \\(k\\) payments is:\n\\[\nB_k = L(1+r)^k - P\\frac{(1+r)^k-1}{r}\n\\]\n\n**Step 3: Find interest portion of the 24th payment**\n\nThe interest part is just the remaining principal before the payment times the monthly rate.\n\nLet me calculate step-by-step using Python:\n# Given values\r\nL = 250000  # loan amount\r\nannual_rate = 0.0325\r\nmonthly_rate = annual_rate / 12\r\nn = 240  # total number of payments\r\nk = 23  # after 23 payments, right before 24th payment\r\n\r\n# Monthly payment calculation\r\nP = L * (monthly_rate * (1 + monthly_rate) ** n) / ((1 + monthly_rate) ** n - 1)\r\n\r\n# Remaining balance before 24th payment\r\nbalance_before_24 = L * (1 + monthly_rate) ** k - P * ((1 + monthly_rate) ** k - 1) / monthly_rate\r\n\r\n# Interest portion of 24th payment\r\ninterest_24th = balance_before_24 * monthly_rate\r\nround(interest_24th, 2)\nThe interest portion of the 24th payment is calculated by multiplying the remaining balance just before the 24th payment by the monthly interest rate. Here\u2019s the summary of the calculations:\n\n- The monthly payment is calculated using the standard mortgage formula.\n- The balance remaining after 23 payments is found using the balance formula.\n- The interest on the 24th payment is the remaining balance times the monthly interest rate.\n\nSo, the portion of the 24th payment that goes toward interest is @@@629.53@@@.\n",
    "actual_answer": 629.53
  },
  {
    "question": "What's the incremental interest rate (cost of borrowing) on an additional $20,000 if I go from a $250,000 loan at 3.25% to a $270,000 loan at 3.75%, both for 20 years? Can you solve for the interest rate that would give the same payment difference on just the $20,000?",
    "expected_answer": 9.22,
    "ai_response": "Let's break this problem down step by step:\n\n1. **Calculate the monthly payment for the $250,000 loan at 3.25% for 20 years.**\n2. **Calculate the monthly payment for the $270,000 loan at 3.75% for 20 years.**\n3. **Find the difference in monthly payments between the two loans.**\n4. **Calculate the interest rate (\"incremental cost of borrowing\") at which a $20,000 loan would generate the same difference in monthly payment, if it were taken out for 20 years.**\n\nLet\u2019s start the calculations:\n\n### Step 1: Calculate payment for $250,000 at 3.25% for 20 years\n\nThe formula for a fixed-rate mortgage payment is:\n\\[ P = \\frac{L \\cdot r(1 + r)^n}{(1 + r)^n - 1} \\]\nWhere:\n- \\(P\\) is the monthly payment\n- \\(L\\) is the loan amount\n- \\(r\\) is the monthly interest rate (annual rate / 12)\n- \\(n\\) is the total number of payments (years * 12)\n\n#### $250,000 at 3.25%\n- \\(L = 250000\\)\n- yearly rate = 3.25% \u2192 monthly rate = 0.0325/12\n- \\(n = 20 \\times 12 = 240\\)\n\n### Step 2: Calculate payment for $270,000 at 3.75% for 20 years\n\n- \\(L = 270000\\)\n- yearly rate = 3.75% \u2192 monthly rate = 0.0375/12\n- \\(n = 20 \\times 12 = 240\\)\n\n### Step 3: Find the difference in monthly payments\n\n### Step 4: Solve for the interest rate on a $20,000 loan for 20 years giving the same payment difference\n\nLet's do the calculations:\n\n```python\nimport numpy as np\n\ndef monthly_payment(L, annual_rate, years):\n    r = annual_rate / 12\n    n = years * 12\n    payment = L * (r * (1 + r)**n) / ((1 + r)**n - 1)\n    return payment\n\n# Step 1: $250,000 at 3.25%\npayment_250k = monthly_payment(250000, 0.0325, 20)\n\n# Step 2: $270,000 at 3.75%\npayment_270k = monthly_payment(270000, 0.0375, 20)\n\n# Step 3: Difference\ndifference = payment_270k - payment_250k\n\n# Step 4: Solve for the rate on a $20,000 loan that gives the same payment for 20 years\n# We'll use numpy's financial solver to find the rate\nfrom scipy.optimize import fsolve\n\ndef payment_diff_rate(r):\n    # r is monthly rate\n    n = 20 * 12\n    L = 20000\n    payment = L * (r * (1 + r)**n) / ((1 + r)**n - 1)\n    return payment - difference\n\n# initial guess: a little higher than current mortgage (say 0.0075 monthly = 9% yearly)\nrate_solution = fsolve(payment_diff_rate, 0.0075)[0]\nincremental_annual_rate = rate_solution * 12\n\n(payment_250k, payment_270k, difference, incremental_annual_rate)\n```\n\nLet me run the calculations.\nimport numpy as np\nfrom scipy.optimize import fsolve\n\ndef monthly_payment(L, annual_rate, years):\n    r = annual_rate / 12\n    n = years * 12\n    payment = L * (r * (1 + r)**n) / ((1 + r)**n - 1)\n    return payment\n\n# Step 1: $250,000 at 3.25%\npayment_250k = monthly_payment(250000, 0.0325, 20)\n\n# Step 2: $270,000 at 3.75%\npayment_270k = monthly_payment(270000, 0.0375, 20)\n\n# Step 3: Difference\ndifference = payment_270k - payment_250k\n\n# Step 4: Solve for the rate on a $20,000 loan that gives the same payment for 20 years\ndef payment_diff_rate(r):\n    # r is monthly rate\n    n = 20 * 12\n    L = 20000\n    payment = L * (r * (1 + r)**n) / ((1 + r)**n - 1)\n    return payment - difference\n\n# initial guess: a little higher than current mortgage (say 0.0075 monthly = 9% yearly)\nrate_solution = fsolve(payment_diff_rate, 0.0075)[0]\nincremental_annual_rate = rate_solution * 12\n\n(payment_250k, payment_270k, difference, incremental_annual_rate)\n\nLet's review the results:\n\n1. The monthly payment for a $250,000 loan at 3.25% over 20 years is about $1,417.99.\n2. The monthly payment for a $270,000 loan at 3.75% over 20 years is about $1,600.80.\n3. The difference between the two payments is about $182.81 per month.\n\nTo determine the incremental interest rate (cost of borrowing) on the extra $20,000, I solved for the interest rate that would cause a new $20,000, 20-year loan to have a monthly payment of $182.81. \n\nThis interest rate is approximately 9.22% per year.\n\nSo, the incremental annual interest rate is @@@0.09221881985900132@@@. \n\nThis tells you that, because your entire loan rate goes up when you borrow the extra $20,000, the cost of the additional borrowing is **much higher** than the standard rates you see quoted for larger mortgages.\n",
    "actual_answer": 0.09221881985900132
  },
  {
    "question": "I am comparing two ways to borrow the same total amount over 20 years with monthly payments: Option A: Two separate loans: one for $250,000 at 3.25%, and another for $120,000 at 5.50%. Option B: One big loan for $350,000 at 3.95%. Which one ends up costing less in the long run (Option A minus Option B)",
    "expected_answer": 31615.91,
    "ai_response": "Let's break down the costs of both loan options over 20 years (which is 240 monthly payments):\n\n**Option A:**\n- Loan 1: $250,000 at 3.25% for 20 years\n- Loan 2: $120,000 at 5.50% for 20 years\n\nWe'll find the monthly payments for both, multiply by 240, and sum to get the total amount paid over 20 years.\n\n**Option B:**  \n- Loan: $350,000 at 3.95% for 20 years\n\nWe'll do the same calculation: find the monthly payment, multiply by 240 for the total paid.\n\nFinally, we'll subtract Option B's total paid from Option A's total paid to see the long-term cost difference (Option A minus Option B).\n\nLet's calculate:\n\n### Step 1: Monthly Payment Formula\nThe monthly payment for a fixed-rate loan is:\n\\[ M = P \\frac{r(1+r)^n}{(1+r)^n - 1} \\]\nWhere:\n- \\( M \\) = monthly payment\n- \\( P \\) = principal\n- \\( r \\) = monthly interest rate (annual rate divided by 12)\n- \\( n \\) = total number of monthly payments\n\nLet's compute the totals for both scenarios.\n# Loan parameters\nyears = 20\nn_payments = years * 12\n\n# Option A: Two loans\nP1 = 250000\nannual_rate1 = 0.0325\nr1 = annual_rate1 / 12\n\nP2 = 120000\nannual_rate2 = 0.055\nr2 = annual_rate2 / 12\n\n# Option B: One loan\nP3 = 350000\nannual_rate3 = 0.0395\nr3 = annual_rate3 / 12\n\n# Monthly payment formula\ndef monthly_payment(P, r, n):\n    return P * (r * (1 + r)**n) / ((1 + r)**n - 1)\n\n# Calculate monthly payments\nM1 = monthly_payment(P1, r1, n_payments)\nM2 = monthly_payment(P2, r2, n_payments)\nM3 = monthly_payment(P3, r3, n_payments)\n\n# Total paid over the life of the loans\ntotal_A = (M1 + M2) * n_payments\ntotal_B = M3 * n_payments\n\n# Difference (Option A minus Option B)\ndifference = round(total_A - total_B)\ndifference\nLet's get an explanation for these results.\n\n- For Option A, the two separate loans (added together) result in a higher total cost than the single larger loan at the mid-rate.\n- For Option B, the single loan at 3.95% results in a lower total paid interest over 20 years.\n\nSo, the difference (Option A TOTAL paid minus Option B TOTAL paid) is about 31,616.\n\n@@@31616@@@\n",
    "actual_answer": 31616.0
  },
  {
    "question": "I took out a mortgage for $250,000, 3 years ago. It\u2019s a 20-year loan with a 3.75% interest rate. Today, I could get a new 25-year mortgage at 3.25% interest, but I\u2019d have to pay a penalty of 2% of what I still owe, plus another $2,500 in fees. (Fees and penalties are rolled into the new loan.) If I weigh all future payments and costs as if they happened today, how much would I save over the term of the loan if I refinance (output loss as a negative number)?",
    "expected_answer": 2895.76,
    "ai_response": "Let's break down the problem step by step:  \n  \n**Step 1: What do you still owe on your current mortgage after 3 years?**  \n- Original loan = $250,000  \n- Term = 20 years  \n- Interest rate = 3.75%  \n\nWe'll calculate your remaining balance after 3 years.\n\n**Step 2: What are the fees and penalty for refinancing?**  \n- Penalty is 2% of remaining principal  \n- Additional fees = $2,500  \n- These are rolled into the new mortgage\n\n**Step 3: What are your new loan terms?**  \n- New term = 25 years  \n- New rate = 3.25%  \n- New principal = remaining balance + penalty + fees\n\n**Step 4: Calculate the present value (today's value) of all future payments for both routes (stay vs. refi).**  \n- We'll use each loan's interest rate as the appropriate \u201cdiscount rate\u201d to bring future payments to present dollars.\n- The difference is your total savings (or loss).\n\nLet\u2019s run the numbers!\n\n---\n\n### Step 1: Remaining Balance after 3 Years\n\nFormula for remaining balance on a fixed-rate mortgage:\n\\[\nB = P \\frac{(1+r)^n - (1+r)^p}{(1+r)^n - 1}\n\\]\nWhere:  \n- \\(P\\) = original principal  \n- \\(r\\) = monthly interest rate  \n- \\(n\\) = total payments  \n- \\(p\\) = payments made  \n\nLet's do the math in Python:\n# Original loan terms\r\noriginal_principal = 250000\r\nannual_rate = 0.0375\r\nterm_years = 20\r\nterm_months = term_years * 12\r\npayments_made = 3 * 12\r\nmonthly_rate = annual_rate / 12\r\n\r\n# Monthly payment formula for a fixed mortgage\r\nmonthly_payment = original_principal * (monthly_rate * (1 + monthly_rate) ** term_months) / ((1 + monthly_rate) ** term_months - 1)\r\n\r\n# Remaining balance formula\r\nremaining_balance = original_principal * ((1 + monthly_rate) ** term_months - (1 + monthly_rate) ** payments_made) / ((1 + monthly_rate) ** term_months - 1)\r\n\r\nmonthly_payment, remaining_balance\nYour original mortgage payment is about $1,482 per month. After 3 years, you still owe about $223,335.\n\n### Step 2: Fees and Penalty\n\n- Penalty = 2% of $223,335 = $4,467\n- Added fees = $2,500\n- Total added = $4,467 + $2,500 = $6,967\n\nNew mortgage principal = $223,335 (balance) + $6,967 (fees+penalty) = $230,302\n\n### Step 3: New Loan Terms\n\n- New principal: $230,302\n- New term: 25 years (300 months)\n- New rate: 3.25% per year = 0.002708 monthly\n\nLet's find the new monthly payment:\n# New loan terms after refinancing\r\nnew_principal = remaining_balance + 0.02 * remaining_balance + 2500\r\nnew_annual_rate = 0.0325\r\nnew_term_months = 25 * 12\r\nnew_monthly_rate = new_annual_rate / 12\r\n\r\n# New monthly payment\r\nnew_monthly_payment = new_principal * (new_monthly_rate * (1 + new_monthly_rate) ** new_term_months) / ((1 + new_monthly_rate) ** new_term_months - 1)\r\nnew_monthly_payment, new_principal\nWith the new mortgage (including rolled-in fees and penalty), you would pay about $1,122 per month for 25 years.\n\n### Step 4: Calculate Present Value of All Payments\n\nNow we\u2019ll find the present value (PV) of all future mortgage payments for both options:\n\n- **Original mortgage:** 17 years of remaining payments at $1,482/month  \n    (use 3.75% as discount rate)\n- **Refinanced mortgage:** 25 years of payments at $1,122/month  \n    (use 3.25% as discount rate)\n\nLet\u2019s calculate those present values to determine the net savings or loss.\nimport numpy as np\n\n# PV formula for an annuity: PV = PMT * [1 - (1 + r)^-n] / r\n# Original mortgage\npv_old = monthly_payment * (1 - (1 + monthly_rate) ** -(term_months - payments_made)) / monthly_rate\n\n# New (refinanced) mortgage\npv_new = new_monthly_payment * (1 - (1 + new_monthly_rate) ** -new_term_months) / new_monthly_rate\n\n# Savings: old PV - new PV (positive = save money, negative = spend more)\nsavings = pv_old - pv_new\npv_old, pv_new, savings\nThe present value of future payments remaining on your current loan is about $223,335. The present value of all payments (including rolled-in fees and penalty) on the new refinance loan is about $230,302.\n\nSo, if you refinance, you would actually **lose** money overall, mainly due to the fees, penalty, and longer repayment period. The loss (in today\u2019s dollars) is:\n\n@@@-6966.697068530775@@@\n\nThis means you would lose about $6,967 by refinancing in this case.\n",
    "actual_answer": -6966.697068530775
  },
  {
    "question": "If I borrow $400,000 at an annual interest rate of 3.85% for 25 years, and I make monthly payments that fully pay off the loan by the end, how much will I have to pay each month?",
    "expected_answer": 2078.36,
    "ai_response": "To solve for the monthly payment on a fixed-rate mortgage, we use the standard loan amortization formula:\n\n\\[\nM = \\frac{P \\cdot r \\cdot (1+r)^n}{(1+r)^n-1}\n\\]\n\nWhere:\n- \\(M\\) = monthly payment\n- \\(P\\) = loan principal (\\$400,000)\n- \\(r\\) = monthly interest rate (annual rate / 12 = 0.0385/12)\n- \\(n\\) = total number of monthly payments (25 years \\(\\times\\) 12 months = 300)\n\nLet's calculate each step:\n\n1. Monthly interest rate (\\(r\\)):\n   \\[\n   r = 0.0385 / 12 \\approx 0.00320833\n   \\]\n\n2. Number of payments (\\(n\\)):  \n   \\[\n   n = 25 \\times 12 = 300\n   \\]\n\nPlug into the formula:\n\n\\[\nM = \\frac{400000 \\times 0.00320833 \\times (1+0.00320833)^{300}}{(1+0.00320833)^{300}-1}\n\\]\n\nLet's compute the answer using Python to avoid mistakes.\n# Parameters\r\nP = 400000  # loan amount\r\nannual_rate = 0.0385\r\nr = annual_rate / 12\r\nn = 25 * 12  # 25 years * 12 months\r\n\r\n# Monthly payment formula\r\nM = P * r * (1 + r)**n / ((1 + r)**n - 1)\r\nround(M, 2)  # Round to 2 decimal places, as mortgage payments are in dollars and cents.\nThe monthly payment you will need to make to fully pay off a $400,000 loan at a 3.85% annual interest rate over 25 years is approximately @@@2078.36@@@. \n\nHere\u2019s how I got that: I used the mortgage formula, plugged in your principal, the monthly interest rate (3.85% divided by 12), and the total payments (25 years times 12 months). This gives a rounded result of $2,078.36 per month.\n",
    "actual_answer": 2078.36
  },
  {
    "question": "If I get a loan for $400,000 at 3.85% interest for 25 years, with monthly payments that fully pay it off, how much will I still owe after 7 years?",
    "expected_answer": 323492.92,
    "ai_response": "To solve this, let's follow these steps:\n\n1. **Monthly Payment Calculation:**\n   - Loan amount (P): 400,000\n   - Interest rate (annual, r): 3.85%\n   - Loan term (n): 25 years = 300 months\n   - Monthly interest rate = 3.85% / 12 = 0.32083% or 0.0032083\n\nThe formula for monthly payment \\( M \\) is:\n\n\\[\nM = P \\frac{r(1+r)^n}{(1+r)^n-1}\n\\]\n\n2. **Calculate the Remaining Balance After 7 Years (84 months):**\n   The formula for the remaining balance after \\( k \\) payments is:\n\n\\[\n\\text{Remaining Balance} = P \\frac{(1+r)^n - (1+r)^k}{(1+r)^n-1}\n\\]\n\nLet\u2019s compute this step by step:\n\n- Number of months after 7 years = 7 \u00d7 12 = 84\n\nLet\u2019s do the calculations in Python for accuracy.\n\n```python\n# Required Variables\nP = 400000\nannual_rate = 0.0385\nmonthly_rate = annual_rate / 12\nn = 25 * 12  # 25 years in months\nk = 7 * 12   # 7 years in months\n\n# Calculate remaining balance after k payments\nremaining_balance = P * ((1 + monthly_rate) ** n - (1 + monthly_rate) ** k) / ((1 + monthly_rate) ** n - 1)\nremaining_balance\n```\nLet's calculate:\nP = 400000\r\nannual_rate = 0.0385\r\nmonthly_rate = annual_rate / 12\r\nn = 25 * 12  # Total payments (months)\r\nk = 7 * 12   # Payments made in 7 years\r\n\r\n# Calculate the remaining balance after k payments\r\nremaining_balance = P * ((1 + monthly_rate) ** n - (1 + monthly_rate) ** k) / ((1 + monthly_rate) ** n - 1)\r\nround(remaining_balance, 2)\nAfter 7 years, you will still owe @@@323492.92@@@ on your mortgage.\n\nHere's the breakdown:\n- We started with a $400,000 loan at a 3.85% annual interest rate for 25 years.\n- After 7 years (84 payments), using the mortgage balance formula, the remaining balance is approximately 323,492.92.\n- This calculation uses the monthly compounding interest method standard for mortgages.\n",
    "actual_answer": 323492.92
  },
  {
    "question": "For a loan of $400,000 with 3.85% interest over 25 years, with monthly payments that pay off the loan completely, how much of the 60th payment goes toward interest?",
    "expected_answer": 1117.95,
    "ai_response": "Let's break down the problem:\n\n- **Loan amount (Principal, P):** 400,000  \n- **Annual interest rate (r):** 3.85%  \n- **Loan term (n):** 25 years (which is 300 months)  \n- **Monthly payment:** We'll need to calculate this first.\n\n### Step 1: Calculate Monthly Interest Rate\nAnnual interest rate = 3.85%, so monthly interest rate = 3.85% / 12 = 0.3208333%  \nMonthly rate as a decimal: 0.0385 / 12 \u2248 0.003208333\n\n### Step 2: Calculate Monthly Payment Formula\nThe monthly payment (M) for a loan can be calculated as:\n\n\\[\nM = P \\frac{r(1+r)^n}{(1+r)^n - 1}\n\\]\n\nWhere:\n- **P** = loan amount (400,000)\n- **r** = monthly interest rate (0.003208333)\n- **n** = total number of payments (300)\n\nLet's calculate the monthly payment first, then find the remaining balance after 59 payments, and calculate the interest for the 60th payment.\n\n### Step 3: Calculate Loan Balance After 59 Payments\nThe balance after \\(k\\) payments is calculated as:\n\n\\[\n\\text{Balance} = P \\times \\frac{(1+r)^n - (1+r)^k}{(1+r)^n - 1}\n\\]\n\nWhere \\(k = 59\\) after 59 payments.\n\nThe interest part of the 60th payment is simply the remaining balance after 59 payments multiplied by the monthly interest rate.\n\nLet's do the calculations in Python for accuracy:\n# Loan details\nP = 400000  # principal\nannual_rate = 3.85 / 100  # annual interest rate as a decimal\nmonthly_rate = annual_rate / 12  # monthly interest rate\nn = 25 * 12  # number of months\nk = 59  # number of payments made\n\n# Monthly payment calculation\nM = P * (monthly_rate * (1 + monthly_rate)**n) / ((1 + monthly_rate)**n - 1)\n\n# Balance after k payments\nbalance_after_k = P * ((1 + monthly_rate)**n - (1 + monthly_rate)**k) / ((1 + monthly_rate)**n - 1)\n\n# Interest part of the 60th payment\ninterest_60th = balance_after_k * monthly_rate\n\nM, balance_after_k, interest_60th\nLet's review the calculations:\n- The monthly payment is about $2078.36.\n- After 59 payments, the remaining balance is about $348,450.78.\n- The interest portion of the 60th payment is the remaining balance times the monthly rate, which is about $1,117.95.\n\nSo, the amount of the 60th payment that goes toward interest is @@@1117.95@@@.\n",
    "actual_answer": 1117.95
  },
  {
    "question": "What's the incremental interest rate (cost of borrowing) on an additional $20,000 if I go from a $400,000 loan at 3.85% to a $420,000 loan at 4.10%, both for 25 years? Can you solve for the interest rate that would give the same payment difference on just the $20,000?",
    "expected_answer": 8.56,
    "ai_response": "Let's break down the problem:\n\n1. **Calculate the monthly payments** for both loans (using the mortgage payment formula):\n   - $400,000 at 3.85% for 25 years\n   - $420,000 at 4.10% for 25 years\n\n2. **Find the difference in monthly payment** between the two loans.\n\n3. **Determine the interest rate (r) for a $20,000 loan over 25 years** that results in the same payment as the difference calculated in step 2. This is the \"incremental\" cost of borrowing.\n\nLet's do the calculations step-by-step:\n\n### Step 1: Calculate monthly payments\n\nThe standard mortgage payment formula is:\n\n\\[ P = \\frac{L \\cdot r \\cdot (1 + r)^n}{(1 + r)^n - 1} \\]\nWhere:\n- \\( P \\) = monthly payment\n- \\( L \\) = loan amount\n- \\( r \\) = monthly interest rate (annual rate / 12)\n- \\( n \\) = total number of payments (years \u00d7 12)\n\n#### $400,000 at 3.85% for 25 years\n- L = 400000\n- Annual rate = 3.85%, so monthly rate = 0.0385 / 12\n- n = 25 \u00d7 12 = 300\n\n#### $420,000 at 4.10% for 25 years\n- L = 420000\n- Annual rate = 4.10%, so monthly rate = 0.041 / 12\n- n = 300\n\nLet's calculate these:\n\n```python\ndef mortgage_payment(L, annual_rate, years):\n    r = annual_rate / 12\n    n = years * 12\n    return L * r * (1 + r)**n / ((1 + r)**n - 1)\n\npayment_400k = mortgage_payment(400000, 0.0385, 25)\npayment_420k = mortgage_payment(420000, 0.041, 25)\npayment_difference = payment_420k - payment_400k\npayment_400k, payment_420k, payment_difference\n```\n\nLet's calculate these values.\ndef mortgage_payment(L, annual_rate, years):\n    r = annual_rate / 12\n    n = years * 12\n    return L * r * (1 + r)**n / ((1 + r)**n - 1)\n\n# Calculate payments\npayment_400k = mortgage_payment(400000, 0.0385, 25)\npayment_420k = mortgage_payment(420000, 0.041, 25)\npayment_difference = payment_420k - payment_400k\n\npayment_400k, payment_420k, payment_difference\n- The monthly payment for a $400,000 loan at 3.85% over 25 years is about $2,078.36.\n- For a $420,000 loan at 4.10% over 25 years, it's about $2,240.17.\n- The difference in monthly payment is about $161.81.\n\nNow, we want to know what interest rate on a $20,000 loan over 25 years would produce a $161.81 monthly payment.\n\nLet's solve for that rate using the mortgage payment formula, rearranged to solve for the rate \\( r \\):\n\n\\[ 161.81 = \\frac{20000 \\cdot r \\cdot (1 + r)^{300}}{(1 + r)^{300} - 1} \\]\n\nWe'll use a numerical method to solve for \\( r \\).\n\nHere's the code to solve for \\( r \\):\nfrom scipy.optimize import bisect\n\ndef payment_for_rate(r, L=20000, years=25, target_payment=payment_difference):\n    n = years * 12\n    monthly_rate = r / 12\n    payment = L * monthly_rate * (1 + monthly_rate)**n / ((1 + monthly_rate)**n - 1)\n    return payment - target_payment\n\n# Use bisection method to find annual rate that produces the target payment\nincremental_rate = bisect(payment_for_rate, 0.01, 0.2)  # Start between 1% and 20%\nincremental_rate * 100  # Convert to percentage\n\nThe incremental interest rate (cost of borrowing) on the additional $20,000, given the monthly payment difference, is approximately @@@8.56@@@. \n\n**Explanation:**  \nThis rate is much higher than either of the stated mortgage rates. When you increase the loan amount and the rate for the entire balance, the extra monthly payment can be thought of as if you took out a separate $20,000 loan at this incremental rate. This reflects how lenders sometimes charge a higher \"effective rate\" for borrowing more, due to increased risk or just due to how larger loans are priced.\n",
    "actual_answer": 8.56
  },
  {
    "question": "I am comparing two ways to borrow the same total amount over 25 years with monthly payments: Option A: Two separate loans: one for $400,000 at 3.85%, and another for $180,000 at 7.25%. Option B: One big loan for $500,000 at 4.50%. Which one ends up costing less in the long run (Option A minus Option B)",
    "expected_answer": 180074.78,
    "ai_response": "Let's break down the steps:\n\n**Step 1: Calculate the monthly payments for each loan using the formula for an amortizing loan:**\n\n\\[ P = \\frac{r \\cdot PV}{1 - (1 + r)^{-n}} \\]\nWhere:\n- \\( P \\) = monthly payment\n- \\( r \\) = monthly interest rate (annual rate divided by 12)\n- \\( PV \\) = loan principal\n- \\( n \\) = total number of payments (25 years \u00d7 12 months = 300 payments)\n\n### For Option A:\n- Loan 1: $400,000 at 3.85% (0.0385)\n- Loan 2: $180,000 at 7.25% (0.0725)\n\n### For Option B:\n- Loan 1: $500,000 at 4.50% (0.045)\n\nI'll perform the calculations below.\n\n```python\n# Define the variables\nn = 25 * 12  # 25 years, monthly payments\n\n# Option A\nPV1 = 400000\nr1 = 0.0385 / 12\nPV2 = 180000\nr2 = 0.0725 / 12\n\n# Option B\nPV3 = 500000\nr3 = 0.045 / 12\n\n# Monthly payments\ndef monthly_payment(PV, r, n):\n    return (r * PV) / (1 - (1 + r) ** -n)\n\nP1 = monthly_payment(PV1, r1, n)\nP2 = monthly_payment(PV2, r2, n)\nP3 = monthly_payment(PV3, r3, n)\n\n# Total payments (sum of all payments over loan period)\ntotal_A = (P1 + P2) * n\ntotal_B = P3 * n\n\n# Difference\ndifference = total_A - total_B\ndifference\n```\nNow let's calculate:\n\n# Calculation as detailed earlier\r\nn = 25 * 12  # 25 years, monthly payments = 300\r\n\r\n# Option A\r\nPV1 = 400000\r\nr1 = 0.0385 / 12\r\nPV2 = 180000\r\nr2 = 0.0725 / 12\r\n\r\n# Option B\r\nPV3 = 500000\r\nr3 = 0.045 / 12\r\n\r\ndef monthly_payment(PV, r, n):\r\n    return (r * PV) / (1 - (1 + r) ** -n)\r\n\r\nP1 = monthly_payment(PV1, r1, n)\r\nP2 = monthly_payment(PV2, r2, n)\r\nP3 = monthly_payment(PV3, r3, n)\r\n\r\ntotal_A = (P1 + P2) * n\r\ntotal_B = P3 * n\r\n\r\ndifference = total_A - total_B\r\nround(difference)  # for clean final output\r\n\nLet's look at the math:\n\n- For Option A, we calculated the monthly payments for two loans ($400,000 at 3.85% and $180,000 at 7.25%) and added up all their payments over 25 years.\n- For Option B, we did the same for one $500,000 loan at 4.50%.\n- Subtracting the total paid in Option B from Option A gives you the cost difference between the two options.\n\nSo, over the life of the loans, Option A will cost you @@@180075@@@ more than Option B. Option B ends up being cheaper in the long run.\n",
    "actual_answer": 180075.0
  },
  {
    "question": "I took out a mortgage for $400,000, 7 years ago. It\u2019s a 25-year loan with a 4.10% interest rate. Today, I could get a new 30-year mortgage at 3.85% interest, but I\u2019d have to pay a penalty of 2% of what I still owe, plus another $3,500 in fees. (Fees and penalties are paid out of pocket.) If I weigh all future payments and costs as if they happened today, how much would I save over the term of the loan if I refinance (output loss as a negative number)?",
    "expected_answer": -2659.73,
    "ai_response": "Let's break this down step by step:\n\n### Step 1: Calculate the current monthly payment on the original mortgage.\n- Principal: $400,000\n- Interest rate: 4.10% annual, so monthly rate = 0.041/12\n- Term: 25 years = 300 months\n- The mortgage has been held for 7 years = 84 months, so 216 months remain.\n\nWe use the mortgage payment formula:\n\n\\[\nPMT = P \\times \\frac{r(1+r)^n}{(1+r)^n-1}\n\\]\n\nWhere:\n- \\(P\\) = loan amount\n- \\(r\\) = monthly interest rate\n- \\(n\\) = number of payments\n\nLet's calculate the monthly payment and the outstanding balance after 84 payments.\n\n### Step 2: Calculate how much is still owed (remaining principal) after 84 months.\n\n### Step 3: Calculate the penalty and fees:\n- Penalty = 2% of the remaining balance\n- Fees = $3,500\n\n### Step 4: Calculate the monthly payment for the new loan:\n- New loan amount = remaining balance from original mortgage\n- New interest rate = 3.85% annual\n- New term = 30 years = 360 months\n\n### Step 5: Calculate the present value of all remaining payments for both options.\n- Discount all future payments at the original interest rate of 4.10% (assume this as the \"opportunity\" rate).\n\n### Step 6: Subtract refinancing costs and compare total present value of payments.\n\nLet\u2019s calculate in Python!\nimport numpy as np\n\n# Given\noriginal_principal = 400000\noriginal_rate_annual = 0.041\noriginal_term_years = 25\nelapsed_years = 7\nnew_rate_annual = 0.0385\nnew_term_years = 30\npenalty_rate = 0.02\nfees = 3500\n\n# Step 1: Calculate current monthly payment on original mortgage\nn_payments = original_term_years * 12\nmonthly_rate_original = original_rate_annual / 12\n\nmonthly_payment_original = np.pmt(monthly_rate_original, n_payments, -original_principal)\n\n# Step 2: Calculate how much is still owed after 7 years (84 months)\nelapsed_payments = elapsed_years * 12\nremaining_payments_original = n_payments - elapsed_payments\nremaining_balance = np.fv(monthly_rate_original, elapsed_payments, monthly_payment_original, -original_principal)\n\n# Step 3: Calculate penalty and fees\npenalty = penalty_rate * remaining_balance\ntotal_fees = penalty + fees\n\n# Step 4: New payment\nmonthly_rate_new = new_rate_annual / 12\nn_new_payments = new_term_years * 12\nmonthly_payment_new = np.pmt(monthly_rate_new, n_new_payments, -remaining_balance)\n\n# Step 5: Calculate the present value of remaining payments (discount at original interest rate)\ndef present_value_of_payments(payment, num_payments, monthly_discount_rate):\n    # Payments are at end of period, use PV of annuity formula\n    return payment * (1 - (1 + monthly_discount_rate)**(-num_payments)) / monthly_discount_rate\n\npv_remaining_payments_original = present_value_of_payments(monthly_payment_original, remaining_payments_original, monthly_rate_original)\n\npv_new_payments = present_value_of_payments(monthly_payment_new, n_new_payments, monthly_rate_original)\n\n# Step 6: Add out-of-pocket costs (penalties + fees) to refinancing option\ntotal_pv_new = pv_new_payments + total_fees\n\n# Net savings (positive = save by refinancing, negative = lose money by refinancing)\nnet_savings = pv_remaining_payments_original - total_pv_new\n\nmonthly_payment_original, remaining_balance, penalty, pv_remaining_payments_original, pv_new_payments, total_fees, net_savings\nimport numpy_financial as npf\n\n# Replacing np.pmt and np.fv with numpy_financial equivalents\n\n# Step 1: Calculate current monthly payment on original mortgage\nmonthly_payment_original = npf.pmt(monthly_rate_original, n_payments, -original_principal)\n\n# Step 2: Calculate how much is still owed after 7 years (84 months)\nremaining_balance = npf.fv(monthly_rate_original, elapsed_payments, monthly_payment_original, -original_principal)\n\n# Step 3 and 4 already prepared above\n\n# Step 4: New payment\nmonthly_payment_new = npf.pmt(monthly_rate_new, n_new_payments, -remaining_balance)\n\n# Step 5: PV calculations remain the same\n\npv_remaining_payments_original = present_value_of_payments(monthly_payment_original, remaining_payments_original, monthly_rate_original)\npv_new_payments = present_value_of_payments(monthly_payment_new, n_new_payments, monthly_rate_original)\ntotal_pv_new = pv_new_payments + total_fees\n\nnet_savings = pv_remaining_payments_original - total_pv_new\n\nmonthly_payment_original, remaining_balance, penalty, pv_remaining_payments_original, pv_new_payments, total_fees, net_savings\n# Re-declare the \"elapsed_payments\" variable since it was part of the previous code cell.\nelapsed_payments = elapsed_years * 12\n\n# Step 1: Calculate current monthly payment on original mortgage\nmonthly_payment_original = npf.pmt(monthly_rate_original, n_payments, -original_principal)\n\n# Step 2: Calculate how much is still owed after 7 years (84 months)\nremaining_balance = npf.fv(monthly_rate_original, elapsed_payments, monthly_payment_original, -original_principal)\n\n# Step 3: Calculate penalty and fees\npenalty = penalty_rate * remaining_balance\ntotal_fees = penalty + fees\n\n# Step 4: New mortgage monthly payment\nmonthly_payment_new = npf.pmt(monthly_rate_new, n_new_payments, -remaining_balance)\n\n# Step 5: Present value functions (already defined)\npv_remaining_payments_original = present_value_of_payments(monthly_payment_original, remaining_payments_original, monthly_rate_original)\npv_new_payments = present_value_of_payments(monthly_payment_new, n_new_payments, monthly_rate_original)\ntotal_pv_new = pv_new_payments + total_fees\n\n# Step 6: Net savings (positive if refinancing is better)\nnet_savings = pv_remaining_payments_original - total_pv_new\n\nmonthly_payment_original, remaining_balance, penalty, pv_remaining_payments_original, pv_new_payments, total_fees, net_savings\n# Re-declare remaining variables for clarity\nmonthly_rate_new = new_rate_annual / 12\nn_new_payments = new_term_years * 12\nremaining_payments_original = n_payments - elapsed_payments\n\n# Step 4: New mortgage monthly payment\nmonthly_payment_new = npf.pmt(monthly_rate_new, n_new_payments, -remaining_balance)\n\n# Step 5: Present value calculations\npv_remaining_payments_original = present_value_of_payments(monthly_payment_original, remaining_payments_original, monthly_rate_original)\npv_new_payments = present_value_of_payments(monthly_payment_new, n_new_payments, monthly_rate_original)\ntotal_pv_new = pv_new_payments + total_fees\n\n# Net savings\nnet_savings = pv_remaining_payments_original - total_pv_new\n\nmonthly_payment_original, remaining_balance, penalty, total_fees, monthly_payment_new, pv_remaining_payments_original, pv_new_payments, net_savings\n# Re-define present_value_of_payments since it's not accessible from previous cells\ndef present_value_of_payments(payment, num_payments, monthly_discount_rate):\n    # Payments are at end of period, use PV of annuity formula\n    return payment * (1 - (1 + monthly_discount_rate)**(-num_payments)) / monthly_discount_rate\n\n# Re-calculate everything\nmonthly_payment_original = npf.pmt(monthly_rate_original, n_payments, -original_principal)\nremaining_balance = npf.fv(monthly_rate_original, elapsed_payments, monthly_payment_original, -original_principal)\npenalty = penalty_rate * remaining_balance\ntotal_fees = penalty + fees\nmonthly_payment_new = npf.pmt(monthly_rate_new, n_new_payments, -remaining_balance)\npv_remaining_payments_original = present_value_of_payments(monthly_payment_original, remaining_payments_original, monthly_rate_original)\npv_new_payments = present_value_of_payments(monthly_payment_new, n_new_payments, monthly_rate_original)\ntotal_pv_new = pv_new_payments + total_fees\nnet_savings = pv_remaining_payments_original - total_pv_new\n\nmonthly_payment_original, remaining_balance, penalty, total_fees, monthly_payment_new, pv_remaining_payments_original, pv_new_payments, net_savings\nHere's the breakdown:\n\n- Your current monthly payment is about $2133.50.\n- The remaining principal you owe after 7 years is about $325537.67.\n- If you refinance, your penalty is about $6510.75, plus $3500 in fees, totaling about $10010.75 out of pocket.\n- Your new monthly payment after refinancing would drop to about $1526.15, but over a new 30-year term.\n\nWhen we discount all remaining payments (and your out-of-pocket fees) to present value at 4.10% interest:\n- Sticking with your current mortgage, the present value of all payments left to make is $325537.67.\n- Refinancing, the present value of your future payments plus the fees is $315842.83 + $10010.75 = $325853.58.\n\nSo, if you refinance, you would lose about $315.91 when you factor in all costs and present value discounting.\n\nFinal answer: @@@-315.91@@@\n\nIf you have further questions about the process or want to see the numbers for different rates or scenarios, let me know!\n",
    "actual_answer": -315.91
  },
  {
    "question": "If I borrow $300,000 at an annual interest rate of 2.99% for 30 years, and I make monthly payments that fully pay off the loan by the end, how much will I have to pay each month?",
    "expected_answer": 1263.19,
    "ai_response": "To find out your monthly mortgage payment, we can use the standard fixed-rate mortgage formula:\n\n\\[ M = \\frac{P \\cdot r \\cdot (1 + r)^n}{(1 + r)^n - 1} \\]\n\nWhere:\n- \\( M \\) = monthly payment\n- \\( P \\) = principal amount ($300,000)\n- \\( r \\) = monthly interest rate (annual rate divided by 12)\n- \\( n \\) = total number of payments (months)\n\nLet's go step by step:\n\n1. Principal (\\( P \\)) = 300,000  \n2. Annual interest rate = 2.99%, so monthly interest rate (\\( r \\)) = 0.0299 / 12 = 0.0024916667  \n3. Term = 30 years = 360 months\n\nNow let's plug these numbers into the formula:\n\n\\[\nM = \\frac{300000 \\times 0.0024916667 \\times (1 + 0.0024916667)^{360}}{(1 + 0.0024916667)^{360} - 1}\n\\]\n\nI'll calculate this step by step using Python for accuracy:\nP = 300000\nannual_rate = 2.99 / 100\nr = annual_rate / 12\nn = 30 * 12\n\nM = (P * r * (1 + r) ** n) / ((1 + r) ** n - 1)\nround(M, 2)\nYour monthly payment will be about $1,263.19. That means each month, you will owe @@@1263.19@@@. \n\nI broke down the calculation using the formula for monthly payments on a fixed-rate mortgage, using your loan amount, the given interest rate, and the 30-year term.\n",
    "actual_answer": 1263.19
  },
  {
    "question": "If I get a loan for $300,000 at 2.99% interest for 30 years, with monthly payments that fully pay it off, how much will I still owe after 5 years?",
    "expected_answer": 266670.41,
    "ai_response": "Let's break down the problem:\n\n1. **Loan Amount:** $300,000  \n2. **Interest Rate:** 2.99% annual (compounded monthly)  \n3. **Loan Term:** 30 years (360 months)  \n4. **Monthly Payment:** We'll first need to calculate this.  \n5. **After 5 years:** 60 monthly payments made. We need to find the remaining balance (principal left).\n\n### Monthly Payment Formula\nThe formula for a monthly mortgage payment (\\(M\\)) is:\n\n\\[\nM = P \\times \\frac{r(1+r)^n}{(1+r)^n-1}\n\\]\nwhere:  \n- \\(P\\) = loan amount ($300,000)  \n- \\(r\\) = monthly interest rate (2.99% / 12 months = 0.00249167)  \n- \\(n\\) = total number of payments (360)\n\nLet's calculate the monthly payment.\n\n### Step 1: Calculate Monthly Payment\n\\[\nr = 2.99\\% / 12 = 0.00249167\n\\]\n\\[\nn = 360\n\\]\n\\[\nM = 300,000 \\times \\frac{0.00249167 \\times (1+0.00249167)^{360}}{(1+0.00249167)^{360}-1}\n\\]\n\nLet's use code for accuracy.\nP = 300000\r\nannual_rate = 2.99 / 100\r\nr = annual_rate / 12\r\nn = 360\r\n\r\n# Monthly payment calculation\r\nM = P * (r * (1 + r)**n) / ((1 + r)**n - 1)\r\n\r\n# Remaining balance after 5 years (60 payments)\r\npayments_made = 60\r\nremaining_balance = P * ((1 + r)**n - (1 + r)**payments_made) / ((1 + r)**n - 1)\r\n\r\nround(remaining_balance, 2)\nTo solve this, we calculated the monthly payment for your $300,000 loan at a 2.99% interest rate for 30 years, then found the remaining balance after 60 monthly payments (5 years).\n\nAfter 5 years, you would still owe about $266,670.41 on your mortgage.\n\n@@@266670.41@@@\n",
    "actual_answer": 266670.41
  },
  {
    "question": "For a loan of $300,000 with 2.99% interest over 30 years, with monthly payments that pay off the loan completely, how much of the 30th payment goes toward interest?",
    "expected_answer": 708.91,
    "ai_response": "To determine how much of the 360th (30th year, 12th month, or last) payment goes toward interest, let's step through the calculation:\n\n1. **Find the monthly interest rate:**  \nAnnual rate = 2.99%  \nMonthly rate = 2.99% / 12 = 0.00249167\n\n2. **Number of payments:**  \n30 years \u00d7 12 months = 360 payments\n\n3. **Monthly payment calculation (PMT formula):**  \n\\[ P = \\frac{r \\times PV}{1 - (1 + r)^{-n}} \\]  \nwhere:  \n- \\( P \\) = monthly payment  \n- \\( r \\) = monthly interest rate  \n- \\( PV \\) = present value (loan amount)  \n- \\( n \\) = total number of payments\n\n4. **Outstanding balance before the last payment:**  \nAt the 359th payment, we want to know how much is left to pay.\n\n5. **Interest of 360th payment:**  \nInterest = Outstanding balance * monthly interest rate\n\nLet's calculate:\n\n```python\n# Loan information\nPV = 300000\nannual_rate = 0.0299\nmonthly_rate = annual_rate / 12\nn_payments = 360\n\n# Monthly payment formula\nP = (monthly_rate * PV) / (1 - (1 + monthly_rate) ** -n_payments)\n\n# Outstanding balance after 359 payments (before last payment)\n# Formula: PV_remaining = PV * (1 + r) ** n - P * ((1 + r) ** n - 1) / r\nn_remaining = 360 - 359\nbalance_before_last = PV * (1 + monthly_rate) ** 359 - P * ((1 + monthly_rate) ** 359 - 1) / monthly_rate\n\n# Interest in last payment\ninterest_360th = balance_before_last * monthly_rate\ninterest_360th\n```\nLet's calculate this step by step in Python.\n# Loan information\nPV = 300000\nannual_rate = 0.0299\nmonthly_rate = annual_rate / 12\nn_payments = 360\n\n# Monthly payment formula\nP = (monthly_rate * PV) / (1 - (1 + monthly_rate) ** -n_payments)\n\n# Outstanding balance after 359 payments (before last payment)\nn_remaining = 360 - 359 # or just 1\n# Amortization formula for remaining balance\nbalance_before_last = PV * (1 + monthly_rate) ** 359 - P * ((1 + monthly_rate) ** 359 - 1) / monthly_rate\n\n# Interest in last payment\ninterest_360th = balance_before_last * monthly_rate\ninterest_360th, P, balance_before_last  # For check reasoning\n\nThe portion of the 360th (last) mortgage payment that goes towards interest is approximately @@@3.14@@@. \n\nHere's the breakdown:\n- Your fixed monthly payment is about 1263.19.\n- Right before the last payment, the remaining balance is about 1260.06.\n- The interest for the last payment is calculated on that leftover balance at the monthly rate: 1260.06 \u00d7 0.00249167 \u2248 3.14. \n\nSo, nearly all of your final payment goes toward the principal (the balance), with only a small amount toward interest.\n",
    "actual_answer": 3.14
  },
  {
    "question": "What's the incremental interest rate (cost of borrowing) on an additional $20,000 if I go from a $300,000 loan at 2.99% to a $320,000 loan at 3.51%, both for 30 years? Can you solve for the interest rate that would give the same payment difference on just the $20,000?",
    "expected_answer": 10.0,
    "ai_response": "Let's break down the question:\n\n- Original loan: $300,000 at 2.99% for 30 years.\n- New loan: $320,000 at 3.51% for 30 years.  \n- Find the effective (incremental) interest rate on the extra $20,000, i.e., what rate on $20,000 would give the same increase in monthly payment as the difference between the new total payment and the old?\n\n**Step 1: Calculate the monthly payment for both loans.**\n\nThe monthly payment for a fixed-rate loan is:\n\\[\nP = L \\times \\frac{r(1 + r)^n}{(1 + r)^n - 1}\n\\]\nWhere:\n- \\(L\\) = loan principal\n- \\(r\\) = monthly interest rate\n- \\(n\\) = total number of payments\n\nLet\u2019s compute both payments, then find the difference.\n\n**Step 2: Use the monthly difference to solve for the interest rate on a $20,000 loan with 30 years.**\n\nLet me show all calculations in Python for accuracy.\n# Loan details\nprincipal1 = 300_000\nrate1 = 2.99 / 100 / 12 # monthly rate\nprincipal2 = 320_000\nrate2 = 3.51 / 100 / 12 # monthly rate\nn = 30 * 12 # 30 years term\n\n# Monthly payment formula function\ndef monthly_payment(L, r, n):\n    return L * r * (1 + r)**n / ((1 + r)**n - 1)\n\n# Calculate payments\npayment1 = monthly_payment(principal1, rate1, n)\npayment2 = monthly_payment(principal2, rate2, n)\ndiff = payment2 - payment1\n\n# Now, solve for interest rate r on $20,000 with 30-year term where payment = diff\nfrom scipy.optimize import fsolve\n\ndef interest_rate_to_match_diff(r_guess):\n    r = r_guess[0]\n    payment = monthly_payment(20000, r, n)\n    return [payment - diff]\n\n# Initial guess: 4% interest rate (monthly)\nr_guess = [0.04 / 12]\nresult = fsolve(interest_rate_to_match_diff, r_guess)\nincremental_rate_annual = result[0] * 12 * 100\n\nincremental_rate_annual\nLet me explain the steps:\n\n1. I calculated the monthly payment for a $300,000 loan at 2.99% (30 years).\n2. I calculated the monthly payment for a $320,000 loan at 3.51% (30 years).\n3. I found the difference between these two monthly payments.\n4. I then determined the interest rate that, if applied to a $20,000 loan for 30 years, would give a monthly payment equal to that difference.\n\nThe incremental (effective) annual interest rate on the extra $20,000, based on the payment difference, is @@@10.001410769443119@@@. This is much higher than either of the mortgage rates, showing how adding more principal at a higher rate can significantly increase your overall borrowing costs.\n",
    "actual_answer": 10.001410769443119
  },
  {
    "question": "I am comparing two ways to borrow the same total amount over 30 years with monthly payments: Option A: Two separate loans: one for $300,000 at 2.99%, and another for $150,000 at 6.75%. Option B: One big loan for $450,000 at 4.22%. Which one ends up costing less in the long run (Option A minus Option B)",
    "expected_answer": 10893.04,
    "ai_response": "Let's break down the problem:\n\n- Both options are over 30 years (360 months).\n- Option A: $300,000 at 2.99% and $150,000 at 6.75%\n- Option B: $450,000 at 4.22%\n- We need to compare the total payments over 30 years and find the difference (Option A minus Option B).\n\nWe'll use the formula for the monthly mortgage payment:\n\\[ P = \\frac{r L}{1 - (1 + r)^{-n}} \\]\nwhere:\n- \\( P \\) = monthly payment\n- \\( r \\) = monthly interest rate (annual rate / 12)\n- \\( L \\) = loan amount\n- \\( n \\) = number of monthly payments\n\nLet's calculate:\n\n### Option A\n#### Loan 1: $300,000 at 2.99%\n- r = 0.0299 / 12\n- n = 360\n\n#### Loan 2: $150,000 at 6.75%\n- r = 0.0675 / 12\n- n = 360\n\n### Option B\n#### $450,000 at 4.22%\n- r = 0.0422 / 12\n- n = 360\n\nWe'll calculate monthly payments, then total payments for each, sum Option A's two loans, and subtract Option B.\n\nLet's do the calculations:\n# Constants\nn = 360  # number of monthly payments\n\n# Option A Loan 1\nL1 = 300000\nr1 = 0.0299 / 12\n# Option A Loan 2\nL2 = 150000\nr2 = 0.0675 / 12\n\n# Option B\nL3 = 450000\nr3 = 0.0422 / 12\n\ndef monthly_payment(L, r, n):\n    return (r * L) / (1 - (1 + r) ** -n)\n\n# Monthly payments\nP1 = monthly_payment(L1, r1, n)\nP2 = monthly_payment(L2, r2, n)\nP3 = monthly_payment(L3, r3, n)\n\n# Total paid over life of loan\ntotal_a = (P1 + P2) * n\ntotal_b = P3 * n\n\ndifference = total_a - total_b\ndifference\nLet's go over the calculations:\n\n1. I calculated the monthly payments for both loans in Option A and added them together to get the total monthly payment for Option A, then multiplied by the number of months (360) to get the total paid.\n2. For Option B, I did the same for the single $450,000 loan at 4.22%.\n\nOption A's total cost over 30 years is higher than Option B's by about $10,893.\n\nSo, Option A will cost you @@@10893@@@ more than Option B over the 30-year period.\n",
    "actual_answer": 10893.0
  },
  {
    "question": "I took out a mortgage for $300,000, 5 years ago. It\u2019s a 30-year loan with a 3.51% interest rate. Today, I could get a new 30-year mortgage at 2.99% interest, but I\u2019d have to pay a penalty of 2% of what I still owe, plus another $3,000 in fees. (Fees and penalties are paid out of pocket.) If I weigh all future payments and costs as if they happened today, how much would I save over the term of the loan if I refinance (output loss as a negative number)?",
    "expected_answer": 7224.15,
    "ai_response": "Let\u2019s break down the problem:\n\n**Original mortgage details:**\n- Amount: $300,000\n- Term: 30 years (360 months)\n- Interest rate: 3.51%\n- Time elapsed: 5 years (60 payments made), 25 years (300 payments) left\n\n**Refinance details:**\n- New rate: 2.99%\n- New term: 30 years (360 months) again\n- Penalty: 2% of current balance\n- Additional fees: $3,000\n- Fees and penalty paid out of pocket (not added to new loan)\n\n### Step 1: Calculate current balance on original loan\n\nFirst, find the monthly payment for the original loan:\n\\[\nP = \\text{loan amount} = 300,000 \\\\\nr = \\text{monthly interest rate} = \\frac{3.51}{100} / 12\nn = 360\n\\]\nMonthly payment:\n\\[\nM = P \\times \\frac{r(1+r)^n}{(1+r)^n-1}\n\\]\n\nNow, find the remaining balance after 60 payments.\n\n### Step 2: Calculate cost of refinance\n\nFind the new loan monthly payment for $X (the current balance).\nAdd out-of-pocket costs for penalty and fees.\n\n### Step 3: Sum the remaining payments for both scenarios, discounting all numbers to today (calculate NPV assuming rate = original loan rate for fair comparison).\n\n### Step 4: Compare total costs and output the difference (positive means a real saving, negative means a loss).\n\nLet's do the calculations in Python:\nimport numpy as np\n\n# Original loan details\nP = 300000                  # original loan amount\nrate_orig = 3.51 / 100      # original annual interest rate\nrate_new = 2.99 / 100       # new annual interest rate\nn_total = 360               # total payments\nn_elapsed = 60              # payments already made\nn_left = n_total - n_elapsed\n\n# Rates per month\nr_orig = rate_orig / 12\nr_new = rate_new / 12\n\n# Monthly payments (original and new, calculated for full loan length)\ndef monthly_payment(principal, monthly_rate, total_months):\n    return principal * (monthly_rate * (1 + monthly_rate) ** total_months) / ((1 + monthly_rate) ** total_months - 1)\n\nM_orig = monthly_payment(P, r_orig, n_total)\n\n# Remaining balance after n_elapsed payments\ndef remaining_balance(orig_P, orig_r, total_n, paid_n, payment):\n    return orig_P * ((1 + orig_r) ** paid_n) - payment * (((1 + orig_r) ** paid_n - 1) / orig_r)\n\nbal_left = remaining_balance(P, r_orig, n_total, n_elapsed, M_orig)\n\n# New mortgage monthly payment for new 30-year loan at the new rate\nM_new = monthly_payment(bal_left, r_new, n_total)\n\n# Costs related to refinancing\npenalty = 0.02 * bal_left\nfees = 3000\n\n# Net Present Value of all remaining/or future payments\ndef npv_of_payments(payment, months, rate):\n    # discount each payment by rate (monthly)\n    monthly_discount_rate = rate / 12\n    payments = np.full(months, payment)\n    discounts = 1 / ((1 + monthly_discount_rate) ** np.arange(1, months + 1))\n    return np.sum(payments * discounts)\n\n# NPV of remaining payments on current mortgage\nnpv_orig = npv_of_payments(M_orig, n_left, rate_orig)\n\n# NPV of future payments on new mortgage\nnpv_new = npv_of_payments(M_new, n_total, rate_orig) # discount by old rate for fair comparison\n\n# Total NPV cost of refinancing (future mortgage + immediate penalties and fees)\ntotal_npv_new = npv_new + penalty + fees\n\n# Savings\nsavings = npv_orig - total_npv_new\n\n# Only output the final savings, rounded to nearest dollar\nint(round(savings))\nAfter calculating the net present value of all remaining payments and deducting the penalty and fees paid to refinance, you would save @@@8701@@@ over the term of the loan if you refinance at the new rate. \n\nHere's the step-by-step calculation:\n- We found your remaining balance after 5 years.\n- We calculated the new payment at the new rate for a fresh 30-year loan.\n- We discounted all future payments to today\u2019s value using your old loan\u2019s interest rate.\n- We added the out-of-pocket penalty (2% of the current balance) and $3,000 fee to the cost of refinancing.\n- The result shows a positive saving, which means refinancing may be a good financial choice in this scenario.\n",
    "actual_answer": 8701.0
  },
  {
    "question": "If I borrow $250,000 at an annual interest rate of 3.25% for 20 years, and I make monthly payments that fully pay off the loan by the end, how much will I have to pay each month?",
    "expected_answer": 1417.99,
    "ai_response": "To find the monthly payment for a fixed-rate mortgage, you can use the formula:\n\n\\[ M = \\frac{P \\cdot r \\cdot (1+r)^n}{(1+r)^n - 1} \\]\n\nWhere:\n- \\( M \\) = monthly payment\n- \\( P \\) = loan amount ($250,000)\n- \\( r \\) = monthly interest rate (annual rate divided by 12)\n- \\( n \\) = total number of payments (months)\n\nLet's break it down step-by-step:\n- Annual interest rate = 3.25% \u21d2 monthly rate = 3.25% / 12 = 0.00270833\n- Number of years = 20 \u21d2 months = 20 \u00d7 12 = 240\n- Principal = 250,000\n\nNow, let's calculate:\n\n1. Calculate \\((1+r)^n\\)\n2. Plug into the formula.\n\nI'll use Python for accuracy.\n# Given values\nP = 250000  # principal\nannual_rate = 3.25 / 100  # convert percent to decimal\nr = annual_rate / 12  # monthly interest rate\nn = 20 * 12  # total months\n\n# Payment calculation using the formula\nM = (P * r * (1 + r) ** n) / ((1 + r) ** n - 1)\nM\nThe monthly payment you will have to make is approximately @@@1417.99@@@. \n\nHere's how I got the answer:\n- The principal is 250,000.\n- The monthly interest rate is 0.00270833 (which is 3.25% annual divided by 12).\n- The total number of payments is 240 (20 years x 12 months).\n- Using the mortgage formula, the monthly payment comes out to about 1417.99.\n",
    "actual_answer": 1417.99
  },
  {
    "question": "If I get a loan for $250,000 at 3.25% interest for 20 years, with monthly payments that fully pay it off, how much will I still owe after 3 years?",
    "expected_answer": 222023.53,
    "ai_response": "Let's break down the problem:\n\n- Loan amount (principal): $250,000\n- Annual interest rate: 3.25%\n- Loan term: 20 years (240 months)\n- Monthly payments (fully amortizing)\n- You want to know the remaining balance after 3 years (36 months).\n\n### Steps:\n\n1. Calculate the monthly payment using the loan formula.\n2. Calculate the loan balance after 36 months using the amortization formula.\n\nLet's do the calculations:\n\n#### 1. Calculate the monthly interest rate:\n3.25% annual interest equals a monthly interest rate of 0.0325 / 12\n\n#### 2. Calculate the monthly payment (M):\nThe formula for monthly payment M is:\n\\[ M = P \\frac{r(1+r)^n}{(1+r)^n-1} \\]\nWhere:\n- P = principal (250,000)\n- r = monthly interest rate\n- n = number of total payments (240)\n\n#### 3. Calculate balance after 36 payments:\nLoan balance after k payments:\n\\[ B = P \\frac{(1+r)^n - (1+r)^k}{(1+r)^n-1} \\]\nWhere:\n- k = number of payments made (36)\n\nLet's plug in the numbers step by step.\n# Given values\r\nP = 250000\r\nannual_rate = 0.0325\r\nn = 240  # total payments (20 years * 12)\r\nk = 36   # after 3 years\r\n\r\n# Monthly interest rate\r\nr = annual_rate / 12\r\n\r\n# Monthly payment formula\r\nM = P * (r * (1 + r)**n) / ((1 + r)**n - 1)\r\n\r\n# Remaining balance formula after k payments\r\nB = P * ((1 + r)**n - (1 + r)**k) / ((1 + r)**n - 1)\r\n\r\nM, B\nFirst, I calculated your monthly payment to be about $1417.99.\n\nThen, using the loan balance formula, after making 36 payments (3 years), you would still owe about $222,023.53 on your loan.\n\nSo after 3 years, the remaining principal balance is @@@222023.53@@@.\n",
    "actual_answer": 222023.53
  },
  {
    "question": "For a loan of $250,000 with 3.25% interest over 20 years, with monthly payments that pay off the loan completely, how much of the 24th payment goes toward interest?",
    "expected_answer": 629.53,
    "ai_response": "Let's break it down step by step:\n\n1. **Principal**: 250,000  \n2. **Interest Rate**: 3.25% per year (annual), so the monthly rate is 3.25% / 12  \n3. **Term**: 20 years = 240 months  \n\nThe monthly interest rate is \\( \\frac{3.25}{100} \\div 12 \\).\n\nThe monthly payment \\( P \\) can be calculated with the formula:\n\n\\[\nP = \\frac{L \\cdot r \\cdot (1 + r)^n}{(1 + r)^n - 1}\n\\]\n\nWhere:  \n- \\( L \\): loan amount ($250,000)  \n- \\( r \\): monthly interest rate  \n- \\( n \\): number of monthly payments (240)  \n\nOnce we have the monthly payment amount, the interest on the 24th payment is calculated by taking the current loan balance at the start of month 24 and multiplying it by the monthly interest rate.\n\nLet's compute this step by step using Python for accuracy:\n# Given variables\r\nprincipal = 250000\r\nannual_rate = 3.25 / 100\r\nmonthly_rate = annual_rate / 12\r\nmonths = 20 * 12\r\n\r\n# Calculate monthly payment\r\nP = (principal * monthly_rate * (1 + monthly_rate)**months)/((1 + monthly_rate)**months - 1)\r\n\r\n# Compute balance before 24th payment (i.e., after 23 payments)\r\ndef remaining_balance(principal, monthly_rate, months_paid, monthly_payment):\r\n    return principal * (1 + monthly_rate)**months_paid - (monthly_payment * (((1 + monthly_rate)**months_paid - 1) / monthly_rate))\r\n\r\nbalance_after_23 = remaining_balance(principal, monthly_rate, 23, P)\r\n\r\n# Interest portion of the 24th payment\r\ninterest_24th = balance_after_23 * monthly_rate\r\ninterest_24th_rounded = round(interest_24th, 2)\r\ninterest_24th_rounded\nTo calculate how much of the 24th payment goes toward interest on a $250,000 mortgage at 3.25% over 20 years, we first determine the monthly payment using the standard amortization formula. Then, we find the remaining loan balance after 23 payments, and finally, calculate the interest on the 24th payment by multiplying the remaining balance by the monthly interest rate.\n\nThe result is that the amount of the 24th payment going toward interest is @@@629.53@@@.\n",
    "actual_answer": 629.53
  },
  {
    "question": "What's the incremental interest rate (cost of borrowing) on an additional $20,000 if I go from a $250,000 loan at 3.25% to a $270,000 loan at 3.75%, both for 20 years? Can you solve for the interest rate that would give the same payment difference on just the $20,000?",
    "expected_answer": 9.22,
    "ai_response": "Let's break this down step by step:\n\n1. **Step 1: Calculate the monthly payments for each scenario using the standard mortgage formula:**\n\n\\[\nP = \\frac{L \\times r (1+r)^n}{(1+r)^n - 1}\n\\]\n\nWhere:\n- \\(P\\) = monthly payment\n- \\(L\\) = loan principal\n- \\(r\\) = monthly interest rate (annual rate / 12)\n- \\(n\\) = total number of payments (loan term in months)\n\n#### Scenario 1: $250,000 at 3.25% for 20 years\n- \\(L = 250000\\)\n- Annual rate = 3.25% \u2192 Monthly rate \\(r_1 = 0.0325/12\\)\n- \\(n = 20 \\times 12 = 240\\)\n\n#### Scenario 2: $270,000 at 3.75% for 20 years\n- \\(L = 270000\\)\n- Annual rate = 3.75% \u2192 Monthly rate \\(r_2 = 0.0375/12\\)\n- \\(n = 240\\)\n\n2. **Step 2: Calculate the difference in monthly payment between Scenario 2 and Scenario 1.**\n\n3. **Step 3: Find the interest rate on a $20,000 (the \"incremental\" loan) that would result in the same monthly payment as the difference between the two scenarios, also for 20 years. This solves for the \"incremental\" cost of borrowing for the extra $20,000.**\n\nLet's do the calculations:\n\n```python\nimport numpy as np\n\ndef monthly_payment(principal, annual_rate, years):\n    r = annual_rate / 12\n    n = years * 12\n    return principal * r * (1 + r) ** n / ((1 + r) ** n - 1)\n\n# Parameters\nL1 = 250000\nr1 = 0.0325\nL2 = 270000\nr2 = 0.0375\nyears = 20\nn = years * 12\n\n# Monthly payments\nP1 = monthly_payment(L1, r1, years)\nP2 = monthly_payment(L2, r2, years)\n\n# Difference\ndiff = P2 - P1\n\n# Now solve for the rate that gives the same payment on 20,000 over 20 years\n# We need to solve for r in the formula:\n# diff = 20000 * r * (1 + r) ** n / ((1 + r) ** n - 1)\n# Let's rearrange and solve numerically\n\nfrom scipy.optimize import fsolve\n\ndef payment_diff_eq(r):\n    return 20000 * r * (1 + r) ** n / ((1 + r) ** n - 1) - diff\n\n# r is the monthly rate; let's guess 0.003 (about 3.6% annually)\nr_incremental = fsolve(payment_diff_eq, 0.003)[0]\nannual_incremental = r_incremental * 12\n\nP1, P2, diff, annual_incremental\n```\n\nLet's do the calculation to get the value.\nimport numpy as np\r\nfrom scipy.optimize import fsolve\r\n\r\ndef monthly_payment(principal, annual_rate, years):\r\n    r = annual_rate / 12\r\n    n = years * 12\r\n    return principal * r * (1 + r) ** n / ((1 + r) ** n - 1)\r\n\r\n# Parameters\r\nL1 = 250000\r\nr1 = 0.0325\r\nL2 = 270000\r\nr2 = 0.0375\r\nyears = 20\r\nn = years * 12\r\n\r\n# Monthly payments\r\nP1 = monthly_payment(L1, r1, years)\r\nP2 = monthly_payment(L2, r2, years)\r\n\r\n# Difference in monthly payment between loan scenarios\r\ndiff = P2 - P1\r\n\r\n# Solve for annual rate on $20,000 that gives the same payment as the difference\r\ndef payment_diff_eq(r):  # r is monthly rate\r\n    return 20000 * r * (1 + r) ** n / ((1 + r) ** n - 1) - diff\r\n\r\nr_incremental = fsolve(payment_diff_eq, 0.003)[0]  # initial guess: 0.3%/month (~3.6%/yr)\r\nannual_incremental = r_incremental * 12  # convert to annual rate\r\n\r\n# Output the incremental annual interest rate (multiply by 100 for percentage)\r\nannual_incremental * 100\r\n\nTo find the incremental interest rate for the extra $20,000 borrowed, we set up equations for both loan scenarios and then solved for the rate on the $20,000 that results in the same monthly payment increase. \n\nAfter calculating, the incremental (effective) annual interest rate on the extra $20,000 is approximately @@@9.22@@@. \n\nThis means the cost of borrowing that additional $20,000, given the change in payment, is about 9.22% per year.\n",
    "actual_answer": 9.22
  },
  {
    "question": "I am comparing two ways to borrow the same total amount over 20 years with monthly payments: Option A: Two separate loans: one for $250,000 at 3.25%, and another for $120,000 at 5.50%. Option B: One big loan for $350,000 at 3.95%. Which one ends up costing less in the long run (Option A minus Option B)",
    "expected_answer": 31615.91,
    "ai_response": "Let's break down the problem:\n\n- Both options are for a 20-year loan term, paid monthly.\n- Option A splits the loan into two parts with different interest rates, while Option B is a single loan with a blended rate.\n- To decide which is better, I'll calculate the total amount paid over 20 years for both options, then subtract Option B's cost from Option A's.\n\n### Step 1: Calculate Monthly Payments\n\n#### Option A\n1. Loan 1: $250,000 at 3.25% (annual), 20 years (240 months)\n2. Loan 2: $120,000 at 5.50% (annual), 20 years (240 months)\n\n#### Option B\n- Single loan: $350,000 at 3.95% (annual), 20 years (240 months)\n\nThe formula for monthly payment is:\n\\[\nP = \\frac{L \\cdot r \\cdot (1 + r)^n}{(1 + r)^n - 1}\n\\]\nWhere:  \n- \\( P \\) = monthly payment  \n- \\( L \\) = loan amount  \n- \\( r \\) = monthly interest rate (annual rate/12)  \n- \\( n \\) = total number of payments (months)  \n\nLet's do the calculations.\n# Given values\r\nloan1 = 250000\r\nrate1 = 3.25 / 100 / 12\r\nloan2 = 120000\r\nrate2 = 5.50 / 100 / 12\r\nloanB = 350000\r\nrateB = 3.95 / 100 / 12\r\nn = 20 * 12  # 20 years, 240 months\r\n\r\n# Monthly payment formula\r\ndef monthly_payment(L, r, n):\r\n    return (L * r * (1 + r) ** n) / ((1 + r) ** n - 1)\r\n\r\n# Calculate monthly payments\r\np1 = monthly_payment(loan1, rate1, n)\r\np2 = monthly_payment(loan2, rate2, n)\r\npB = monthly_payment(loanB, rateB, n)\r\n\r\n# Calculate total payments over 20 years\r\ntotal_A = (p1 + p2) * n\r\ntotal_B = pB * n\r\n\r\n# Difference (Option A - Option B)\r\nsavings = total_A - total_B\r\nround(savings)\nLet's break down the costs:\n\n- For Option A, the monthly payments for each loan were calculated using the mortgage payment formula, then summed and multiplied by 240 months.\n- For Option B, the same was done for the single larger loan.\n\nAfter running the numbers, I find that over 20 years, Option A costs about $31,616 more than Option B. So, Option B (the single, larger loan at 3.95%) is the better financial choice in the long run. \n\nThe difference, Option A minus Option B, is @@@31616@@@.\n",
    "actual_answer": 31616.0
  },
  {
    "question": "I took out a mortgage for $250,000, 3 years ago. It\u2019s a 20-year loan with a 3.75% interest rate. Today, I could get a new 25-year mortgage at 3.25% interest, but I\u2019d have to pay a penalty of 2% of what I still owe, plus another $2,500 in fees. (Fees and penalties are rolled into the new loan.) If I weigh all future payments and costs as if they happened today, how much would I save over the term of the loan if I refinance (output loss as a negative number)?",
    "expected_answer": 2895.76,
    "ai_response": "Let's walk through the calculations step by step:\n\n### 1. Current Mortgage Details\n- Original loan: $250,000\n- Time passed: 3 years\n- Term: 20 years (240 months)\n- Interest: 3.75%\n- Remaining term: 240 - 36 = 204 months\n\n#### Calculate Current Balance After 3 Years\nWe need to calculate how much you still owe after 3 years (36 payments).\n\n**Monthly Payment** calculation:\n\\[\nM = P \\frac{r(1+r)^n}{(1+r)^n-1}\n\\]\nWhere:\n- \\( P = 250,000 \\)\n- \\( r = 3.75\\% / 12 = 0.003125 \\)\n- \\( n = 240 \\)\n\nLet's calculate the monthly payment:\n\n```python\nP = 250000\nannual_rate = 0.0375\nr = annual_rate / 12\nn = 240\n\nmonthly_payment = P * (r * (1 + r)**n) / ((1 + r)**n - 1)\nmonthly_payment\n```\n\nNow, let's calculate the remaining balance after 36 payments using the amortization formula:\n\n\\[\nB = P \\frac{((1 + r)^n - (1 + r)^p)}{(1 + r)^n - 1}\n\\]\nWhere:\n- \\( p = 36 \\) (payments made)\n\n```python\np = 36\nbalance = P * ((1 + r)**n - (1 + r)**p) / ((1 + r)**n - 1)\nbalance\n```\n\n### 2. Refinance Option Details\n- New term: 25 years (300 months)\n- New interest rate: 3.25%\n- Fees: 2% of current balance + 2,500 (rolled into new loan)\n\n**Calculate total new loan amount:**\n\n```python\nnew_rate = 0.0325 / 12\nnew_n = 300\n\npenalty = 0.02 * balance\nfees = penalty + 2500\nnew_principal = balance + fees\n\n# New monthly payment\nnew_monthly_payment = new_principal * (new_rate * (1 + new_rate)**new_n) / (((1 + new_rate)**new_n) - 1)\nnew_monthly_payment\n```\n\n### 3. Calculate Total Cost Over Remaining Loan\n\n- Current loan: 204 payments of the original monthly payment.\n- Refi: 300 payments of new monthly payment.\n- All payments are viewed as today\u2019s dollars (no discount rate specified, so we\u2019ll take the raw sums).\n\n### 4. Compare Total Remaining Cost\n\n```python\n# Total cost remaining with current loan\ntotal_current_left = monthly_payment * (n - p)\n# Total cost with refinance\ntotal_new = new_monthly_payment * new_n\n\n# Savings (positive if save, negative if lose money)\nsavings = total_current_left - total_new\nsavings\n```\n\nLet's do the calculations in code:\n# Step 1: Calculate current balance after 3 years\nP = 250000\nannual_rate = 0.0375\nr = annual_rate / 12\nn = 240  # total payments\np = 36   # payments made\n\n# Monthly payment calculation\nmonthly_payment = P * (r * (1 + r)**n) / ((1 + r)**n - 1)\n\n# Remaining balance after 3 years\nbalance = P * ((1 + r)**n - (1 + r)**p) / ((1 + r)**n - 1)\n\n# Step 2: Refinancing details\nnew_annual_rate = 0.0325\nnew_r = new_annual_rate / 12\nnew_n = 300  # 25 years\n\n# Penalty and fees\npenalty = 0.02 * balance\nfees = penalty + 2500\nnew_principal = balance + fees\n\n# New monthly payment\nnew_monthly_payment = new_principal * (new_r * (1 + new_r)**new_n) / ((1 + new_r)**new_n - 1)\n\n# Step 3: Total costs\ntotal_current_left = monthly_payment * (n - p)\ntotal_new = new_monthly_payment * new_n\n\n# Step 4: Compare total remaining costs\nsavings = total_current_left - total_new\nsavings, total_current_left, total_new, balance, fees, new_monthly_payment, monthly_payment\n\nHere\u2019s how I got the answer:\n\n1. **Current mortgage monthly payment:** about 1482.22\n2. **Balance after 3 years:** about 223334.85\n3. **Penalty (2% of balance) + other fees ($2,500):** 4466.70 + 2500 = 6966.70\n4. **New loan amount (after rolling in fees):** 223334.85 + 6966.70 = 230301.55\n5. **New monthly payment for 25 years at 3.25%:** about 1122.30\n6. **Total left to pay on current mortgage:** 204 months \u00d7 1482.22 = 302373.04\n7. **Total of all payments on the new loan:** 300 months \u00d7 1122.30 = 336689.05\n\nSubtracting the refinance option from your current obligation shows you would pay about 34,316 more by refinancing.\n\nSo overall **you would lose money by refinancing.**\n\n@@@-34316.01@@@\n",
    "actual_answer": -34316.01
  },
  {
    "question": "If I borrow $400,000 at an annual interest rate of 3.85% for 25 years, and I make monthly payments that fully pay off the loan by the end, how much will I have to pay each month?",
    "expected_answer": 2078.36,
    "ai_response": "Let's break down the calculation:\n\n1. **Loan Amount (Principal, P):** $400,000\n2. **Annual Interest Rate (r):** 3.85% (which is 0.0385 as a decimal)\n3. **Loan Term (n years):** 25 years\n4. **Number of Payments (N):** 25 years \u00d7 12 months/year = 300 months\n5. **Monthly Interest Rate:** 0.0385 / 12 \u2248 0.003208333\n\nThe formula for a monthly payment on an amortizing loan is:\n\n\\[ M = \\frac{P \\cdot r \\cdot (1+r)^N}{(1+r)^N - 1} \\]\n\nwhere:\n- \\( M \\) = monthly payment\n- \\( P \\) = principal\n- \\( r \\) = monthly interest rate\n- \\( N \\) = number of monthly payments\n\nLet's do the calculation using Python for accuracy:\n# Given values\r\nP = 400000  # Principal\r\nannual_rate = 0.0385\r\nmonthly_rate = annual_rate / 12\r\nN = 25 * 12  # 25 years * 12 months\r\n\r\n# Monthly payment formula\r\nM = P * (monthly_rate * (1 + monthly_rate) ** N) / ((1 + monthly_rate) ** N - 1)\r\nround(M, 2)  # Rounded to 2 decimal places for cents accuracy\nTo fully pay off a $400,000 loan at 3.85% interest over 25 years with monthly payments, you will have to pay @@@2078.36@@@ each month.\n\nHere's how it was calculated:\n- Loan principal: $400,000\n- Annual interest rate: 3.85% (which is 0.0385 as a decimal)\n- Monthly interest rate: 0.0385 / 12 \u2248 0.003208333\n- Loan period: 25 years = 300 months\n\nPlugged into the standard mortgage payment formula, the result is $2,078.36 per month.\n",
    "actual_answer": 2078.36
  },
  {
    "question": "If I get a loan for $400,000 at 3.85% interest for 25 years, with monthly payments that fully pay it off, how much will I still owe after 7 years?",
    "expected_answer": 323492.92,
    "ai_response": "To work out how much you\u2019ll still owe on your mortgage after 7 years, we first need to know how much your initial monthly payment is. This loan is a standard fixed-rate mortgage and fully amortized over 25 years at 3.85% annual interest, which is compounded monthly.\n\n**Step 1: Calculate the monthly payment**\n\n- Principal (P): 400,000\n- Annual Interest Rate (r): 3.85% = 0.0385\n- Monthly Interest Rate (i): 0.0385 / 12\n- Number of payments (n): 25 \u00d7 12 = 300\n\nThe formula for the monthly payment is:\n\n\\[\nM = P \\times \\frac{i(1+i)^n}{(1+i)^n - 1}\n\\]\n\nLet\u2019s calculate this first.\n\n**Step 2: Calculate the remaining balance after 7 years (84 payments made)**\n\nThe formula for the remaining balance after k payments is:\n\n\\[\nB = P \\left( \\frac{(1+i)^n - (1+i)^k}{(1+i)^n - 1} \\right)\n\\]\n\nwhere:\n- \\(k = 7 \\times 12 = 84\\) payments\n\nLet\u2019s compute these step by step with Python so it\u2019s accurate.\n# Loan details\nP = 400000  # principal\nr = 0.0385  # annual interest rate\ni = r / 12  # monthly interest rate\nn = 25 * 12  # total number of monthly payments\nk = 7 * 12  # number of payments made in 7 years\n\n# Monthly payment calculation\nM = P * (i * (1 + i) ** n) / ((1 + i) ** n - 1)\n\n# Remaining balance after k payments\nB = P * (((1 + i) ** n - (1 + i) ** k) / ((1 + i) ** n - 1))\n\nB_rounded = round(B, 2)\nB_rounded\nAfter 7 years of payments, you would still owe @@@323492.92@@@ on your $400,000 25-year mortgage at a 3.85% interest rate.\n\nHere\u2019s how I got there:\n- The monthly payment was calculated using the amortizing loan formula.\n- The remaining balance after 84 payments (7 years) was then calculated using the standard formula for the remaining balance on an amortizing loan.\n- Doing the math, the balance remaining is about $323,492.92.\n",
    "actual_answer": 323492.92
  },
  {
    "question": "For a loan of $400,000 with 3.85% interest over 25 years, with monthly payments that pay off the loan completely, how much of the 60th payment goes toward interest?",
    "expected_answer": 1117.95,
    "ai_response": "Let's break down the calculation step by step:\n\n1. **Loan Amount (Principal):** $400,000  \n2. **Annual Interest Rate:** 3.85%  \n3. **Loan Term:** 25 years  \n4. **Monthly interest rate:** = 3.85% / 12 = 0.320833...% = 0.00320833  \n5. **Total number of payments:** 25 x 12 = 300  \n6. **Monthly payment formula:**  \n   \\[\n   M = P \\times \\frac{r(1 + r)^n}{(1 + r)^n - 1}\n   \\]\n   where:  \n   - \\(M\\) = monthly payment  \n   - \\(P\\) = principal  \n   - \\(r\\) = monthly interest rate  \n   - \\(n\\) = number of payments\n\nLet's calculate the monthly payment, the balance after 59 payments, and then the interest on the 60th payment.\n\n### Step 1: Calculate the monthly payment (M)\nLet's calculate using the formula.\n\n### Step 2: Calculate the balance after 59 payments\n\nBalance after \\(k\\) payments:\n\\[\nB_k = P \\times \\frac{(1 + r)^n - (1 + r)^k}{(1 + r)^n - 1}\n\\]\n\n### Step 3: Calculate the interest part of the 60th payment\n\nInterest on 60th payment = Balance after 59 payments x monthly interest rate\n\nLet's compute.\n# Given values\nP = 400000  # principal\nannual_rate = 0.0385\nr = annual_rate / 12  # monthly interest rate\nn = 25 * 12  # total payments\nk = 59  # payments made before 60th payment\n\n# Monthly payment\nM = P * (r * (1 + r) ** n) / ((1 + r) ** n - 1)\n\n# Balance after k payments\nB_k = P * ((1 + r) ** n - (1 + r) ** k) / ((1 + r) ** n - 1)\n\n# Interest portion of the 60th payment\ninterest_60 = B_k * r\n\n# Round to 2 decimal places for cents\ninterest_60_rounded = round(interest_60, 2)\ninterest_60_rounded\nThe portion of the 60th payment that goes toward interest is calculated by taking the remaining balance after 59 payments and multiplying it by the monthly interest rate. After following the steps, the interest portion of the 60th payment is @@@1117.95@@@.\n",
    "actual_answer": 1117.95
  },
  {
    "question": "What's the incremental interest rate (cost of borrowing) on an additional $20,000 if I go from a $400,000 loan at 3.85% to a $420,000 loan at 4.10%, both for 25 years? Can you solve for the interest rate that would give the same payment difference on just the $20,000?",
    "expected_answer": 8.56,
    "ai_response": "Great question! What you're asking is: given the payment difference when you increase your loan from $400,000 at 3.85% to $420,000 at 4.10% (over 25 years), what interest rate would make the monthly payment for just $20,000 (the difference) equal to this payment difference?\n\nLet's outline the steps:\n\n1. **Find monthly payments for both loans** using the standard loan payment formula:\n   \\[\n   P = \\frac{L \\cdot r \\cdot (1 + r)^n}{(1 + r)^n - 1}\n   \\]\n   Where:\n   - \\(P\\) = monthly payment\n   - \\(L\\) = loan amount\n   - \\(r\\) = monthly interest rate\n   - \\(n\\) = total number of payments (months)\n\n2. **Calculate the payment difference.**\n\n3. **Set this equal to the payment for a $20,000 loan at unknown rate x.** Solve for x.\n\nLet's calculate it step by step.\n\n### Step 1: Find Monthly Payments\n\n#### 1. $400,000 at 3.85% for 25 years\n\n- Principal, \\(L_1 = 400,000\\)\n- Annual interest rate = 3.85%\n- Monthly rate (\\(r_1\\)) = 0.0385 / 12\n- \\(n = 25 \u00d7 12 = 300\\)\n\n#### 2. $420,000 at 4.10% for 25 years\n\n- Principal, \\(L_2 = 420,000\\)\n- Annual rate = 4.10%\n- Monthly rate (\\(r_2\\)) = 0.0410 / 12\n- \\(n = 300\\)\n\nLet's calculate both payments.\n\n### Step 2: Payment Difference\n\nThe difference is the amount you \"pay more\" per month for the $20,000.\n\n### Step 3: Equivalent Interest Rate\n\nSet the payment difference equal to the payment for $20,000 at some unknown interest rate and solve for it.\n\nLet's compute it with code.\nfrom scipy.optimize import fsolve\n\n# Loan details\nL1 = 400000\nr1_annual = 0.0385\nL2 = 420000\nr2_annual = 0.0410\nL_diff = L2 - L1\nn = 25 * 12  # 25 years, monthly payments\n\ndef monthly_payment(L, annual_rate, n):\n    r = annual_rate / 12\n    return (L * r * (1 + r)**n) / ((1 + r)**n - 1)\n\n# Calculate payments\npmt1 = monthly_payment(L1, r1_annual, n)\npmt2 = monthly_payment(L2, r2_annual, n)\n\n# Step 2: Payment difference\ndiff = pmt2 - pmt1\n\n# Step 3: Solve for the interest rate that gives this payment on $20,000\ndef equation(annual_rate):\n    r = annual_rate / 12\n    return (L_diff * r * (1 + r)**n) / ((1 + r)**n - 1) - diff\n\n# Guess starting point: higher than 4.10%\nsol = fsolve(equation, 0.05)\nincremental_rate_percent = sol[0] * 100  # as a percent\n\n# For display\nincremental_rate_percent_rounded = round(incremental_rate_percent, 3)\nincremental_rate_percent_rounded\nHere\u2019s how I worked this out:\n\n1. I calculated the monthly payments for both loans:\n   - $400,000 at 3.85% for 25 years\n   - $420,000 at 4.10% for 25 years\n\n2. The monthly payment difference between the two is then treated as the \"payment\" on the extra $20,000. \n\n3. To figure out the interest rate that makes the $20,000 payment match this difference, I solved for the rate.\n\nThe **incremental interest rate** (cost of borrowing just the extra $20,000, based on payments) is @@@8.557@@@\n",
    "actual_answer": 8.557
  },
  {
    "question": "I am comparing two ways to borrow the same total amount over 25 years with monthly payments: Option A: Two separate loans: one for $400,000 at 3.85%, and another for $180,000 at 7.25%. Option B: One big loan for $500,000 at 4.50%. Which one ends up costing less in the long run (Option A minus Option B)",
    "expected_answer": 180074.78,
    "ai_response": "Let's break down the problem:\n\n- Both options have a term of 25 years (300 months).\n- Option A: Two loans\n  - $400,000 at 3.85%\n  - $180,000 at 7.25%\n- Option B: $500,000 at 4.50%\n\nI'll calculate the total repayment for each loan by:\n1. Calculating the monthly payment for each loan using the formula:  \n   \\( M = P \\frac{r(1+r)^n}{(1+r)^n-1} \\)\n   - \\(P\\) = Principal\n   - \\(r\\) = monthly interest rate (annual rate / 12)\n   - \\(n\\) = number of payments (months)\n2. Multiply the monthly payment by 300 to get the total paid over 25 years.\n\nThen, subtract the total amount paid in Option B from that in Option A.\n\nLet's do the math step by step.\n\n### Step 1: Calculate the monthly payments\n\n#### Option A:\n- Loan 1: $400,000 at 3.85%\n- Loan 2: $180,000 at 7.25%\n\n#### Option B:\n- Loan: $500,000 at 4.50%\n\n### Calculations:\n\nLet's use Python to make sure the numbers are precise.\n# Loan payment formula\ndef monthly_payment(P, annual_rate, n_months):\n    r = annual_rate / 12 / 100\n    payment = P * (r * (1 + r) ** n_months) / ((1 + r)** n_months - 1)\n    return payment\n\nmonths = 25 * 12  # 25 years\n\n# Option A\npayment_A1 = monthly_payment(400_000, 3.85, months)\npayment_A2 = monthly_payment(180_000, 7.25, months)\ntotal_paid_A = (payment_A1 + payment_A2) * months\n\n# Option B\npayment_B = monthly_payment(500_000, 4.50, months)\ntotal_paid_B = payment_B * months\n\n# Difference (A - B)\ndifference = total_paid_A - total_paid_B\ndifference_rounded = round(difference)\n\npayment_A1, payment_A2, total_paid_A, payment_B, total_paid_B, difference_rounded\n\nLet's break this down:\n\n- The monthly payment for the $400,000 loan at 3.85% is about $2078.36.\n- The monthly payment for the $180,000 loan at 7.25% is about $1301.05.\n- Total paid over 25 years for Option A (both loans): $1,013,823.50.\n- The monthly payment for the $500,000 loan at 4.50% is about $2779.16.\n- Total paid over 25 years for Option B: $833,748.72.\n\nSubtracting the totals (Option A minus Option B):\n$1,013,823.50 - $833,748.72 = $180,075\n\nSo, Option B saves you $180,075 over 25 years compared to Option A.\n\nFinal answer: @@@180075@@@\n\nExplanation:\nOption A ends up costing much more because the $180,000 portion at 7.25% accrues a lot of interest over 25 years, far outpacing the savings from the slightly lower rate on the $400,000 portion. Option B, with a single loan at 4.50%, is far less expensive overall.\n",
    "actual_answer": 180075.0
  },
  {
    "question": "I took out a mortgage for $400,000, 7 years ago. It\u2019s a 25-year loan with a 4.10% interest rate. Today, I could get a new 30-year mortgage at 3.85% interest, but I\u2019d have to pay a penalty of 2% of what I still owe, plus another $3,500 in fees. (Fees and penalties are paid out of pocket.) If I weigh all future payments and costs as if they happened today, how much would I save over the term of the loan if I refinance (output loss as a negative number)?",
    "expected_answer": -2659.73,
    "ai_response": "Great, let's break down the problem:\n\n1. **Find the current mortgage balance after 7 years on the original loan:**\n   - Original loan: 400000\n   - Term: 25 years (300 months)\n   - Rate: 4.10%\n   - Payments already made: 7 years (84 months)\n\n2. **Find the payment for the original loan and its remaining payments.**\n\n3. **Find the payment and total cost for the refinance:**\n   - New rate: 3.85%\n   - New term: 30 years (360 months)\n   - Additional fees: penalty (2% of current balance) + $3500, paid today\n\n4. **Calculate the net present value (NPV) of all future payments and fees for both options, assuming discount rate equals current new mortgage rate (3.85%)**.\n\n5. **Calculate the savings (or loss):**\n   - NPV of keeping loan \u2013 (NPV of refinance + fees/penalty today)\n\nLet's go step by step: \n\n### 1. Current Mortgage Balance Calculation\n\nWe use the remaining balance formula for a fixed-rate mortgage.\n\nLet\u2019s compute this in Python:\n# Mortgage parameters\r\nP_original = 400000  # principal\r\nr_original = 0.041  # annual interest\r\nn_total = 25 * 12  # total months = 300\r\nn_paid = 7 * 12  # payments made = 84\r\nn_left = n_total - n_paid\r\n\r\n# Monthly interest rates\r\nmonthly_r_original = r_original / 12\r\n\r\n# Monthly payment calculation (original)\r\nM_original = P_original * (monthly_r_original * (1 + monthly_r_original) ** n_total) / ((1 + monthly_r_original) ** n_total - 1)\r\n\r\n# Remaining balance after n_paid months\r\n# Formula: B = P * ((1 + r)^n - (1 + r)^p) / ((1 + r)^n - 1)\r\nB_remaining = P_original * (((1 + monthly_r_original) ** n_total - (1 + monthly_r_original) ** n_paid) / ((1 + monthly_r_original) ** n_total - 1))\r\n\r\nM_original, round(B_remaining, 2), n_left\nThe monthly payment on your original mortgage was about $2,133.50. After 7 years, the remaining balance is approximately $325,537.67, with 216 payments left.\n\n### 2. New Loan Terms (Refinance)\n\n- New loan balance: $325,537.67 (refinance the remaining balance)\n- New interest rate: 3.85%\n- New term: 30 years (360 months)\n\n#### Monthly payment for new loan\n\nLet's calculate that:\n# Refinance parameters\r\nP_new = B_remaining  # the refinanced amount\r\nr_new = 0.0385  # annual rate\r\nmonthly_r_new = r_new / 12\r\nn_new = 30 * 12  # 360 months\r\n\r\n# New monthly payment\r\nM_new = P_new * (monthly_r_new * (1 + monthly_r_new) ** n_new) / ((1 + monthly_r_new) ** n_new - 1)\r\nM_new\nThe new monthly payment if you refinance would be approximately $1,526.15.\n\n### 3. Out-of-pocket Costs for Refinancing\n\n- Penalty: 2% of current balance = 2% \u00d7 325537.67 = $6,510.75\n- Fees: $3,500\n- Total out-of-pocket costs = $6,510.75 + $3,500 = $10,010.75\n\n### 4. Present Value of All Future Payments\n\nWe discount all future payments back to today using the new mortgage rate (3.85% annually / 12 monthly).\n\n#### Present Value for Each Option\n\n- **Current Mortgage:** 216 payments of $2,133.50, discounted at 3.85% per year.\n- **Refinance:** 360 payments of $1,526.15, discounted at 3.85% per year, plus $10,010.75 paid today.\n\nLet's compute present values:\n\n- PV of annuity formula: \\( PV = PMT \\times \\left( \\frac{1 - (1 + r)^{-n}}{r} \\right) \\)\nWhere \\( r = \\) monthly discount rate.\n\nLet's calculate both:\nfrom math import pow\n\n# Monthly discount rate\nmonthly_discount = monthly_r_new\n\n# Present value for keeping current mortgage\nPV_current = M_original * (1 - pow(1 + monthly_discount, -n_left)) / monthly_discount\n\n# Present value for refinancing (plus immediate fees and penalty)\nPV_refinance = M_new * (1 - pow(1 + monthly_discount, -n_new)) / monthly_discount + 10010.75\n\nPV_current, PV_refinance, PV_current - PV_refinance\nThe present value of keeping your current mortgage is about $332,074.85, while the present value for the refinance (including fees) is about $335,548.42.\n\nThus, if you refinance, you will lose money compared to keeping your current loan. The difference is \\(-$3,473.57\\).\n\nSo, you would lose @@@-3473.57@@@. \n\n**Explanation**: Even though your monthly payment goes down by refinancing, the longer loan term, penalties, and fees together make the refinancing more expensive when comparing the present value of all costs.\n",
    "actual_answer": -3473.57
  }
]